
## Layers of the OSI Reference Model

| Layer | Desc         |
| ----- | ------------ |
| 7     | Application  |
| 6     | Presentation |
| 5     | Session      |
| 4     | Transport    |
| 3     | Network      |
| 2     | Data link    |
| 1     | Physical     |

The functions of first three layer (known as the *upper layers*) they are typically controlled by the application software.

Each layer of the OSI model is responsible for communicating with the layers directly above and below it, receiving data from or passing data to its neighboring layers.

![[Pasted image 20251124025708.png]]

Computer1 and Server1 are exchaning data on the network. Computer1 is the sending computer, and Server1 is the receiving computer.
The data exchange starts with Computer1 sending a request to Server1 in the application layer. At Server1, the data moves back up through the layers to the application layer, which passes the data to the appropriate application or service on the system.

> At layer 4, the data is called a *segment*
> At layer 3, the data is called a *packet*
> At layer 2, the data is called a *frame*

### Layer 7: The Application Layer

The application layer running on the sending system (Computer 1) is responsible for initiating the actual request. On the receiving system, the application layer would be reseponsible for passing the request to the appropriate application or serivce on that system.

There are many examples of protocols that run at the application layer. The most common are HTTP, telnet, SSH, FTP, POP3, SMTP.

### Layer 6: The Presentation Layer

After the request is made, the application layer passes the data down to the presentation layer, where it is formatted so that the data (or request) can be interpreted by the receving system.

When the presentation layer receives data from the application layer, it makes sure the data is in the proper format, if it is not, the presentation layer converts the data accordingly.
On the receivng system, when the presentation layer receives network data from the session layer, it makes sure the data in the proper format once again converts it if it not.

### Layer 5: The Session Layer

The session layer manages the dialog between computers by establishing, managing, and terminating communications between them.
When a session is established, three distinct phases are involved. In the establishment phase, the requestor initiates the service and the rules for communication between the two systems. These rules could include such things as who transmits and when, as well as how much data can be sent at a time. Once the rules are established, the data transfer phase begins. Finally, termination occurs when the session is complete, and communication ends in an orderly fashion.

### Layer 4: The Transport Layer

The transport layer handles functions such as reliable and unreliable delivery of the data.

For reliable transport protocols, the transport layer works hard to ensure reliable delivery of data to its destinations. On the sending system, the transport layer is responsible for breaking the data into smaller parts, called *segments*, so that if retransmission is required, only the missing segments will be sent.

Another function of the transport layer is segment sequencing. Sequencing is a connection-oriented service that takes segments that are received out of order and resequences them in the right order.
The transport layer also enables the option of specifying a "service address" known as a *port address*. The port address enables the services or applications that are running on the systems to specify what application the request came from and what application the request is headed for by having each application use a unique port address on the system.

At this point, the request is broken into segments in preparation for being delivered across the network, and transport-layer information (such as the transport protocol being used and any additional transport informaiton) is appended to the request.

#### Connection-Oriented Communication and Connectionless Communication

*Connection-oriented communication* ensures realiable delivery of data from the sender to the receiver. When establishing connection services, this form of communication requires that some sort of handshaking function be performed at the beginning of a communication session.

*Connectionless communication* is a form of communication in which the sending system does not "introduce" itself, it just fires off the data.

#### Segmentation

Another function of the transport layer is to set up, maintain, and tear down connections for the session layer, that is, it handles the actual mechanics for the connection.
The information transferred between networking devices at the transport layer is divided into segments.

Segmentation is necessary to break up large amounts of data into more manageable sizes that the network can accommodate.

#### Connection Multiplexing

Because multiple connections may be established from one component to another component or to multiple components, some type of multiplexing function is needed to differentiate between data traversing the various connections. This ensures that the transport layer can send data from a particular application to the correct destination and application, and, when receiving data from a destination, the transport layer can get the data to the right local application.

To accomplish connection multiplexing, a unique port number is assigned to each application.

#### Flow Control

Another function of the transport layer is to provide optional flow control.
Flow control is used to ensure that networking components don't send too much information to the destination, overflowing its receiving buffer space and causing it to drop some of the transmitted information.

The transport layer can use two basic flow control methods:

* Ready/not ready signals
* Windowing

##### Ready/Not Ready Signals

When the destination receives more traffic than it can handle, it can send a *not ready* signal to the source, indicating that the source sould stop transmitting data. When the destination has a chance to catch up and process the source's data, the destination responds back to the source with a *ready* signal. Upon receving the ready signal, the source can resume sending data.

Two problems are associated with the use of ready/not ready signals to implement flow control.
First, the destination may respond to the source with a not ready signal when its buffer fills up. While this message is on its way to the source, the source is *still sending* information to the destination, which the destination will probably have to drop because its buffer space is full.
The second problem is once the destination is ready to receive more information, it must first send a ready signal to the source, which must receive it before more information can be sent. This causes delay in the transfer of information.

##### Windowing

With *windowing*, a window size is defined that specifies how much data (segments) can be sent before the source has to wait for an ACK from the destination. Once the ACK is received, the source can send the next batch of data (up to the maximum defined in the window size).

Windowing accomplished two things: First, flow control is enforced, based on the window size. In many protocol implemantations, the window size is dynamically negotiated up front and can be renegotiated during the lifetime of the connection. Second, through the windowing process, the destination tells the source what was received. This indicates to the source whether any data was lost along the way to the destination and enables the source to resend any missing information.

The window size chosen for a connection impacts its efficiency and throughput in defining how many segments (or bytes) can be sent before the source has to wait for an ACK.

![[Pasted image 20251124074603.png]]

With a window size of 1, the flow control process is not very quick or efficient. With a window size of 3, the source can send three segments at once before waiting an ACK. Once segments are sent, the source must wait for an ACK. In this case, having a larger window size is more efficient: only one ACK is required for every three segments that are sent.

![[Pasted image 20251124074839.png]]

In this example, the window size negotiated is 3. PC-A sends its first three segments, which are successfully received by PC-B. PC-B acknowledges the next segment it expects, which is 4. When PC-A receives this ACK, it sends segments 4, 5, and 6. For some reason, segment 4 becomes lost and never reaches the destination, but segment 5 and 6 do arrive. The destination sends back ACK of 4, indicating that segment 4 is expected next.
At this point, how PC-A reacts depends on the transport layer protocol that is used.

* PC-A understands that only segment 4 was lost and therefore resends segment 4. It then sends segment 7 and 8, filling up the window size
* PC-A doesn't understand what was or wasn't received, so it sends three segments starting at segment 4, indicated by PC-B.

If two segments are lost, the first option listed won't work unless the destiantion can send a list of lost segments. Therefore, most protocol stacks that use windowing will implement the second option.
Given this behavior, the size of the window can affect your performace.
If a connection is experiencing a high number of errors, the window size can be dropped to a smaller value to increase efficiency. And once these errors disappear or drop down to a lower rate, the window size can be increased to maximize the connection's throughput.

Window sizes on the source and destination devices can be *different*.

### Layer 3: The Network Layer

The network layer is responsible for managing logical addressing information in the packets and the delivery, or routing, of those packets by using information stored in a routing table. The routing table is a list of available destinations that are stored in memory on the routers.

The network layer is responsible for four main functions:

* Defines logical addresses used at layer 3
* Finds path, based on the network numbers of logical addresses, to reach destination components
* Connects different data link layer types together, such as Ethernet, Fiber Distributed Data Interface (FDDI), serial, and Token Ring
* Defines segmentation via the use of packets to transport information

To move information between devices that have different network numbers, a router is used.
Routers use information in the logical address to make decisions about how to reach a destination.

### Layer 2: The Data Link Layer

At the data link layer, the data is converted from a packet to a pattern of electrical bit signals that will be used to send the data across the communication medium.

The data link layer is divided into two sublayers:

* Logical link control (LLC)
	* This is reponsible for error correction and control functions
* Media Access Control (MAC)
	* This determines the physical addressing of the hosts.
	* It also determines how the host places traffic on the meium

The MAC sublayer maintains physical device addresses for communicating with other devices on the network.
Note that the MAC address is used for communication on the local network segment, while the IP address is used for communication on different networks.

#### Layer 2 Frames

The data link layer defines how a networking component accesses the media to which it is connected, and it also defines the media's frame type and transmission method. The frame includes the fields and components the data link layer uses to communicate with devices on the same wire or layer 2 topology. This communication occurs only for components on the same data link layer media type (or same piece of wire), within the same network segment. To traverse layer 2 protocols, Ehternet to Token Ring, for instance, a router is typically used.

Examples of layer 2 protocols and standards for LAN connections:

* Institute of Electrical and Electronic Engineers (IEEE) 802.2, 802.3, and 802.5; Ethernet II; and FDDI.

Examples of layer 2 protocols and standards for WAN connections:

* Asynchronous Transfer Mode (ATM)
* Frame Relay
* High-Level Data Link Control (HDLC)
* Point-to-Point Protocol (PPP)
* Synchronous Data Link Control (SDLC)
* Serial Line Internet Protocol (SLIP)
* X.25

The data link layer is also responsible for defining the format of layer 2 frames as well as the mechanics of how devices communicate with each other the physical layer.

The data link layer is responsible for the following:

* Defining the MAC or hardware addresses
* Defining the physical or hardware topology for connections
* Defining how the network layer protocol is encapsulated in the data link layer frame
* Providing both connectionless and connection-oriented services
* Verifying the checksum of the received frame to ensure it is valid (if it is invalid, it is discarded)

#### Data Link Layer Addressing

The data link layer uses MAC. For LAN communications, each machine on the same network segment or topology needs a unique MAC address.
A MAC address is 48 bits in length and is represented as a hexadecimal number, 12 characters in length.

```
### MAC address format
FFFF.FFFF.FFFF

FF:FF:FF:FF:FF:FF
```

Each manufacturer of network cards is assigned a unique 24-bit vendor ID, which is then used as the first 24 bits of a MAC address for any network cards created by that vendor. Each vendor has one or more unique vendor IDs, with each making up the first half of a MAC address.
These first six digits are commonly called the *organizationally unique identifier (OUI)*.

The last six digits are used to represent the network interface card (NIC) uniquely within the OUI value. Theoretically, each NIC has a unique MAC address. In reality, however, this is probably not true.
Each of your devices has a unique MAC address on its network card within the same *network segment*. Some devices enable you to change this hardware address.

#### Communication Types

Each data link layer frame contains two MAC addresses: a source MAC address of the machine creating the frame, and a destination MAC address for the device or devices intended to receive the frame.

* **Unicast**
	* A frame with a destination *unicast* MAC address is intended for only one network component on a segment.
* **Multicast**
	* *Multicast* communication represents communication to a group of devices on a segment.
	* The multicast group can contain no devices up to every device on a segment.
	* Membership of a group is dynamic.
* **Broadcast**
	* A *broadcast* message is sent to all systems on the network.

### Layer 1: The Physical Layer

The bottom layer of the OSI hierarchy is concerned only with moving bits of data on and off the network medium.

The physical layer is responsible for the physical mechanics of a network connection, which include the following:

* The type of interface used on the networking device
* The type of cable used for connecting devices
* The connectors used on each end of the cable
* The pin patterns used for each of the connections on the cable
* The encoding of a message on a signal by converting binary digits to a physical representation based on the media type, such as electrical for copper, light for fiber, or a radio wave for wireless

### Devices

Router: Layer 3
Switches, bridges, NICs: Layer 2
Hubs, repeaters: Layer 1

### Ex 2-1: Mixing and Matching OSI Model

Network layer is responsible for the logical addressing and delivery of the packets.
Presentation layer is responsible for formatting the message
Data link layer is responsible for physical addressing and converting data packets to electrical signals
Transport layer is responsible for creating, managing, and ending a dialog
Sesson layer is responsible for realiable deliver, sequencing, and breaking the message into packets
Physical layer is responsible for placing or removeing the signal on and off the wire
Application layer is responsible for initiating or receiving the network request

---

## Encapsulation and De-encapsulation

The term *data encapsulation* refers to the fact that as data is passed down the seven layers of the OSI model, header information is added to the message.

![[Pasted image 20251124152402.png]]

*Protocol data unit* (PDU) describes data as it passes through each layer of the OSI model.

| PDU     | Layers                                       |
| ------- | -------------------------------------------- |
| Data    | Application, presentation, and session layer |
| Segment | Transport layer                              |
| Packet  | Network layer                                |
| Frame   | Data link layer                              |
| Bits    | Physical layer                               |

### Layers and Communication

---

## Chapter Review

| Layer | Desc         |
| ----- | ------------ |
| 7     | Application  |
| 6     | Presentation |
| 5     | Session      |
| 4     | Transport    |
| 3     | Network      |
| 2     | Data link    |
| 1     | Physical     |

The application layer is responsible for initiating a network request, or servicing that network request.

The presentation layer defines the format of the information.

The session layer is responsible for the setup and teardown of the dialog.

The transport layer handles the mechanics or reliable or unreliable services.

The network layer is responsible for logical addressing and routing. Routers function at layer 3.

The data link layer assigns physical addresses and defines how devices on a specific media type communicate with each other.

The physical layer handles all physical properties for a connection.

A protocol data unit (PDU) describes data and its overhead. Each layer has a unique PDU: as data is sent down the protocol stack, it is encapsulated at each layer by adding a header and, possibly, a trailer.
The destination de-encapsulates the data as it goes back up the portocol stack.

| PDU     | Layers                                       |
| ------- | -------------------------------------------- |
| Data    | Application, presentation, and session layer |
| Segment | Transport layer                              |
| Packet  | Network layer                                |
| Frame   | Data link layer                              |
| Bits    | Physical layer                               |

---

## Questions

1.  The OSI Reference Model provides for all of the following except which one?

A. Defines the process for connecting two layers together, promoting interoperability between vendors
B. Allows vendors to compartmentalize their design efforts to fit a modular design, which eases implementations and simplifies troubleshooting
C. Separates a complex function into simpler components
**D. Defines eight layers common to all networking protocols**
E. Provides a teaching tool to help network administrators understand the communication process used between networking components

2.  Put the following OSI Reference Model layers in the correct order, from high to low: (a) session, (b) presentation, (c) physical, (d) data link, (e) network, (f) application, (g) transport.

application, presentation, session, transport, network, data link, physical (f, b, a, g, e, d, c)

A. c, d, e, g, a, b, f
B. f, a, b, g, d, e, c
C. f, b, g, a, e, d, c
**D. f, b, a, g, e, d, c**

3.  The `__________` layer of the OSI model provides physical addressing.

A. Transport
B. Network
**C. Data link**
D. Physical

4.  Sue has noticed that the first half of the MAC address (24 bits) is the same for all the network cards on your computers. What does the first 24 bits of a MAC address represent?

organizationally unique identifier (OUI)

A. AUI
B. NIA
C. RTP
**D. OUI**

5.  The network layer handles all of the following problems except `__________`.

A. Broadcast problems
B. Conversion between media types
**C. Hierarchy through the use of physical addresses**
D. Splitting collision domains into smaller ones

6.  `__________` are used to provide a reliable connection.

A. Ready/not ready signals
**B. Sequence numbers and acknowledgments**
C. Windows
D. Ready/not ready signals and windowing

7.  Connection multiplexing is done through the use of a `__________` number.

**A. Socket** (or port number)
B. Hardware
C. Network
D. Session

---

1.  Match the device with the layer of the OSI Reference Model that the device functions at.

![[Pasted image 20251124154424.png]]

Layer 1: Repeater, Hub
Layer 2: Switch
Layer 3: Router

2.  Match the PDU name with the OSI Reference Model layer at which it is used.

![[Pasted image 20251124154436.png]]

| PDU     | Layers                                       |
| ------- | -------------------------------------------- |
| Data    | Application, presentation, and session layer |
| Segment | Transport layer                              |
| Packet  | Network layer                                |
| Frame   | Data link layer                              |
| Bits    | Physical layer                               |
Layer 1: Bits
Layer 2: Frame
Layer 3: packet
Layer 4: Segment
