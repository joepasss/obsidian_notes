
## Configuring TCP/IP

### IP Address

The IP Address is 32-bit value that uniquely identifies the system on the network (or the Internet). The IP address is divided into four numbers, with each number separated by a period (for example, 192.168.1.15). Each of the four numbers is made up of 8 bits, and there are four numbers of 8 bits each.

Each of the 8-bit values is called an *octet*. There are four octects in an IP address. The four octets in an IP address are divided into two parts: a network ID and a host ID.
The network ID portion of the IP address is a unique number that identifies the particular network, and the host ID portion is a unique number that identifies the computer or device on that network.
The subnet mask determines the number of bits that make up the network ID and the number of bits that make up the host ID.

### Subnet Mask

The subnet mask is used by TCP/IP to determine whether a host is on a local or remote network.
When 255 is used an octet, then the corresponding octet in the IP address represents the network ID.

### Ex 4-1: Identifying Remote Systems

| ComputerA IP | Computer A Subnet | Computer B     | Same Network? | network id  |
| ------------ | ----------------- | -------------- | ------------- | ----------- |
| 12.45.8.34   | 255.0.0.0         | 14.34.212.5    | no            | 12.0.0.0    |
| 131.107.4.78 | 255.255.0.0       | 131.108.45.112 | no            | 131.107.0.0 |
| 198.45.23.2  | 255.255.255.0     | 198.45.23.14   | yes           | 198.45.23.0 |
| 26.45.78.5   | 255.0.0.0         | 28.45.78.15    | no            | 26.0.0.0    |
| 176.34.56.12 | 255.255.0.0       | 176.34.12.10   | yes           | 176.34.0.0  |

### Default Gateway

When your system wants to send data to another system on the network, it looks at its own network ID and compares that to the destination system's network ID. If it appears that both have the same network ID, the data is sent directly from your system to the destination system. If the two systems are on different networks, your system must pass the dat to the router so that the router can send the data to the destination system's router.

The default gateway is the IP address of the router that will be used to send data from your network to another network.

---

## TCP/IP Addressing

### Understanding Binary

| Bit   | 8   | 7   | 6   | 5   | 4   | 3   | 2   | 1   |
| ----- | --- | --- | --- | --- | --- | --- | --- | --- |
| Value | 128 | 64  | 32  | 16  | 8   | 4   | 2   | 1   |

### Ex 4-2: Converting Decimal to Binary

| Dec           | Binary                              |
| ------------- | ----------------------------------- |
| 127           | 01111111                            |
| 131           | 10000011                            |
| 198           | 11001010                            |
| 224           | 11100000                            |
| 96            | 01100000                            |
| 192.168.1.100 | 11000000.10101000.00000001.01100110 |
| 216.83.11.78  | 11011000.01010011.00001011.01001110 |
| 202.14.45.0   | 11001010.00001110.00101111.00000000 |

### Ex 4-3: Converting Binary to Decimal

| binary                              | dec            |
| ----------------------------------- | -------------- |
| 10110101                            | 181            |
| 11000011                            | 195            |
| 10000111                            | 133            |
| 11111111                            | 255            |
| 10101011                            | 171            |
| 11000001.10000001.00001011.10100001 | 193.129.11.161 |
| 00000111.10101001.00110101.10110101 | 7.177.53.181   |
| 11000000.10100001.00000111.11111111 | 192.161.7.255  |

### Address Classes

Every IP address belongs to a distinct *address class*.


|         | First Octet Value | Subnet Mask   | # of Hosts per Network |
| ------- | ----------------- | ------------- | ---------------------- |
| Class A | 1-127             | 255.0.0.0     | 16,777,214             |
| Class B | 128-191           | 255.255.0.0   | 65,534                 |
| Class C | 192-223           | 255.255.255.0 | 254                    |

#### Class A Addresses

A class A address has a default subnet mask of 255.0.0.0, which means that the first octet is the network ID and the last three octets represent the host ID portion of the address.

Each octet can contain 256 possible values (0-255), so a class A address supports 16,777,216 hosts on the network. Actually, there are only 16,777.214 valid addresses to use on system, because there are two addresses on each IP network you are not allowed to assign to systems because they are reserved.
These are the addresses with all host bits set to 0s (the network ID) and all host bits set to 1s (the broadcast address).

#### Class B Addresses

Class B addresses have a default subnet mask of 255.255.0.0, which means the first two octets are the network ID and the last two octects are the host ID portion of the address.

#### Class C Addresses

Class C addresses have a subnet mask of 255.255.255.0, which means that the first three octets are the network ID and the last octet is the host ID.

#### Class D Addresses

Class D addresses are used for special types of applications on the network (multicasting applications).

Multicasting applications send data to a number of systems at the same time by sending data to the multicast address, and any system that has registered with that address will receive the data.
Because class D addresses are used for multicast addresses, you will not be assigning them specifically to hosts on the network for normal network communication.

Class D addresses have a value on the first octet that range from 224 to 239.

#### Class E Addresses

They were designed for experimental purposes only, so you will never see a class E address on a network.

Class E addresses have a first octet with a value between 240 and 247.

### Ex 4-4: Identifying Address Classes

| Class | First octet (bin)   | First octet (dec) | Subnet        |
| ----- | ------------------- | ----------------- | ------------- |
| A     | 00000001 - 01111111 | 1 - 127           | 255.0.0.0     |
| B     | 10000000 - 10111111 | 128 - 191         | 255.255.0.0   |
| C     | 11000000 - 11011111 | 192 - 223         | 255.255.255.0 |
| D     | 11100000 - 11101111 | 224 - 239         |               |
| E     | 11110000 - 11110111 | 240 - 247         |               |

| IP Addr         | Subnet Mask   | Address Class |
| --------------- | ------------- | ------------- |
| 27.56.89.234    | 255.0.0.0     | A             |
| 196.79.123.56   | 255.255.255.0 | C             |
| 130.49.34.23    | 255.255.0.0   | B             |
| 109.189.109.200 | 255.0.0.0     | A             |
| 189.90.23.100   | 255.255.0.0   | B             |
| 126.34.100.12   | 255.0.0.0     | A             |
| 14.198.120.100  | 255.0.0.0     | A             |

### Loopback Address

Class A address range of 127 has been reserved for the loopback address.

The loopback address is used to refer to the local system, also known as the *localhost*. If you want to verify that the TCP/IP software has initialized on the local system even though you may not have an IP address, you can ping the loopback address, which is typically referred to as 127.0.0.1

### Private Address

A private address can be assigned to a system but cannot be used for any kind of Internet connectivity.
Private addresses are *nonroutable* on the Internet, so any system using them will not be able to route data across the Internet.

* 10.0.0.0 - 10.255.255.255
* 172.16.0.0 - 172.31.255.255
* 192.168.0.0 - 192.168.255.255

Use a NAT device to translate the private address to a public address.

#### APIPA

Systems today support the *Automatic Private IP Addressing (APIPA)* feature.
When a client boots up and cannot contact a DHCP server, the client will configure itself automatically with a 169.254.x.y address.
If there is something wrong with the DHCP server and none of the systems on the network can obtain an address, all of the clients will assign themselves and address withing the 169.254 address range and will then be able to communicate with one another.

APIPA does not assign a default gateway, so you will be unable to access resources on a remote network and the Internet, but you can still communicate with systems on your network.

### Invalid IP Addresses for Hosts

* **Any address starting with 127**
	* An IP address taht starts with 127 is reserved for the loopback address
* **All host bits set to 0**
	* Network ID
* **All host bits set to 1**
	* Broadcast address
* **Duplicate address**

### Ex 4-4: Understanding Valid Addresses

| Address        | Valid? | exp                       |
| -------------- | ------ | ------------------------- |
| 10.0.40.10     | no     | private address           |
| 127.54.67.89   | no     | loopback address          |
| 131.107.34.0   | yes    | Class B address           |
| 45.12.0.0      | yes    | Class A address           |
| 216.83.11.255  | no     | Class C broadcast address |
| 63.256.4.78    | no     | 0-255                     |
| 200.67.34.0    | no     | Class C network id        |
| 131.107.23.255 | yes    | Class C address           |

### Addressing Schemes

* **Unicast**
	* Sends information to one system.
	* With IP, this is accomplished by sending data to the IP address of the intended destination system.
* **Broadcast**
	* Sends information to all systems on the netwrok.
	* Data that is destined for all systems is sent by using the broadcast address for the network.
* **Multicast**
	* Sends information to a selected group of systems.
	* Typically this is accomplished by having the system subscribe to a multicast address.

### TCP/IP Ports

An application or process uses a TCP/IP port as an identifier for that application/process running on a system.

Server applications typcally use low port numbers under 1024, whereas client applications usually run on port numbers greater than 1024.

* **Well-known ports**
	* Used by servers and range from 0 to 1023.
* **Registered ports**
	* These ports are assigned to certain applications or protocols.
	* Range from 1024 to 49151
* **Dynamic ports**
	* Used by applications temporarily.
	* Range from 49152 to 65535.

**Well-known port numbers**

| Port      | Process  | desc                                                                                  |
| --------- | -------- | ------------------------------------------------------------------------------------- |
| 20        | FTP-DATA | transfer data                                                                         |
| 21        | FTP      | FTP control message                                                                   |
| 22        | SSH      | Secure Shell                                                                          |
| 23        | Telent   |                                                                                       |
| 25        | SMTP     | Simple Mail Transfer Protocol, send e-mail                                            |
| 53        | DNS      | Domain Name System, used to query DNS servers for the IP address of a remote system   |
| 67 or 68  | DHCP     | Domain Host Configuraiton Protocol                                                    |
| 69        | TFTP     | Trival File Transport Protocol, UDP-based file transfer protocol (no authentication)  |
| 80        | HTTP     | Hypertext Transfer Protocol, deliver web pages                                        |
| 110       | POP3     | Post Office Protocol, reading e-mail                                                  |
| 119       | NNTP     | Network News Transfer Protocol, used to read news articales                           |
| 123       | NTP      | Network Time Protocol                                                                 |
| 137-139   | NetBIOS  | Used by Windows systems for NetBIOS sessions                                          |
| 143       | IMAP4    | Intenet Message Application protocol, reading e-mail                                  |
| 443       | HTTPS    | Secure HTTP                                                                           |
| 445       | SMB      | Server Message Block, Microsoft file-sharing protocol                                 |
| 1720      | H.323    | An older protocol used to deliver audio and video data over a computer network        |
| 2427/2727 | MGCP     | Media Gateway Control Protocol, VoIP Protocol                                         |
| 3389      | RDP      | Remote Desktop Protocol                                                               |
| 5004/5005 | RTP      | Real-time Transport Protocol, send voice dat a between phones with VoIP communication |
| 5060/5061 | SIP      | Session Initiation Protocol, used to set up a VoIP call                               |

Another term that you will hear is *socket*, which is the endpoint of system, the port number of the application, and the protocol that is being used, either TCP or UDP.

The socket is how data is sent from one system to another, or more accurately, from one application to another.

```
Socket = IP address + Port number + protocol (TCP or UDP)
```

---

## Configuring IP Address Settings

### Manual Configuration vs. DHCP

#### Manual Configuration

Going into the configuration of the network interfaces and manually inputting the IP address, subnet mask, and default gateway setting.

#### Dynamic Configuration

The process of dynamically assigning IP address is managed via a DHCP server.
The DHCP server can be a separated device, a service running on a server, or a service loaded on your Cisco router. The DHCP service is configured with a set of usable IP addresses, called a *scope*. The scope can also include the subnet mask, IP addresses of the default gateway, DNS servers, and other necessary addresses.

When a PC powers on and is configured to use a DHCP server, it uses the following steps to obtain an address:

1. DHCP Discover
	* The client sent out a DHCP Discover message, which is a broadcast request packet, looking for any DHCP services on the network.
2. DHCP Offer
	* The DHCP server responds with a DHCP Offer message containing an IP address that the client can lease
3. DHCP Request
	* The client then accepts the offer by sending DHCP Request message to the DHCP server for that address.
4. DHCP Acknowledgement
	* The DHCP server responds by sending DHCP ACK message to the client confirming the client is leasing the address.
	* The DHCP ACK message also contains additional TCP/IP settings such as the lease time.
	* The DHCP server marks the IP address in its database as being in use so that it is not assigned again.

### Configuring TCP/IP on Systems

`ifconfig eth0 12.0.0.11 netmask 255.0.0.0` in gentoo, configure `/etc/net`

### Verify IP Address Settings

`ifconfig`

---

## Understanding the Pathway of Communication

![[Pasted image 20251126074754.png]]

1. The command `ping 13.0.0.10` is entered at ComputerB to invoke communication
2. ComputerB compares its IP address ans subnet mask against the IP address that is being pinged to determine whether the system is on the same network.
3. ComputerB retrives the default gateway settings from the TCP/IP settings, as that is the address it needs to send the data to in order to send data to a different network.
4. ComputerB then ARPs the IP address of the default gateway to obtain the MAC address of the default gateway.
5. The ARP reply message is returned to ComputerB with the MAC address of the default gateway.
6. ComputerB sends the data to the router
7. The router receives the layer 2 frame and then reads the layer 3 header to determine where the packet is headed.
	* The router sees that the packet is destined for 13.0.0.10, so it checks to see if it has a route in the routing trable. It does, and it realized it just needs to send data out the 13.0.0.1 interface to reach the destination.
8. To send the data, the router needs to know the MAC address of 13.0.0.10, so it sends out ARP request message.
9. The router receives the ARP reply containing the MAC address of Computer D.
10. The router sends the data to ComputerD.

### Ex 4-6: Analyzing the Pathway to Communication

![[Pasted image 20251126075229.png]]

1.  Looking at the diagram, record the layer 2 and layer 3 header information that the packet will have at the point circled with a 1.

Layer 2 Source Address: aaaa.aaaa.aaaa.aaaa
Layer 2 Destination Address: eeee.1111.1111
Layer 3 Source Address: 12.0.0.5
Layer 3 Destination Address: 14.0.0.15

2.  Looking at the diagram, record the layer 2 and layer 3 header information that the packet will have at the point circled with a 2.

Layer 2 Source Address: eeee.2222.2222
Layer 2 Destination Address: eeee.3333.3333
Layer 3 Source Address: 12.0.0.5
Layer 3 Destination Address: 14.0.0.15

3.  Looking at the diagram, record the layer 2 and layer 3 header information that the packet will have at the point circled with a 3.

Layer 2 Source Address: eeee.4444.4444
Layer 2 Destination Address: dddd.dddd.dddd
Layer 3 Source Address: 12.0.0.5
Layer 3 Destination Address: 14.0.0.15

---

## Review

### TCP/IP Fundamentals

* TCP/IP addresses are 32-bit addresses.
* The IP address is a unique value assigned to the system that identifies the system on the network
* The subnet mask is used to determine the network ID portion of an Ip address.
* The network ID is used to determine whether or not the destination system exists on the same network.
* The host ID identifies the system within the network
* The default gateway refers to the IP address of the router and is used to send data from the local network

### TCP/IP Addressing

| Class | First octet (bin)   | First octet (dec) | Subnet        |
| ----- | ------------------- | ----------------- | ------------- |
| A     | 00000001 - 01111111 | 1 - 127           | 255.0.0.0     |
| B     | 10000000 - 10111111 | 128 - 191         | 255.255.0.0   |
| C     | 11000000 - 11011111 | 192 - 223         | 255.255.255.0 |
| D     | 11100000 - 11101111 | 224 - 239         |               |
| E     | 11110000 - 11110111 | 240 - 247         |               |

* Class D addresses are used for multicasting
* Class E addresses are used for experiment purposes

| Port      | Process  | desc                                                                                  |
| --------- | -------- | ------------------------------------------------------------------------------------- |
| 20        | FTP-DATA | transfer data                                                                         |
| 21        | FTP      | FTP control message                                                                   |
| 22        | SSH      | Secure Shell                                                                          |
| 23        | Telent   |                                                                                       |
| 25        | SMTP     | Simple Mail Transfer Protocol, send e-mail                                            |
| 53        | DNS      | Domain Name System, used to query DNS servers for the IP address of a remote system   |
| 67 or 68  | DHCP     | Domain Host Configuraiton Protocol                                                    |
| 69        | TFTP     | Trival File Transport Protocol, UDP-based file transfer protocol (no authentication)  |
| 80        | HTTP     | Hypertext Transfer Protocol, deliver web pages                                        |
| 110       | POP3     | Post Office Protocol, reading e-mail                                                  |
| 119       | NNTP     | Network News Transfer Protocol, used to read news articales                           |
| 123       | NTP      | Network Time Protocol                                                                 |
| 137-139   | NetBIOS  | Used by Windows systems for NetBIOS sessions                                          |
| 143       | IMAP4    | Intenet Message Application protocol, reading e-mail                                  |
| 443       | HTTPS    | Secure HTTP                                                                           |
| 445       | SMB      | Server Message Block, Microsoft file-sharing protocol                                 |
| 1720      | H.323    | An older protocol used to deliver audio and video data over a computer network        |
| 2427/2727 | MGCP     | Media Gateway Control Protocol, VoIP Protocol                                         |
| 3389      | RDP      | Remote Desktop Protocol                                                               |
| 5004/5005 | RTP      | Real-time Transport Protocol, send voice dat a between phones with VoIP communication |
| 5060/5061 | SIP      | Session Initiation Protocol, used to set up a VoIP call                               |

**Private IP**

* 10.0.0.0 - 10.255.255.255
* 172.16.0.0 - 172.31.255.255
* 192.168.0.0 - 192.168.255.255

**Invalid IP addresses**

* **Any address starting with 127**
	* An IP address taht starts with 127 is reserved for the loopback address
* **All host bits set to 0**
	* Network ID
* **All host bits set to 1**
	* Broadcast address
* **Duplicate address**

If DHCP server is unreachable (or broken) host automaically assigns APIPA address (169.254.x.x)

### Understanding the Pathway of Communication

* Remeber that the source and destination MAC addresses change with each step in the communication process.
* Remeber that the source and destination IP addresses stay the same for the entire process of the packet being deliverd to its destination

---

## Questions

1.  One of the users on your network calls you over to his desk because he does not have Internet access. You use the ipconfig command to verify his settings and notice that the IP address is 169.254.34.10. What is most likely the reason why the user does not have Internet access?

A. There is most likely a problem with DNS.
B. There is no subnet mask configured.
C. The router is down.
**D. There is most likely a problem with DHCP.**

2.  How many bits are in an IP address?

A. 8 bits
**B. 32 bits**
C. 48 bits
D. 96 bits

64bits on IPv6

3.  Which address class always begins with the first 3 bits of 110?

A. Class A
B. Class B
**C. Class C**
D. Class D

Class A: 00000001 - 01111111
Class B: 10000000 - 10111111
Class C: 11000000 - 11011111
Class D: 11100000 - 11101111
Class E: 11110000 - 11110111

4.  A computer with a subnet mask of 255.255.255.0 has how many octets for the network ID?

A. 1
B. 2
**C. 3**
D. 4

5.  A computer with the IP address of 134.67.89.12 and a subnet mask of 255.255.0.0 is on the same network with which of the following systems?

A. 134.76.89.11
**B. 134.67.112.23**
C. 13.4.67.34
D. 109.67.45.10

network id is 134.67.0.0

6.  Which network address class supports 65,534 hosts?

A. Class A
**B. Class B**: 256 x 256 - 2 (65,534)
C. Class C: 254
D. Class D

7.  What is the default subnet mask for a class C network?

A. 255.0.0.0
B. 225.225.0.0
**C. 255.255.255.0**
D. 225.255.255.255

8.  Which address is reserved for internal loopback functions?

A. 0.0.0.0
B. 1.0.0.1
C. 121.0.0.1
**D. 127.0.0.1**

9.  What is the well-known port number for the HTTP service?

A. 20
B. 21
**C. 80**
D. 25

10.  Which of the following addresses is/are a private IP address? (Select all that apply.)

**A. 10.0.0.34**
B. 191.167.34.5
**C. 172.16.7.99**
D. 12.108.56.7

Private IP

* 10.0.0.0 - 10.255.255.255
* 172.16.0.0 - 172.31.255.255
* 192.168.0.0 - 192.168.255.255

11.  Which port is used by SMTP?

A. 23: telnet
**B. 25**
C. 443: HTTPS
D. 110: POP3

12.  What is the default subnet mask for 171.103.2.30?

A. 255.0.0.0
**B. 255.255.0.0**
C. 255.255.255.0
D. 255.255.255.255

Class A: 1 - 127   (00000001 - 01111111)
Class B: 128 - 191 (10000000 - 10111111)
Class C: 192 - 223 (11000000 - 11011111)

13.  Which network service is responsible for assigning IP addresses to systems on the network when they boot up?

A. DNS
B. WINS
**C. DHCP**
D. Server

14.  Draw a line from the address on the left side of exhibit and connect it to the matching address type on the right side of the following exhibit.

![[Pasted image 20251126080158.png]]

127.0.0.1: Loopback Address
200.45.67.100: Class C Address
169.254.65.78: APIPA Address
172.28.34.10: Private Address
100.85.87.23: Class A Address

15.  Using the port numbers on the left, write the correct port numbers in the appropriate box displaying the associated protocol. On the real exam, you would drag and drop the port number into the appropriate box.

![[Pasted image 20251126080215.png]]

DNS: UDP 53
HTTP: TCP 80
FTP: TCP 21
SSH: TCP 22
Telnet: TCP 23
RDP: TCP 3389
