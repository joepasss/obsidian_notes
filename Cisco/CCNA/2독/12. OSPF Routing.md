

The **Open Shortest Path First (OSPF)** protocol is a link state protocol that handles routing for IP traffic.
OSPF version 2, which is described in RFC 2328, is an open standard, as are versions 1 and 2 of the Routing Information Protocol (RIP), which is also a routing protocol.

## OSPF Overview

OSPF was created in the mid-1980s to overcome many of the deficiencies and scalability problems of RIP in large enterprise networks.
Because it is based on an open standard, OSPF is very popular in many corporate networks today and has many advantages

* It will run on most router, since it is based on open standard.
* It uses the SPF algorithm, developed by Edsger Dijkstra, to provide a loop-free topology.
* It provides fast convergence with triggers, incremental updates via link state advertisements (LSAs).
* It is a classless protocol and allows for a hierarchial design with Variable Length Subnet Masking (VLSM) and route summarization, thus reducing routing overhead.
* It contains a two-layer hierarchy to contain problems within an area and to reduce routing overhead.
* It has an intelligent metric (cost), which is the inverse of the bandwidth of an interface.
* It enables you to control routing update information extensively through summarization and filtering.

Given its advantages, OSPF does have its share of disadvantages:

* It requires more memory to hold the adjacency (list of OSPF neighbors), topology (a link state database containing all of the routers and their routes/links), and routing tables.
* It requires extra CPU processing to run the SPF algorithm, which is especially true when you first turn on your routers and they are initially building the adjacency and topology tables.
* For large networks, it requres careful design to break up the network into an appropriate hierarchial design by separating routers into different areas.
* It is more complex to configure and more difficult to troubleshoot than distance vector protocols.

Typically, OSPF is used in large enterprise networs that have either a mixed-routing-vendor environent or a policy that requires an open standard for a routing protocol, which gives a company flexibility when it needs to replace of its existing routers.

> Typically, when you have more than 50 routers, Cisco recommends that your use a more advanced routing protocol such as Open Shortest Path First (OSPF) or Enhanced Interior Gateway Routing Protocol (EIGRP).
> In a mixed-vendor environment, there is basically one choice between these two: OSPF.

### Hierarchical Design: Areas

To provide scalability for very large networks, OSPF supports two important concepts: autonomous systems and areas.

Within an AS, *areas* used to provide hierarchial routing. An area is a group of contiguous networks.
Basically, areas are used to control when and how much routing information is shared across your network.
In flat network designs, such as those that use IP RIP, if a change occurs on one router (perhaps a flapping route problem), it affects *every* router in the entire network.
With a correctly designed hierarchial network, these changes can be contained within a single area.

OSPF implements a two-layer hierarchy: the backbone and areas off the backbone.

**OSPF hierarchial design**
![[Pasted image 20251022073050.png]]

The network includes a backbone and three areas connected to the backbone.
Each area is given a unique number that is 32bit length. The area number can be represented by a single decimal number, such as 1, or a dotted-decimal format, such as 0.0.0.1.
Area 0 is special area and represents the top-level hierarchy of the OSPF network, commonly called the *backbone*.

Through a correct IP addressing design, you should be able to summarize routing information between areas. By summarizing your routing information, perhaps one summarized route for each area, you are reducing the amount of information that routers need to know about.

For instance, each area in **OSPF hierarchial design** is assigned a spearate Class B network number.
Through summarization on the border routers between areas, other areas would not need to see all the Class B subnets, only the summarized network numbers for each respective area (the Class B network numbers themselves).

Area 2, for instance, doesn't need to see all of the subnets of Area 1's 172.18.0.0 network number, since only two paths exist out of Area 2 to the backbone.
Area 2, however, needs to see all of its internal subnets to create optimized routing tables to reach its own internal networks within Area 2.

Therefore, in a correctly designed OSPF network, each area should contain specific routes only for its own areas and summarized routes to reach other areas.
By performing this summarization, the routers have a smaller topology database (they know only about links in their own area and the summarized routes) and their routing tables are smaller (they know only about their own area's routes and the summarized routes).
Through a correct hierarchial design, you can scale OSPF to very large sizes.

### Metric Structure

Unlike RIP, which uses hop count as metric, OSPF uses cost.
Cost is actually the inverse of the bandwidth of a link: the faster the speed of the connection, the lower the cost.

The most preferred path is the one with the lowest accumulated cost value. By using cost as a metric, OSPF will choose more intelligent paths than RIP.

Remeber that on synchronous serial links, no matter what the clock rate of the physical link is, the bandwidth always defaults to 1544 Kbps.
You'll want to code this correctly with the `bandwidth` interface subconfiguration mode command. This is important if you have multiple synchronus serial paths to a destination, especially if they have different clock rates.
OSPF supports load balancing of up to 16 equal-cost paths to a single destination; however, only 4 equal-cost paths are used by default.
Remember that if you don't configure the bandwidth metric correctly on your serial interfaces, your router may accidentally include paths with different clock rates, which can cause load-balancing issues.

For example, if you have one serial connection clocked at 1544 Kbps and another clocked at 256 Kbps and you don't change the bandwidth values, OSPF will see *both* connections as 1544 Kbps and attempt to use 1544 Kbps when reaching a single destination across these links.
This is because the default bandwidth on a serial link is 1544, no matter what the clock speed of the interfaces is.
This can create throughput problems when the router is perfoming load balancing
Therefore, remeber that you should change bandwidth of the interface with the `bandwidth` command.

---

## OSPF Operation

### Router Identities

Each router in an OSPF network needs a unique ID, this must be unique not just within an area, but within the entire OSPF network.
The ID used to provide a unique identity to the OSPF router. The ID is included in any OSPF messages the router generates that other OSPF routers will process.

The router ID is chosen according to one of the following criteria:

* The highest IP address on the router's active loopback interfaces is used.
* If no loopback interface exists with an IP address, the highest IP address on its active interfaces is used when the router boots up.

The router ID is used by the router to announce itself to the other OSPF routers in the network.
This ID must be unique. If no loopback interfaces are configured, the rotuer will use the highest IP address from one of its active physical interfaces.
Optionally, you can manually define the router ID, always ensureing how it will be defined no matter what interfaces exist on the router.
If no active interface exists, the OSPF process will not start, and therefor you will not have any OSPF routes in your routing table.
It is highly receommeded, therefore, that you use a loopback interface, because it is always up and thus the router can obtain a router ID and start OSPF.

### Finding Neighbors

Whereas RIP accepts routing updates from just about any other RIP router (unless RIPv2 with authentication is configured), OSPF has some rules concerning if and how routing information should be shared.
First, before a router will accept any routing information from another OSPF router, the routers must build an *adjacency* between them, on their connected interfaces. When this adjacency is built, the two routers (con the connected interfaces) are called *neighbors*, indicating a special relationship between the two.

An OSPF router learns about its OSPF neighbors and builds its adjacency and topology tables by sharing link state advertisements (LSAs), which exist in different types. When learing about the neighbors to which a router is connected, as well as keeping tabs on known neighbors, OSPF routers will generate LSA hello messages every 10 seconds.
When a neighbor is discovered and an adjacency is formed with the neighbor, a router expectes to see hello messages from the neighbor.
If a neighbor's hello is not seen within the dead interval time, which defaults to 40 seconds, the neighbor is declared dead. When this occurs, the router will advertise this information, via an LSA message, to other neighboring OSPF routers.

In order for two routers to become neighbors, the following items must match on each router:

* The area number
* The hello and dead interval timers on their connected interfaces
* The OSPF password (optional), if it is configured
* The area stub flag, indicating the type of area (a stub is used to contain OSPF messages and routing information)
* Maximum transmission unit (MTU) sizes on the connected interfaces

If these items do not match, the routers will not form an adjacency and will ignore each other's routing information.

> Hello process is used to discover and maintain a neighbor relationship with other OSPF routers.
> In order to form a neighbor relationship, two OSPF routers on the same segment must be in the same area, must have matching hello and dead interval timers, must have the same password, must be of the same type (stub), and must have the same MTU size configured on their interfaces.


Let's assume that you turned on all your routers simultaneously on a segment.
In this case, the OSPF routers will go through three stages, called the *exchange process*, in determining whether they will become neighbors:

1. **Down State**
	* The routers have not exchanged any OSPF information with any other router.
2. **Init State**
	* A destination router receives a new router's hello and adds it to its neighbor list.
	* Note that communication is only unidirectional at this point.
3. **Two-way State**
	* The new router receives a unidirectional reply (from the destination router) to its initial hello packet and adds the destination router to its neighbor database.

Once the routers have entered a *two-way state*, they are considered neighbors. At this point, an election process takes place to elect the designated router (DR) and the backup designated router (BDR) on the segment.

### Designated and Backup Designated Routers

An OSPF router will not form adjacencies to just any router. Instead, a client/server design is implemented in OSPF on *each* broadcast segment.

For each multi-access broadcast segment, such as Etherent, there is a DR and BDR as well as other OSPF routers, called DROTHERs. As an example, if you have ten VLANs in your switched area, you'll have ten DRs and the BDRs.
The one exception of a segment not having these two routers is on a WAN point-to-point link.

When an OSPF router comes up, it forms adjacencies with the DR and the BDR on each multi-access segment to which it is connected; if it is connected to three segments, it will form three sets of adjacencies.
Any exchange of routing information is between these DR/BDR rotuers and the other OSPF neighbors on a segment (and vice versa).
An OSPF router talks to a DR using the IP multicast address 224.0.0.6. The DR and BDR talk to all OSPF routers using the 224.0.0.5 multicast IP address.

> OSPF routers use link state advertisements (LSAs) to communicate with each other.
> One type of LSA is a hello, which is used to form neighbor relationships and as a keep-alive function. Hellos are generated every 10 seconds.
> When sharing link information (directly connected routes), links are sent to the DR (224.0.0.6) and the DR disseminates link information to everyone else (224.0.0.5) on the segment.
> On point-to-point links, since no DR/BDR is used, all OSPF packets are addressed to 224.0.0.5.

The OSPF router with the highest priority becomes the DR for the segment. If there is a tie, the router with highest *rotuer ID* will become the DR.
By default, all routers have a priority of 1. If the DR fails, the BDR is promoted to DR and another router is elected as the BDR.

**election process**
![[Pasted image 20251022153634.png]]

Router E is elected as the DR and router B is elected as the BDR. Note that in this example, each router has the default priority, 1; therefore, router E is chosen as the DR since it has the highest router ID, and router B is chosen as the BDR because it has the second-highest router ID.
If the router has a priority of 0, it will never become the DR or BDR.

The DR and BDR priority is changed on an interface-by-interface basis and is configured with the `ip ospf priority` command within the interface subconfiguration mode.

Once the DR and BDR are electted, they maintain these roles even if other routers from adjacencies with them that have higher priorities: an election or re-election will occur only if no DR or BDR exists.

### Sharing Routing Information

After electing the DR/BDR pair, the routers continue to generate hellos to maintain communication. This is considered an *exstart* state, in which the OSPF routers are ready to share link state information.

The process the routers go through is called an *exchange protocol*, and is outlined here:

1. **Exstart state**
	* The DR and BDR from adjacencies with other OSPF routers on the segment. Then, within each adjacency, the router with the highest router ID beocme the master and starts the exchange process first (shares its link state information).
	* Note that the DR is not necessarily the master for the exchange process. The remaining router in the adjacency will be the slave.
2. **Exchange state**
	* The master starts sharing link state information first with the slave. These are called *database description packets (DBDs, sometimes DDPs)*.
	* The DBD contain the link state type, the ID of the advertiseing router, the cost of the advertised link, and the sequence number of the link.
	* The slave responds back with an LSACK, an acknowlegement to the DBD from the master. The slave then compares the DBD's information with its own.
3. **Loading state**
	* If the master has more up-to-date information than the slave, the slave will repond to the master's original DBD with a link state request (LSR).
	* The master will send a link state update (LSU) with the detailed information of the links to the slave.
	* The slave will then incorporate this into its local link state databse.
	* Again, the slave will generate an LSACK to the master to acknowledge the fact that it received the LSU.
	* If a slave has more up-to-date information, it will repeat the exchange and loading states.
4. **Full state**
	* Once the master and the slave are synchornized, they are considered to be in a full state.

To summarize these four steps, OSPF routers share a type of LSA message in order to disclose information about available routers; basically, an LSA update message contains a link and a state, as well as other information.

A *link* is the router interface on which the update was generated (a connected route).
The *state* is a description of this interface, including the IP address configured on it and the realationship this router has with its neighboring router.

However, OSPF routers will not share this information with just any OSPF router, it is shared between the OSPF routers and the DR/BDR on a segment.

> OSPF routers share information about their connected routes with the DR/BDR, which includes the link state type, the ID of the advertising router, the cost of the advertised link, and the sequence number of the link.

OSPF uses incremental updates after entering a full state. This means that whenever a change thakes place, only the change is shared with the DR, which will then share this information with other routers on the segment.

**LSA update process**
![[Pasted image 20251023191113.png]]

In this example, Network Z, connected to router C, goes down. Rotuer C sends a multicast to the DR and the BDR (with a destination multicast address of 224.0.0.6), telling them about this change.
Once the DR and BDR incorporate the change internally, then DR then tells the other routers on the segment (via a multicast message sent to 224.0.0.5, which is all OSPF routers) about the change concerning Network Z.
Any router receiving the update will then share this update to the DRs of other segments to which they are connected.

Note that the communications between OSPF routers is connection-oritented, even through multicasts are used. For example, if a router tells a DR about a change, the DR acknowledges this new piece of information with the source of the communication.
Likewise, when the DR shares this information with the other routers on the segment, the DR expects acknowledgements from each of these neighbors.
Remeber that when an OSPF router exchangeds updates with another, the process requires an acknowledgement: this ensures that a router or routers have received the update.

The exception to the incremental update process is that the DR floods its database every 30 minutes to ensure all of the routers on the segment have the most up-to-date link state information.
It does this with a destination address of 244.0.0.5 (all OSPF routers on the segment).

Each LSA message has a type associated with it.

* **LSA Type 1 (Router LSA)**
	* These are generated by every router for each link that belongs to an area.
	* They are flooded only inside of the area to which they belong.
	* The Link ID of this LSA is the Router ID of the router that generated it.
* **LSA Type 2 (Network LSA)**
	* These are generated by the DR and describe the routers that are connected to that segment.
	* They are set inside the area for which the network segment belongs.
	* The Link ID is the interface IP address of the designated router, which describes that particular segment.
* **LSA Type 5 (External LSA)**
	* Autonomous system external LSAs are generated by autonomous system boundary routers (ASBRs) and contain routers to networks that are external to the current AS.
	* The Link ID is a network number advertised in the LSA.

In summary, the first two LSA types represents links within the local area and the last LSA type represents links from a different autonomous system.

These LSA types are placed in a local database on the routing device.
When building the routing table using link state information, an OSPF router can keep up to 16 paths to single destination in its routing table.
The only restriction is that the paths must have the same accumulated cast metric.


---

## OSPF Configuration

Configuring OSPF is slightly different from configuring routing protocols such as RIP.

```
Router(config)# router ospf PROCESS_ID
Router(config-router)# network IP_ADDR WILDCARD_MASK
							area AREA_#
```

The `PROCESS_ID` is locally significant and is used to differentiate between OSPF processes running on the same router. It can be any number from 1 to 65,535.

Your router might be a boundary router between two OSPF autonomous systems, and to differentiate them on your router, you'll give them unique process IDs.

Note that these ID numbers do *not* need to match between different routers and they have nothing to do with autonomous system numbers.
You would need to use different process numbers if your routing device was connected to two different OSPF networks: you would need a different, localy unique process number for each OSPF network.
Each OSPF process will have its own OSPF database identified by the process ID.

When configuring OSPF, you specify what interfaces go into an OSPF area by using the `network` comand. Different process ID numbers are used to identify different OSPF networks a routing device is connected to.
Therefore, for example, then `network 0.0.0.0 255.255.255.255 area 0` command will include all interfaces in area 0.
Each OSPF process will have its own OSPF database identified by the process ID.

As you can see in the command for configuring OSPF, the syntax of this command is different from that of RIP's configuration, where you specify only a class address. OSPF is classless.
With this configuration command, you can be very specific about what interface belongs to a particular area.

The syntax of this command lists an IP address or network number, followed by *wildcard mask*, which is different from a subnet mask.
A wildcard mask tells the router the interesting component of the address, in other words, what part of the address it should match on.
This mask is also used with access lists.

A wildcard mask is 32 bits in length. A 0 in a bit position means there must be a match, and a 1 in a bit position means the router dosen't care.
Actually, a wildcard mask is an *inverted* subnet mask, with the 1s and 0s switched.
Using a wildcard mask, you can be very specific about which interfaces being to which areas.
The last part of the configuration command tells the router to which area these addresses on the router belong.

**OSPF network configuration example**
![[Pasted image 20251023194202.png]]

```
Router(config)# router ospf 1
Router(config-router)# network 10.1.1.1 0.0.0.0 area 0
Router(config-router)# network 10.1.2.1 0.0.0.0 area 0
Router(config-router)# network 172.16.1.1 0.0.0.0 area 0
Router(config-router)# network 172.16.2.1 0.0.0.0 area 0
```

In this example, the interfaces with address of 10.1.1.1, 10.1.2.1, 172.16.1.1, and 172.16.2.1 all are associated with area 0.
A wildcard mask of 0.0.0.0 says that there must be an exact match against the address on the router's interface in order to place it in area 0.

```
Router(config)# route ospf 1
Router(config-router)# network 10.0.0.0 0.255.255.255 area 0
Router(config-router)# network 172.16.0.0 0.0.255.255 area 0
```

In this example, interface begining with an address of 10 or 172.16 are to be included in area 0.

Or, if all interfaces on your router belonged to the same area, you could use this:

```
Router(config)# router ospf 1
Router(config-rotuer)# network 0.0.0.0 255.255.255.255 area 0
```

In this example, all interfaces are placed in area 0.

### Loopback Interfaces

A *loopback interface* is logical, virtual interface on a router. By default, the router doesn't have any loopback interfaces, but they can be easily created.
All IOS platforms support loopback interfaces, and you can create as many of these interfaces on a router: you can assign addressing information to them, include their network numbers in routing updates, and even terminate IP connections on them, such as telent and SSH.

**Some reasons you may want to create a loopback interface**

* To assign a router ID to an OSPF router
* To use for testing purposes, since the interface is always up
* To terminate special connections, such as GRE tunnels or IPsec connections, since this interface is always up

> The router ID for OSPF is chosen when the OSPF routing process is started. This occurs when you execute the `router ospf` comand manually or when the router's configuration is loaded when booting up.
> Therefore, if you create a loopback interface *after* enabling OSPF, the loopback won't be used as the router ID; however, if you reboot the router, the loopback interface will be used, by default.
> Therefore, it is recommended that you create your loopback interface and assign an IP address to it first and then enable OSPF to eliminate any confucion about what your router's router ID is.

To create a loopback interface:

```
Router(config)# interface loopback PORT_#
Router(config-if)# ip address IP_ADDR SUBNET_MASK
```

You can specify port numbers from 0 to 2147483647. The number you use is only locally significant.
ONce you enter the loopback interface, you can execute almost any interface comand on it; for instance, you can assign it an IP address with the `ip address` command.

### Default Route Propagation

On your perimeter OSPF router connected to the IPS, you typically have a default router pointing to the ISP.
To take this route and redistribute it into your OSPF process, basically making your perimeter router an ASRB, use the following configuration:

```
Router(config)# ip route 0.0.0.0 0.0.0.0
					ISP_INTERFACE_OR_IP_ADDR
Router(config)# router ospf PROCESS_ID
Router(config-router)# deafult-information originate
```

> Make sure your default route doesn't point to your internal network, but your ISP's network; otherwise, you'll be creating a routing loop.

### OSPF Metric Values

You can affect the cost metric that OSPF uses in picking the best-cost routes for the routing table in two ways.
First, remember the cost metric is the inverse of the accumulated bandwidth values of routers' interfaces.
The default measurement that Cisco uses in calculating the cost metric is: cost = 10^8 / (interface bandwidth); 10^8 represents 100 Mbps.
You can also affect the value of the cost by changing the 10^8 value with the `auto cost reference-bandwidth` command.

**Default OSPF Costs**

| Cost | Interface Type           |
| ---- | ------------------------ |
| 1785 | 56-Kbps serial line      |
| 1652 | 64-Kbps serial line      |
| 64   | T1                       |
| 10   | Ethernet (10 Mbps)       |
| 1    | Fast Ethernet (100 Mbps) |
| 1    | Gigabit Etherent (1Gbps) |
| 1    | 10 Gigabit Ethernet      |
| 1    | 100 Gigabit Ethernet     |

To change the cost of an interface manually:

```
Router(config)# interface TYPE [SLOT_#/]PORT_#
Router(config-if)# ip ospf cost COST_VALUE
```

Notice that the cost is assigned within an interface. This value can range from 1 to 65,535.

> The costs for a link match for every router on a given segment.
> Mismatched cost values on a segment can cause routers to run the SPF algorithm continually, greatly affecting the routers' performance.

Noramlly, you won't be changing the default cost values on an interface.
However, since OSPF uses the inverse of bandwidth as a metric, and serial interfaces default to a bandwidth of 1544 Kbps, you will definitely want to match the bandwidth metric on the serial interface to its real clock rate.
To configure the bandwidth on your router's interfaces, use the following command:

```
Router(config)# interface TYPE [SLOT_#/]PORT_#
Router(config-if)# bandwidth SPEED_IN_KBPS
```

As an example, if the clock rate were 64000, you would use the `bandwidth 64` command to configure the bandwidth correctly.

By default, the router will place up to 8 equal-cost OSPF paths to a destination in the router's routing table. This can be increased up to 16 equal-cost paths with the following configuration:

```
Router(config)# router ospf PROCESS_ID
Router(config-router)# maximum-paths #_OF_MAX_PATHS
```

### OSPF Authentication

OSPF supports authentication of neighbors and routing updates. This is used to prevent rogue OSPF routers from injecting bad or misleading routing information into your topological databases.
Authentication can be done with a clear-text password or a digital signature created with the MD5 algorithm. Of the two, the latter is more secure: clear-text passwords can be seen by eavesdropper between two OSPF neighbors.
When using MD5, to prevent against a replay attack where the same information is always sent to a neighbor, such as a hello message, a non-decresing sequence number is included in the message to ensure that the message and the signature are unique.
The authentication information is placed in every LSA and validated before being accepted by an OSPF router.
To become neighbors, the keying information (clear-text password or key for the MD5 algorithm) must match on the two peers.

> If the password/key values on two OSPF neighbors don't match, an adjacency will not occur.
> Of the two methods, using MD5 is definitely much more secure than a clear-text password.

Configuring authentication is a two-step process: specifying the password/key to use, and enabling authentication.
The configuration of the key is done on an interface-by-interface basis, which means that every neighboring OSPF router off of the same interface must use the password/key.

```
Router(config)# interface TYPE [SLOT_#/]PORT_#
Router(config-if)# ip ospf authentication-key PASSWORD
```

Starting in Cisco IOS 12.4, any password greater than eight characters is truncated to eight characters by the router.
The password is stored in clear test in the router's configuration. To encrypt it, use the `service password-encryption` command.

Next, you must specify whether the password is sent in clear text or used by MD5 to create a digital signature. This can be done on the interface or on an area-by-area basis.

To specify the interface method:
```
Router(config)# interface TYPE [SLOT_#/]PORT_#
Router(config-if)# ip ospf authentication [message-digest]
```

If you omit the `message-digest` parameter, the key is sent as a clear-text password.

Your other option is to configure the use of the password/key for an area with which the router is associated:

```
Router(config)# rotuer ospf PROCESS_ID
Router(config-router)# area AREA_# authentication [message-digest]
```

Again, if you omit the `message-digest` parameter, the key is sent as a clear-text password.

Of the two approaches, the latter is the older method: the interface method was added in IOS 12.0 and is the preferred approach.

---

## OSPF Troubleshooting

Once you have configured OSPF, the following comands are available to view and troubleshoot your OSPF configuration and operation:

* show ip protocols
* show ip route
* show ip ospf
* show ip ospf database
* show ip ospf interface
* show ip ospf neighbor
* debug ip ospf adj
* debug ip ospf events
* debug ip ospf packet

### The `show ip protocols` Command

```
VAN-R1#show ip protocols

Routing Protocol is "ospf 1"
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Router ID 13.0.0.1
  Number of areas in this router is 1. 1 normal 0 stub 0 nssa
  Maximum path: 4
  Routing for Networks:
    0.0.0.0 255.255.255.255 area 0
  Routing Information Sources:
    Gateway         Distance      Last Update
    14.0.0.1             110      00:00:21
  Distance: (default is 110)
```

The `show ip protocols` command displays all of the IP routing protocols that you have configured and that are running on your router.

In this example, the router's ID is 13.0.0.1. All interfaces are participating in OSPF (0.0.0.0 255.255.255.255) and are in area 0.
There are one OSPF routers in this network: 14.0.0.1.
Notice that default administrative distance is 110.

> Remeber that the default administrative distance for a connected route is 0; a static rotue is 1; RIP routes have an administrative distance of 120; EIGRP routes have an administrative distance of 90; and OSPF routes have an administrative distance of 110.

### The `show ip route` Command

You router keeps a list of the best IP paths to destinations in a routing table.
To view the routing table, use the `show ip route` command:

```
VAN-R1#show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is not set

      12.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        12.0.0.0/8 is directly connected, FastEthernet0/0
L        12.0.0.1/32 is directly connected, FastEthernet0/0
      13.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        13.0.0.0/8 is directly connected, Serial1/0
L        13.0.0.1/32 is directly connected, Serial1/0
O     14.0.0.0/8 [110/65] via 13.0.0.2, 00:03:23, Serial1/0
```

In this example, there is one OSPF route (O): 14.0.0.0. This route has an administrative distance of 110, a metric ocst of 65, and can be reached via neighbor 13.0.0.2.

### The `show ip ospf` Command

To view an overview of your router's OSPF configuration, use the `show ip ospf` command:

```
VAN-R1#show ip ospf
 Routing Process "ospf 1" with ID 13.0.0.1
 Start time: 00:01:22.888, Time elapsed: 00:05:57.380
 Supports only single TOS(TOS0) routes
 Supports opaque LSA
 Supports Link-local Signaling (LLS)
 Supports area transit capability
 Supports NSSA (compatible with RFC 3101)
 Event-log enabled, Maximum number of events: 1000, Mode: cyclic
 Router is not originating router-LSAs with maximum metric
 Initial SPF schedule delay 5000 msecs
 Minimum hold time between two consecutive SPFs 10000 msecs
 Maximum wait time between two consecutive SPFs 10000 msecs
 Incremental-SPF disabled
 Minimum LSA interval 5 secs
 Minimum LSA arrival 1000 msecs
 LSA group pacing timer 240 secs
 Interface flood pacing timer 33 msecs
 Retransmission pacing timer 66 msecs
 Number of external LSA 0. Checksum Sum 0x000000
 Number of opaque AS LSA 0. Checksum Sum 0x000000
 Number of DCbitless external and opaque AS LSA 0
 Number of DoNotAge external and opaque AS LSA 0
 Number of areas in this router is 1. 1 normal 0 stub 0 nssa
 Number of areas transit capable is 0
 External flood list length 0
 IETF NSF helper support enabled
 Cisco NSF helper support enabled
 Reference bandwidth unit is 100 mbps
    Area BACKBONE(0)
        Number of interfaces in this area is 2
        Area has no authentication
        SPF algorithm last executed 00:05:29.536 ago
        SPF algorithm executed 2 times
        Area ranges are
        Number of LSA 2. Checksum Sum 0x00C6B6
        Number of opaque link LSA 0. Checksum Sum 0x000000
        Number of DCbitless LSA 0
        Number of indication LSA 0
        Number of DoNotAge LSA 0
        Flood list length 0
```

This command shows the OSPF timer configuration and other statistics, including the number of times the SPF algorithm is run in an area.

### The `show ip ospf database` Command

To display lists of information related to the OSPF database for a specific routing device, including the collection of OSPF link states, use the `show ip ospf database` command:

```
VAN-R1#show ip ospf database

            OSPF Router with ID (13.0.0.1) (Process ID 1)

                Router Link States (Area 0)

Link ID         ADV Router      Age         Seq#       Checksum Link count
13.0.0.1        13.0.0.1        437         0x80000002 0x004AF5 3
14.0.0.1        14.0.0.1        438         0x80000001 0x007BC1 3
```

Router Link States section indicates the LSA type 1 messages and the Net Link States section indicates the LSA type 2 messages.

The Link ID column represents the router ID number.
The ADV Router column represents the router ID of the advertising routing device.
The Age column represents how old the link state information is.
The Seq# column is used to detect old or duplicate LSAs from OSPF neighbors.
The Checksum Column is the checksum of the update to ensure reliability.
The Link count column represents the number of interfaces detected for a routing device.

### The `show ip ospf interface` Command

On an interface-by-interface basis, your OSPF router keeps track of what area an interface belongs to and what neighbors, if any, are connected to the interface.
To view this information, use the `show ip ospf interface` command:

```
VAN-R1#show ip ospf interface

Serial1/0 is up, line protocol is up
  Internet Address 13.0.0.1/8, Area 0, Attached via Network Statement
  Process ID 1, Router ID 13.0.0.1, Network Type POINT_TO_POINT, Cost: 64
  Topology-MTID    Cost    Disabled    Shutdown      Topology Name
        0           64        no          no            Base
  Transmit Delay is 1 sec, State POINT_TO_POINT
  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5
    oob-resync timeout 40
    Hello due in 00:00:03
  Supports Link-local Signaling (LLS)
  Cisco NSF helper support enabled
  IETF NSF helper support enabled
  Index 2/2, flood queue length 0
  Next 0x0(0)/0x0(0)
  Last flood scan length is 1, maximum is 1
  Last flood scan time is 0 msec, maximum is 0 msec
  Neighbor Count is 1, Adjacent neighbor count is 1
    Adjacent with neighbor 14.0.0.1
  Suppress hello for 0 neighbor(s)

FastEthernet0/0 is up, line protocol is up
  Internet Address 12.0.0.1/8, Area 0, Attached via Network Statement
  Process ID 1, Router ID 13.0.0.1, Network Type BROADCAST, Cost: 1
  Topology-MTID    Cost    Disabled    Shutdown      Topology Name
        0           1         no          no            Base
  Transmit Delay is 1 sec, State DR, Priority 1
  Designated Router (ID) 13.0.0.1, Interface address 12.0.0.1
  No backup designated router on this network
  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5
    oob-resync timeout 40
    Hello due in 00:00:01
  Supports Link-local Signaling (LLS)
  Cisco NSF helper support enabled
  IETF NSF helper support enabled
  Index 1/1, flood queue length 0
  Next 0x0(0)/0x0(0)
  Last flood scan length is 0, maximum is 0
  Last flood scan time is 0 msec, maximum is 0 msec
  Neighbor Count is 0, Adjacent neighbor count is 0
  Suppress hello for 0 neighbor(s)
```

In this example, the router ID is 13.0.0.1. its state DR, hello and dead interval timers are at their default values: 10 and 40 seconds.

### The `show ip ospf neighbor` Command

To see all of your router's OSPF neighbors, use the `show ip ospf neighbor` command:

```

VAN-R1#show ip ospf neighbor

Neighbor ID     Pri   State           Dead Time   Address         Interface
14.0.0.1          0   FULL/  -        00:00:36    13.0.0.2        Serial1/0
```

### The `debug ip ospf adj` Command

For more detailed troubleshooting, you can use `debug` commands. If you want to view the adjacency process that a router builds to other routers, use the `debug ip ospf adj` command.

### The `debug ip ospf events` Command

If you want to view OSPF events on your router, use the `debug ip ospf events` command

### The `debug ip ospf packet` Command

If you want to view OSPF packet contents of LSAs, use the `debug ip ospf packet` command.

**Debug Field Explanations for `debug ip ospf packet` command**

| Field value | Exp                                                                                                                     |
| ----------- | ----------------------------------------------------------------------------------------------------------------------- |
| Aid:        | OSPF Area ID number                                                                                                     |
| Auk:        | OSPF authentication key used for neighbor authentication                                                                |
| Aut:        | Type of OSPF authentication (0-none, 1-simple password, 2-MD5 hasing)                                                   |
| Keyid:      | MD5 key value if this authentication mechanism is enabled                                                               |
| L:          | Length of the packet                                                                                                    |
| Rid:        | OSPF router ID                                                                                                          |
| Seq:        | Sequence number                                                                                                         |
| T:          | OSPF packet type (1-hello, 2-data description, 3-link state request, 4-link state update, 5-link state acknowledgement) |
| V:          | OSPF version number                                                                                                     |

### Exercise 12-1: Configuring OSPF

![[Pasted image 20251024145213.png]]

* VAN-R1 S1/0 - LA-R1 S1/0

* VAN-R1 F0/0 - VAN-SW1 E0/0
* LA-R1  F0/0 - LA-SW1 E0/0

* VAN-SW1 E1/0 - A
* VAN-SW1 E1/1 - B
* LA-SW1  E1/0 - C
* LA-SW1  E1/1 - D

**VAN-R1**
```
VAN-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### Serial interface configuration (to LA-R1)
VAN-R1(config)#interface S1/0
VAN-R1(config-if)#ip addr 13.0.0.1 255.0.0.0
VAN-R1(config-if)#no shutdown

### F0/0 (to switch) interface configuration
VAN-R1(config-if)#interface F0/0
VAN-R1(config-if)#ip addr 12.0.0.1 255.0.0.0
VAN-R1(config-if)#no shutdown

### verify
VAN-R1(config-if)#do show ip interface brief
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0/0            12.0.0.1        YES manual up                    up
Serial1/0                  13.0.0.1        YES manual up                    down
Serial1/1                  unassigned      YES unset  administratively down down
Serial1/2                  unassigned      YES unset  administratively down down
Serial1/3                  unassigned      YES unset  administratively down down
FastEthernet2/0            unassigned      YES unset  administratively down down
FastEthernet2/1            unassigned      YES unset  administratively down down
GigabitEthernet3/0         unassigned      YES unset  administratively down down

### save configuration
VAN-R1(config-if)#do copy running-config startup-config
Destination filename [startup-config]?
Warning: Attempting to overwrite an NVRAM configuration previously written
by a different version of the system image.
Overwrite the previous NVRAM configuration?[confirm]
Building configuration...
[OK]
```

**LA-R1**
```
LA-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### Serial interface configuration (to VAN-R1)
LA-R1(config)#interface S1/0
LA-R1(config-if)#ip addr 13.0.0.2 255.0.0.0
LA-R1(config-if)#no shutdown

### F0/0 interface configuration (to switch)
LA-R1(config-if)#interface F0/0
LA-R1(config-if)#ip addr 14.0.0.1 255.0.0.0
LA-R1(config-if)#no shutdown

### verify
LA-R1(config-if)#do show ip interface brief
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0/0            14.0.0.1        YES manual up                    up
Serial1/0                  13.0.0.2        YES manual up                    up
Serial1/1                  unassigned      YES unset  administratively down down
Serial1/2                  unassigned      YES unset  administratively down down
Serial1/3                  unassigned      YES unset  administratively down down
FastEthernet2/0            unassigned      YES unset  administratively down down
FastEthernet2/1            unassigned      YES unset  administratively down down
GigabitEthernet3/0         unassigned      YES unset  administratively down down

### save configuration
LA-R1(config-if)#do copy running-config startup-config
Destination filename [startup-config]?
Warning: Attempting to overwrite an NVRAM configuration previously written
by a different version of the system image.
Overwrite the previous NVRAM configuration?[confirm]
Building configuration...
[OK]
```

**serial ping test**
```
### VAN-R1 (13.0.0.1) -> LA-R1 (13.0.0.2)
VAN-R1#ping 13.0.0.2
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 13.0.0.2, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 8/12/24 ms

### LA-R1 (13.0.0.2) -> VAN-R1 (13.0.0.1)
LA-R1#ping
*Oct 24 15:02:10.303: %SYS-5-CONFIG_I: Configured from console by console
LA-R1#ping 13.0.0.1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 13.0.0.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 8/20/64 ms
```

**check routing table**
```
### VAN-R1 route
VAN-R1#show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is not set

      12.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        12.0.0.0/8 is directly connected, FastEthernet0/0
L        12.0.0.1/32 is directly connected, FastEthernet0/0
      13.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        13.0.0.0/8 is directly connected, Serial1/0
L        13.0.0.1/32 is directly connected, Serial1/0

### LA-R1 route
LA-R1#show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is not set

      13.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        13.0.0.0/8 is directly connected, Serial1/0
L        13.0.0.2/32 is directly connected, Serial1/0
      14.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        14.0.0.0/8 is directly connected, FastEthernet0/0
L        14.0.0.1/32 is directly connected, FastEthernet0/0
```

**OSPF configuration**
```
### VAN-R1 ospf
VAN-R1(config)#router ospf 1
VAN-R1(config-router)#network 12.0.0.0 0.255.255.255 area 0
VAN-R1(config-router)#network 13.0.0.0 0.255.255.255 area 0
VAN-R1(config-router)#end

### LA-R1 ospf
LA-R1(config)#router ospf 1
LA-R1(config-router)#network 13.0.0.0 0.255.255.255 area 0
LA-R1(config-router)#network 14.0.0.0 0.255.255.255 area 0
LA-R1(config-router)#end
```

**OSPF verification**
```
### VAN-R1
VAN-R1#show ip protocols
*** IP Routing is NSF aware ***

Routing Protocol is "application"
  Sending updates every 0 seconds
  Invalid after 0 seconds, hold down 0, flushed after 0
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Maximum path: 32
  Routing for Networks:
  Routing Information Sources:
    Gateway         Distance      Last Update
  Distance: (default is 4)

Routing Protocol is "ospf 1"
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Router ID 13.0.0.1
  Number of areas in this router is 1. 1 normal 0 stub 0 nssa
  Maximum path: 4
  Routing for Networks:
    12.0.0.0 0.255.255.255 area 0
    13.0.0.0 0.255.255.255 area 0
  Routing Information Sources:
    Gateway         Distance      Last Update
    14.0.0.1             110      00:00:30
  Distance: (default is 110)
  
VAN-R1#show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is not set

      12.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        12.0.0.0/8 is directly connected, FastEthernet0/0
L        12.0.0.1/32 is directly connected, FastEthernet0/0
      13.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        13.0.0.0/8 is directly connected, Serial1/0
L        13.0.0.1/32 is directly connected, Serial1/0
O     14.0.0.0/8 [110/65] via 13.0.0.2, 00:01:12, Serial1/0

VAN-R1#show ip ospf neighbor

Neighbor ID     Pri   State           Dead Time   Address         Interface
14.0.0.1          0   FULL/  -        00:00:39    13.0.0.2        Serial1/0

### LA-R1
LA-R1#show ip protocols
*** IP Routing is NSF aware ***

Routing Protocol is "application"
  Sending updates every 0 seconds
  Invalid after 0 seconds, hold down 0, flushed after 0
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Maximum path: 32
  Routing for Networks:
  Routing Information Sources:
    Gateway         Distance      Last Update
  Distance: (default is 4)

Routing Protocol is "ospf 1"
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Router ID 14.0.0.1
  Number of areas in this router is 1. 1 normal 0 stub 0 nssa
  Maximum path: 4
  Routing for Networks:
    13.0.0.0 0.255.255.255 area 0
    14.0.0.0 0.255.255.255 area 0
  Routing Information Sources:
    Gateway         Distance      Last Update
    13.0.0.1             110      00:00:58
  Distance: (default is 110)

LA-R1#show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is not set

O     12.0.0.0/8 [110/65] via 13.0.0.1, 00:01:38, Serial1/0
      13.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        13.0.0.0/8 is directly connected, Serial1/0
L        13.0.0.2/32 is directly connected, Serial1/0
      14.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        14.0.0.0/8 is directly connected, FastEthernet0/0
L        14.0.0.1/32 is directly connected, FastEthernet0/0

LA-R1#show ip ospf neighbor

Neighbor ID     Pri   State           Dead Time   Address         Interface
13.0.0.1          0   FULL/  -        00:00:39    13.0.0.1        Serial1/0
```

**PING test**
```bash
### PC-A to PC-B
# PC-A: 12.0.0.10/8, PC-B: 12.0.0.20/8
A> ping 12.0.0.20

84 bytes from 12.0.0.20 icmp_seq=1 ttl=64 time=0.253 ms
84 bytes from 12.0.0.20 icmp_seq=2 ttl=64 time=0.326 ms
84 bytes from 12.0.0.20 icmp_seq=3 ttl=64 time=0.311 ms
84 bytes from 12.0.0.20 icmp_seq=4 ttl=64 time=0.334 ms
84 bytes from 12.0.0.20 icmp_seq=5 ttl=64 time=0.344 ms

### PC-C to PC-D
# PC-C: 14.0.0.10/8, PC-D: 14.0.0.20/8
C> ping 14.0.0.20

84 bytes from 14.0.0.20 icmp_seq=1 ttl=64 time=0.226 ms
84 bytes from 14.0.0.20 icmp_seq=2 ttl=64 time=0.339 ms
84 bytes from 14.0.0.20 icmp_seq=3 ttl=64 time=0.405 ms
84 bytes from 14.0.0.20 icmp_seq=4 ttl=64 time=0.326 ms
84 bytes from 14.0.0.20 icmp_seq=5 ttl=64 time=0.690 ms

### PC-C to PC-A (ospf test)

```

---

## Chapter Review

OSPF is an open-standard routing protocol for IP, which uses cost as a metric.
It uses the Dijkstra algorithm (SPF) to provide a loop-free routing topology and uses incremental updates with route summarization support.

OSPF is hierarchial, supporting two layers: backbone (area 0) and areas connected to the backbone.
Its downside is that OSPF requires more memory and CPU process than distance vector protocols, and it is more difficult to configure and troubleshoot.

Each OSPF router has a router ID, which is either the highest IP address on a loopback interface or the highest IP address on an active interface.
LSAs are used to develop neighbor relationships and are sent as mutlicasts every 10 seconds.
For LAN segments, a DR and a BDR are elected (highest router ID) to dissminate routing information.
Routers use 224.0.0.6 to send information to the DR/BDR. OSPF is a connection-oritented in that any routing information sent to another router to their neighbors, the mutlicast address used is 224.0.0.5,

Configuring OSPF requires you to specify a process ID, which is locally significant to the router.
When configuring the `network` command, you specify an IP adddress or network number, a wildcard mask (inverted subnet mask), and a number for the area to which the address or network belongs.
The `show ip ospf interface` command displays OSPF information about the router's ID, the DR and BDR, and timer information.
The `show ip ospf neighbor` command displays your router's neighbors as well as their OSPF states.

---

## Quick Review

### OSPF Overview

* OSPF is an open-standard, link state protocol.
	* It's classless and supports hierarchial routing and route summarization.
	* It uses cost as a metric, which is the invers of the bandwidth of a link.
* OSPF requires more memory and faster processors to handle its additional information.

### OSPF Opearation

* Each OSPF router has an ID, which is either the highest IP address on a loopback device, if one exists, or the highest IP address on an active interface.
* Routers use link state advertisements (LSA) to learn the topology of the network.
	* To share information with another router, the routers must be neighborss: their area numbers and types, timers, and passwords must match
* Designated router (DR) and backup designated router (BDR) assist in sharing topology information.
	* Traffic sent to DR/BDR pair is multicast to 224.0.0.6.
	* Traffic sent to all routers on a segment has a destination address of 224.0.0.5.
	* Hello messages are sent out every 10 seconds, with a dead interval timer of 40 seconds.
	* The DR sends a periodic update every 30 minutes.

### OSPF Configuration

* You must give the OSPF routing process a process ID, which is locally significant to the router.
	* You use a wildcard mask when specifying which interfaces are in which areas and are participating in OSPF: `network IP_ADDR WILDCARD_MASK area AREA_#`
* Loopback interfaces are always active unless manually disabled and are used to give an OSPF router an ID.
* The `bandwidth` comamnd is used to derive a cost value for an interface metric; it should be configured on serial interfaces since the bandwidth defaults to 1544 Kbps on these.
* By default, OSPF load-balances across four equal-cost paths to a destination.

### OSPF Troubleshooting

* The administrative distance for OSPF is 110.
* The `show ip ospf interface`, `show ip ospf database`, `show ip ospf neighbor` , `debug ip ospf adj`, and `debug ip ospf events` commands can be used to troubleshoot neighbor relationship problems.

---

### Questions

1.  Which of the following is false concerning OSPF?

A. It provides a loop-free topology.
**B. It is a classful protocol and allows for a hierarchical design.**: classless
C. It requires more memory and processing cycles than distance vector protocols.
D. It is complex to configure and difficult to troubleshoot.

2.  OSPF uses `__________` as a metric.

A. Bandwidth
B. Delay
**C. Cost**
D. Hop count

3.  An OSPFs router ID is based on `__________`.

A. The lowest IP address on its loopback interface, if configured, or the lowest IP address on its active interfaces
**B. The highest IP address on its loopback interface, if configured, or the highest IP address on its active interfaces**
C. The highest IP address on its active interfaces, if configured, or the highest IP address on its loopback interfaces
D. The lowest IP address on its active interfaces, if configured, or the lowest IP address on its loopback interfaces

4.  OSPF hellos are sent every `__________` seconds on a multi-access medium.

A. 5
**B. 10**
C. 15
D. 40

5.  Looking at the output of the following command, what would be the OSPF router ID?

![[Pasted image 20251025113940.png]]

**A. 172.16.0.1**
B. 1.1.1.1
C. 12.0.0.1
D. 13.0.0.1

6.  Which of the following is true concerning OSPF?

A. Setting an interface priority to 0 causes a router to become a DR on that interface. = inactive
**B. If the dead interval timer doesnt match between two OSPF routers, they will not become neighbors.**
C. DRs are elected on broadcast, multi-access, and point-to-point segments. => in point-to-point env, there is no DR and BDR
D. Routers use a multicast address of 224.0.0.5 to send LSAs to the DR/BDR. = uses 224.0.0.6, 224.0.0.5 is used for send to all devices

7.  The OSPF process ID is `__________`.

A. Locally significant and is the router ID
B. Globally significant and must match on every router
**C. Locally significant**
D. An AS number

8.  You use the show ip route on your router. What does the value of 110 represent on the OSPF route entry?

![[Pasted image 20251025114023.png]]

A. The router ID
B. The route cost
C. The autonomous system number
**D. The administrative distance number**

9.  You want to change the OSPF priority number on a routers interface. What command would you use?

A. if-priority ospf 25
**B. ip ospf priority 25**
C. ospf priority 25
D. priority 25

10.  Which of the following can you not see by issuing the show ip ospf interface command?

**A. Process and router ID of you and the neighboring OSPF routers**
B. Hello and dead interval timers
C. Priority of your router
D. Cost of the interface

11.  Two OSPF routers cannot form a neighbor relationship. Which of the following would not cause this problem?

A. Hello and dead intervals dont match.
B. MTU sizes dont match.
C. Subnet masks dont match.
**D. Router IDs dont match.**

### Performance-based Questions

1.  One of your coworkers is configuring OSPFv2 neighbor adjacencies and is wondering which OSPF parameters must be the same for the neighbor adjacency to work. Place each item on the left into the appropriate category.

![[Pasted image 20251025114110.png]]


* **Must have unique value**
	* Router ID
	* IP address
* **Must have matching values**
	* Area ID
	* Timers
	* Netmask

2.  Looking at the following exhibit, match the command with the definition of what the command does.

![[Pasted image 20251025114123.png]]

| Command                  | Def                                                                                                                   |
| ------------------------ | --------------------------------------------------------------------------------------------------------------------- |
| `show ip ospf database`  | Displays the collection of OSPF links learned from other OSPF routing devices                                         |
| `show ip ospf neghibor`  | Displays all of your router's OSPF neighbors                                                                          |
| `show ip route`          | Displays the routes in the routing table                                                                              |
| `debug ip ospf packet`   | Displays the OSPF packets as they are sent or received                                                                |
| `show ip ospf interface` | Displays the router ID, the ID of the DR and BDR, timer values, the number of neighbors and the number of adjacencies |
| `show ip protocols`      | Displays all of the IP routing protocols that are configured                                                          |
