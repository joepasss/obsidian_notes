
Multiple network ranges, or *subnets*, that you can assign each address range to a separate network (subnet) in your internetwork (network made up of multiple networks).

You may need to use mulitple networks as a result of your business operating in several different physical locations, for example, Or, if you're working in one location, you may want to cut down on broadcast traffic being sent across the entire network by segmenting your network into multiple segments, placing a router in between each network segment.

Each segment will need its own network address range so that the router can route (send) the data from one network to another.
If, for example, you had two physical networks but kept the single IP range without subnetting, the router would "logically" think that all systems were on the same network and would never try to route data from one side to the other.

> If you do not subnet a network range that is divided into multiple physical network segments, the Internet Protocol (IP) will logically decide that all systems are on the same network, and it will not try to route the data across the router separating the network segment.
> As a result, you will be able to communicate with hosts on your segment, but not with the other segments.

## Understanding Subnetting

You subnet a network ID to break the single logical network address into multiple logical network addresses so that you can assign a logical network ID and related addresses to each physical network segment on your network.

In order to do this, you have to manipulate the subnet mask at the bit level and essentially take host bits away and convert them to subnet bits.

### Subnetting Class A Networks 

You have an address range of 10.0.0.0 and you will divide the network into four subnetworks, or *subnets*.

**physical sctructure**
![[Pasted image 20251007122230.png]]

Subnetting involves taking some of the host bits from the subnet mask and using them as additional network bits, which will give you more networks.

With subnetting, you are taking addtional host bits and "masking" them (flagging them as network bits) by setting the bits to a 1 state so that they are no longer representing the host ID portion of the subnet mask.
This creates additional networks, but is results in fewer hosts on each of the networks.

To begin, you need to know how many host bits are required to make the desired number of networks.
To calcuate how many bits are needed to subnet into four networks (subnets),
```
2^masked_bits = number of subnets
```

For example, if you are looking for four subnets, the formula would be 2^2 = 4 networks, or subnets.
So you would steal, or mask, two of the host bits in the subnet mask and make them network bits (these are called *subnet bits*).

Now that you know that two bits must be masked to create the four subnets, the next step is to look at your IP range of 10.0.0.0 and ask yourself, "What is the default subnet mask of this address?" You sould come up with 255.0.0.0 because it is a class A address.

Once you know the default subnet mask, your next step is to break the subnet mask down into binary.

| Dec | 255      | 0        | 0        | 0        |
| --- | -------- | -------- | -------- | -------- |
| Bin | 11111111 | 00000000 | 00000000 | 00000000 |

Once you've written out the subnet mask in binary in your work area, you can begin to calculate the new addresses of the four subnets.

The first thing you need to do is maks two bits from the host ID portion of the subnet mask and make them subnet bits by setting them to a 1 state

| Dec | 255      | 0        | 0        | 0        |
| --- | -------- | -------- | -------- | -------- |
| Bin | 11111111 | 11000000 | 00000000 | 00000000 |

Notice that the two bits that are now enabled are in the second octet. Also notice that you always work from left to right (bigger to lesser number) in the subnet mask.

#### Calculate the New subnet Mask

```
# NEW subnet mask
11111111.11000000.00000000.00000000

# to dec
255.192.0.0
```

The next step is to calculate the IP ranges for the four different networks, but before that, you need to know five pieces of information about each of the new subnets you are designing before this walkthrough is complete:

* **New subnet mask**
	* After subnetting a network, you will have a new subnet mask that is used by all subnets you have created
* **Network ID**
	* To calculate the network ID for each network, all host bits are set to 0.
* **First valid address**
	* To calculate the first valid address, you set the least significant host bit to 1; all other host bits are 0.
* **Broadcast address**
	* To calculate the broadcast address for each subnet, you set all host bits to 1
* **Last valid address**
	* To calculate the last valid address, you set the least significant host bit to 0; all other host bits are 1.

You know that the new subnet mask is 255.192.0.0, so you can start by calculating the network ID of each of the four subnets.

#### Calculate the Network ID

To calculate the network IDs for each of the subnets, you need to determine all of the on/off states of the number of bits that you have converted from host bits to subnet bits.

| First Octet | Second Octet | Thrid Octet | Fourth Octet |
| ----------- | ------------ | ----------- | ------------ |
| 10          | 0            | 0           | 0            |
| 10          | 00000000     | 00000000    | 00000000     |
| 10          | 01000000     | 00000000    | 00000000     |
| 10          | 10000000     | 00000000    | 00000000     |
| 10          | 11000000     | 00000000    | 00000000     |

Next, you add in the remaining 0s to the bits that represent the host ID portion.
Remeber that the original network ID was 10.0.0.0, so the first octet will start with 10, no matter what you change in the binary, because you are starting your work with the second octet (original subnet mask is 255.0.0.0, because it is class A network).

The next step is to bring the 10 down to the first octet; each network ID will start with 10. You then calculate the network ID of each of the two networks by leaving all host bits set to 0.

| First Octet | Second Octet | Thrid Octet | Fourth Octet | network ID          |
| ----------- | ------------ | ----------- | ------------ | ------------------- |
| 10          | 0            | 0           | 0            | 10.0.0.0 (original) |
| 10          | 00000000     | 00000000    | 00000000     | 10.0.0.0            |
| 10          | 01000000     | 00000000    | 00000000     | 10.64.0.0           |
| 10          | 10000000     | 00000000    | 00000000     | 10.128.0.0          |
| 10          | 11000000     | 00000000    | 00000000     | 10.192.0.0          |

In this example, because the two subnet bits are being manipulated, and because all host bits are set to 0, the four new network ID are created: 10.0.0.0, 10.64.0.0, 10.128.0.0, and 10.192.0.0

#### Calculate the First Valid Address

| First | Second   | Thrid    | Fourth   | First Valid Addr    |
| ----- | -------- | -------- | -------- | ------------------- |
| 10    | 0        | 0        | 0        | 10.0.0.1 (original) |
| 10    | 00000000 | 00000000 | 00000001 | 10.0.0.1            |
| 10    | 01000000 | 00000000 | 00000001 | 10.64.0.1           |
| 10    | 10000000 | 00000000 | 00000001 | 10.128.0.1          |
| 10    | 11000000 | 00000000 | 00000001 | 10.192.0.1          |

#### Calculate the Broadcast Address

| First | Second   | Thrid    | Fourth   | Broadcast Addr            |
| ----- | -------- | -------- | -------- | ------------------------- |
| 10    | 0        | 0        | 0        | 10.255.255.255 (original) |
| 10    | 00111111 | 11111111 | 11111111 | 10.63.255.255             |
| 10    | 01111111 | 11111111 | 11111111 | 10.127.255.255            |
| 10    | 10111111 | 11111111 | 11111111 | 10.191.255.255            |
| 10    | 11111111 | 11111111 | 11111111 | 10.255.255.255            |

#### Calculate the Last Valid Address

| First | Second   | Thrid    | Fourth   | Last Valid Addr           |
| ----- | -------- | -------- | -------- | ------------------------- |
| 10    | 0        | 0        | 0        | 10.255.255.254 (original) |
| 10    | 00111111 | 11111111 | 11111110 | 10.63.255.254             |
| 10    | 01111111 | 11111111 | 11111110 | 10.127.255.254            |
| 10    | 10111111 | 11111111 | 11111110 | 10.191.255.254            |
| 10    | 11111111 | 11111111 | 11111110 | 10.255.255.254            |

| Subnet | Network ID | First Valid Addr | Last Valid Addr | Broadcast Addr | Subnet Mask |
| ------ | ---------- | ---------------- | --------------- | -------------- | ----------- |
| 1      | 10.0.0.0   | 10.0.0.1         | 10.63.255.254   | 10.63.255.255  | 255.192.0.0 |
| 2      | 10.64.0.0  | 10.64.0.1        | 10.127.255.254  | 10.127.255.255 | 255.192.0.0 |
| 3      | 10.128.0.0 | 10.128.0.1       | 10.191.255.254  | 10.191.255.255 | 255.192.0.0 |
| 4      | 10.192.0.0 | 10.192.0.1       | 10.255.255.254  | 10.255.255.255 | 255.192.0.0 |

![[Pasted image 20251007132441.png]]

#### Verify the Network Size

* **Number of subnets**
	* `2^subnet_bits = number of subnets`
* **Number of hosts per subnet**
	* `2^host_bits - 2 = number of hosts per subnet`

### Subnetting Class B Networks

You have the network ID of 190.45.0.0. The default subnet mask for a class B network is 255.255.0.0
You have to divide the address range into six subnets

#### Set Up the Work Area

```
IP Range        : 190.45.0.0
Subnet Mask     : 255.255.0.0
Subnet Mask(bin): 11111111.11111111.00000000.00000000
```

#### How many Bits to Make Subnets?

```
2^masked_bits = number of subnets

2^2 = 4
2^3 = 8
```

```
IP Range        : 190.45.0.0
Subnet Mask     : 255.255.224.0
Subnet Mask(bin): 11111111.11111111.11100000.00000000
```

#### List the combinations

```
#1: 190.45.00000000.00000000
#2: 190.45.00100000.00000000
#3: 190.45.01000000.00000000
#4: 190.45.01100000.00000000
#5: 190.45.10000000.00000000
#6: 190.45.10100000.00000000
#7: 190.45.11000000.00000000
#8: 190.45.11100000.00000000
```

#### Calculate the Network ID

| Subnet | Network ID   |
| ------ | ------------ |
| #1     | 190.45.0.0   |
| #2     | 190.45.32.0  |
| #3     | 190.45.64.0  |
| #4     | 190.45.96.0  |
| #5     | 190.45.128.0 |
| #6     | 190.45.160.0 |
| #7     | 190.45.192.0 |
| #8     | 190.45.224.0 |

#### Calculate the First Valid Address

| Subnet | First Valid Address |
| ------ | ------------------- |
| #1     | 190.45.0.1          |
| #2     | 190.45.32.1         |
| #3     | 190.45.64.1         |
| #4     | 190.45.96.1         |
| #5     | 190.45.128.1        |
| #6     | 190.45.160.1        |
| #7     | 190.45.192.1        |
| #8     | 190.45.224.1        |

#### Calculate the Broadcast Address

| Subnet | Broadcast address(bin)   | Broadcast address(decimal) |
| ------ | ------------------------ | -------------------------- |
| #1     | 190.45.00011111.11111111 | 190.45.31.255              |
| #2     | 190.45.00111111.11111111 | 190.45.63.255              |
| #3     | 190.45.01011111.11111111 | 190.45.95.255              |
| #4     | 190.45.01111111.11111111 | 190.45.127.255             |
| #5     | 190.45.10011111.11111111 | 190.45.159.255             |
| #6     | 190.45.10111111.11111111 | 190.45.191.255             |
| #7     | 190.45.11011111.11111111 | 190.45.223.255             |
| #8     | 190.45.11111111.11111111 | 190.45.255.255             |

#### Calculate the Last Valid Address

| Subnet | last valid address(bin)  | last valid address(decimal) |
| ------ | ------------------------ | --------------------------- |
| #1     | 190.45.00011111.11111110 | 190.45.31.254               |
| #2     | 190.45.00111111.11111110 | 190.45.63.254               |
| #3     | 190.45.01011111.11111110 | 190.45.95.254               |
| #4     | 190.45.01111111.11111110 | 190.45.127.254              |
| #5     | 190.45.10011111.11111110 | 190.45.159.254              |
| #6     | 190.45.10111111.11111110 | 190.45.191.254              |
| #7     | 190.45.11011111.11111110 | 190.45.223.254              |
| #8     | 190.45.11111111.11111110 | 190.45.255.254              |

#### Verify

Number of subnets = 2^3, 8
Number of hosts per subnet = 2^13 - 2 = 8190

### Subnetting Class C Networks

You have a class network address of 202.78.34.0 and you need to divide the network into 12 subnets.

#### Set Up the Work Area

```
IP Range        : 202.78.34.0
Subnet Mask     : 255.255.255.0
Subnet Mask(bin): 11111111.11111111.11111111.00000000
```

#### How Many Bits to Make Subnets?

```
2^masked_bits = number of subnet

2^3 = 8
2^4 = 16

Network Bits: 28 (11111111.11111111.11111111.11110000)
Host Bits:4
```

```
IP Range        : 202.78.34.0
Subnet Mask     : 255.255.255.240
Subnet Mask(bin): 11111111.11111111.11111111.11110000
```

#### List of Combinations

| comb# | binary |
| ----- | ------ |
| #1    | 0000   |
| #2    | 0001   |
| #3    | 0010   |
| #4    | 0011   |
| #5    | 0100   |
| #6    | 0101   |
| #7    | 0110   |
| #8    | 0111   |
| #9    | 1000   |
| #10   | 1001   |
| #11   | 1010   |
| #12   | 1011   |
| #13   | 1100   |
| #14   | 1101   |
| #15   | 1110   |
| #16   | 1111   |

#### Calculate the Network ID

| subnet | Network ID(bin)    | Network ID    |
| ------ | ------------------ | ------------- |
| #1     | 202.78.34.00000000 | 202.78.34.0   |
| #2     | 202.78.34.00010000 | 202.78.34.16  |
| #3     | 202.78.34.00100000 | 202.78.34.32  |
| #4     | 202.78.34.00110000 | 202.78.34.48  |
| #5     | 202.78.34.01000000 | 202.78.34.64  |
| #6     | 202.78.34.01010000 | 202.78.34.80  |
| #7     | 202.78.34.01100000 | 202.78.34.96  |
| #8     | 202.78.34.01110000 | 202.78.34.112 |
| #9     | 202.78.34.10000000 | 202.78.34.128 |
| #10    | 202.78.34.10010000 | 202.78.34.144 |
| #11    | 202.78.34.10100000 | 202.78.34.160 |
| #12    | 202.78.34.10110000 | 202.78.34.176 |
| #13    | 202.78.34.11000000 | 202.78.34.192 |
| #14    | 202.78.34.11010000 | 202.78.34.208 |
| #15    | 202.78.34.11100000 | 202.78.34.224 |
| #16    | 202.78.34.11110000 | 202.78.34.240 |

#### Calculate the First Valid Address

| subnet | First Valid Addr(bin) | First Valid Addr |
| ------ | --------------------- | ---------------- |
| #1     | 202.78.34.00000001    | 202.78.34.1      |
| #2     | 202.78.34.00010001    | 202.78.34.17     |
| #3     | 202.78.34.00100001    | 202.78.34.33     |
| #4     | 202.78.34.00110001    | 202.78.34.49     |
| #5     | 202.78.34.01000001    | 202.78.34.65     |
| #6     | 202.78.34.01010001    | 202.78.34.81     |
| #7     | 202.78.34.01100001    | 202.78.34.98     |
| #8     | 202.78.34.01110001    | 202.78.34.113    |
| #9     | 202.78.34.10000001    | 202.78.34.129    |
| #10    | 202.78.34.10010001    | 202.78.34.145    |
| #11    | 202.78.34.10100001    | 202.78.34.161    |
| #12    | 202.78.34.10110001    | 202.78.34.177    |
| #13    | 202.78.34.11000001    | 202.78.34.193    |
| #14    | 202.78.34.11010001    | 202.78.34.209    |
| #15    | 202.78.34.11100001    | 202.78.34.225    |
| #16    | 202.78.34.11110001    | 202.78.34.241    |

#### Calculate the Broadcast Address

| subnet | Broadcast Addr(bin) | Broadcast Addr |
| ------ | ------------------- | -------------- |
| #1     | 202.78.34.00001111  | 202.78.34.15   |
| #2     | 202.78.34.00011111  | 202.78.34.31   |
| #3     | 202.78.34.00101111  | 202.78.34.47   |
| #4     | 202.78.34.00111111  | 202.78.34.63   |
| #5     | 202.78.34.01001111  | 202.78.34.79   |
| #6     | 202.78.34.01011111  | 202.78.34.95   |
| #7     | 202.78.34.01101111  | 202.78.34.111  |
| #8     | 202.78.34.01111111  | 202.78.34.127  |
| #9     | 202.78.34.10001111  | 202.78.34.143  |
| #10    | 202.78.34.10011111  | 202.78.34.159  |
| #11    | 202.78.34.10101111  | 202.78.34.175  |
| #12    | 202.78.34.10111111  | 202.78.34.191  |
| #13    | 202.78.34.11001111  | 202.78.34.207  |
| #14    | 202.78.34.11011111  | 202.78.34.223  |
| #15    | 202.78.34.11101111  | 202.78.34.239  |
| #16    | 202.78.34.11111111  | 202.78.34.255  |

#### Calculate the Last Valid Address

| subnet | Last Valid Addr(bin) | Last Valid Addr |
| ------ | -------------------- | --------------- |
| #1     | 202.78.34.00001110   | 202.78.34.14    |
| #2     | 202.78.34.00011110   | 202.78.34.30    |
| #3     | 202.78.34.00101110   | 202.78.34.46    |
| #4     | 202.78.34.00111110   | 202.78.34.62    |
| #5     | 202.78.34.01001110   | 202.78.34.78    |
| #6     | 202.78.34.01011110   | 202.78.34.94    |
| #7     | 202.78.34.01101110   | 202.78.34.110   |
| #8     | 202.78.34.01111110   | 202.78.34.126   |
| #9     | 202.78.34.10001110   | 202.78.34.142   |
| #10    | 202.78.34.10011110   | 202.78.34.158   |
| #11    | 202.78.34.10101110   | 202.78.34.174   |
| #12    | 202.78.34.10111110   | 202.78.34.190   |
| #13    | 202.78.34.11001110   | 202.78.34.206   |
| #14    | 202.78.34.11011110   | 202.78.34.222   |
| #15    | 202.78.34.11101110   | 202.78.34.238   |
| #16    | 202.78.34.11111110   | 202.78.34.254   |

### Exercise 5-1: Subnetting an IP Addresses

#### Task 1: Subnetting a Class A Address

* The network ID of the class A is 120.0.0.0
* divide by 8.

| Subnet | Network ID  | First Valid | Last Valid      | Broadcast       | Subnet Mask |
| ------ | ----------- | ----------- | --------------- | --------------- | ----------- |
| #1     | 120.0.0.0   | 120.0.0.1   | 120.31.255.254  | 120.31.255.255  | 255.224.0.0 |
| #2     | 120.32.0.0  | 120.32.0.1  | 120.63.255.254  | 120.63.255.255  | 255.224.0.0 |
| #3     | 120.64.0.0  | 120.64.0.1  | 120.95.255.254  | 120.95.255.255  | 255.224.0.0 |
| #4     | 120.96.0.0  | 120.96.0.1  | 120.127.255.254 | 120.127.255.255 | 255.224.0.0 |
| #5     | 120.128.0.0 | 120.128.0.1 | 120.159.255.254 | 120.159.255.255 | 255.224.0.0 |
| #6     | 120.160.0.0 | 120.160.0.1 | 120.191.255.254 | 120.191.255.255 | 255.224.0.0 |
| #7     | 120.192.0.0 | 120.192.0.1 | 120.223.255.254 | 120.223.255.254 | 255.224.0.0 |
| #8     | 120.224.0.0 | 120.224.0.1 | 120.255.255.254 | 120.255.255.255 | 255.224.0.0 |

#### Task 2: Subnetting a Class B Address

* The network ID: 190.34.0.0
* subnetting into four subnets

| Subnet | Network ID   | First Valid  | Last Valid     | Broadcast      | Subnet Mask   |
| ------ | ------------ | ------------ | -------------- | -------------- | ------------- |
| #1     | 190.34.0.0   | 190.34.0.1   | 190.34.63.254  | 190.34.63.254  | 255.255.192.0 |
| #2     | 190.34.64.0  | 190.34.64.1  | 190.34.127.254 | 190.34.127.255 | 255.255.192.0 |
| #3     | 190.34.128.0 | 190.34.128.1 | 190.34.191.254 | 190.34.191.255 | 255.255.192.0 |
| #4     | 190.34.192.0 | 190.34.192.1 | 190.34.255.254 | 190.34.255.255 | 255.255.192.0 |

#### Subnetting a Class C Address

* The network ID: 216.83.11.0
* Subnetting into two subnets

| Subnet | Network ID    | First Valid   | Last Valid    | Broadcast     | Subnet Mask     |
| ------ | ------------- | ------------- | ------------- | ------------- | --------------- |
| #1     | 216.83.11.0   | 216.83.11.1   | 216.83.11.126 | 216.83.11.127 | 255.255.255.128 |
| #2     | 216.83.11.128 | 216.83.11.129 | 216.83.11.254 | 216.83.11.255 | 255.255.255.128 |


---

## Subnetting Shortcuts

Network ID + 1 = First Valid Address
Next Network ID - 1 = Broadcast Address
Broadcast Address - 1 = Last Valid Address

### Exercise 5-2: Subnetting Using the Shortcut Method

#### Task 1: Subnetting a Class A Address

* The network ID: 37.0.0.0
* Subnetting into four subnets
* New Subnet Mask: 255.192.0.0

| Subnet | Network ID | First Valid | Last Valid     | Broadcast      |
| ------ | ---------- | ----------- | -------------- | -------------- |
| 1      | 37.0.0.0   | 37.0.0.1    | 37.63.255.254  | 37.63.255.255  |
| 2      | 37.64.0.0  | 37.64.0.1   | 37.127.255.254 | 37.127.255.255 |
| 3      | 37.128.0.0 | 37.128.0.1  | 37.191.255.254 | 37.191.255.255 |
| 4      | 37.192.0.0 | 37.192.0.1  | 37.255.255.254 | 37.255.255.255 |

#### Task 2: Subnetting a Class B Address

* The network ID: 139.45.0.0
* Subnetting into eight subnets
* New Subnet Mask: 255.255.224.0

| Subnet | Network ID   | First Valid  | Last Valid     | Broadcast      |
| ------ | ------------ | ------------ | -------------- | -------------- |
| 1      | 139.45.0.0   | 139.45.0.1   | 139.45.31.254  | 139.45.31.255  |
| 2      | 139.45.32.0  | 139.45.32.1  | 139.45.63.254  | 139.45.63.255  |
| 3      | 139.45.64.0  | 139.45.64.1  | 139.45.95.254  | 139.45.95.255  |
| 4      | 139.45.96.0  | 139.45.96.1  | 139.45.127.254 | 139.45.127.255 |
| 5      | 139.45.128.0 | 139.45.128.1 | 139.45.159.254 | 139.45.159.255 |
| 6      | 139.45.160.0 | 139.45.160.1 | 139.45.191.254 | 139.45.191.255 |
| 7      | 139.45.192.0 | 139.45.192.1 | 139.45.223.254 | 139.45.223.255 |
| 8      | 139.45.224.0 | 139.45.224.1 | 139.45.255.254 | 139.45.255.255 |

#### Task 3: Subnetting a Class C Address

* The network ID: 222.100.10.0
* Subnetting into four subnets
* New Subnet Mask: 255.255.255.192

| Subnet | Network ID     | First Valid    | Last Valid     | Broadcast      |
| ------ | -------------- | -------------- | -------------- | -------------- |
| 1      | 222.100.10.0   | 222.100.10.1   | 222.100.10.62  | 222.100.10.63  |
| 2      | 222.100.10.64  | 222.100.10.65  | 222.100.10.126 | 222.100.10.127 |
| 3      | 222.100.10.128 | 222.100.10.129 | 222.100.10.190 | 222.100.10.191 |
| 4      | 222.100.10.192 | 222.100.10.193 | 222.100.10.254 | 222.100.10.255 |

---

## Classful vs. Classless Addressing

**REVIEW**

* **Class A**
	* 00000001 to 01111111
	* 1 to 127
	* you cannot have an address of 00000000, so this range starts at 1
* **Class B**
	* 10000000 to 10111111
	* 128 to 191
* **Class C**
	* 11000000 to 11011111
	* 192 to 223
* **Class D**
	* 11100000 to 11101111
	* 224 to 239
	* multicast
* **Class E**
	* 11110000 to 11110111
	* 240 to 247
	* reserved for future use not typically available for general use on the internet

Each IP address that you use on a system falls into one of the three primary classes: Class A, Class B, or Class C.
This is known as *classful addressing*.

| Address Class | Value of First Octet | Octet Setup | Number of Hosts |
| ------------- | -------------------- | ----------- | --------------- |
| Class A       | 1-127                | N.H.H.H     | 16,777,214      |
| Class B       | 128-191              | N.N.H.H     | 65,534          |
| Class C       | 192-223              | N.N.N.H     | 254             |

N means network ID and H means host ID to identify the network ID and host ID portions of the address.

### IP Subnet Zero

A number of years ago, some networking devices and protocols could not use the first and last subnets we created when we divided the network into multiple subnets.
This was because some older routing protocols did not send the subnet mask information along with the network ID when the router shared information about the network.
This meant that if the network was subnetted, let's say into four subnets, when a router shared knowledge of the 192.168.1.0 network, the receiving router had no way to know if it was subnetted or the entire 192.168.1.0 network.

Today's routing protocols send the subnet mask information with the route (something like 192.168.1.0/26) so there is no question that this is the first of four subnetted networks.

Cisco devices can use the first and last subnets when subnetting a network, because the `ip subnet-zero` command configured on the device indicates that we can use the first and last subnets.
If the command was changed to `no ip subnet-zero`, we would not be allowed to use the first and last subnets on the router.

---

## Variable Length Subnet Masks

One of the problems with the subnetting technique we've covered to far is that each of the subnets we've created has the same number of IP addresses assgined to it.
This somethimes can waste addresses, because there may not be a need for the same number of IP addresses within each subnet.

![[Pasted image 20251007150928.png]]

Subnet 1 has 21 hosts, subnet 2 has 2 hosts, and subnet 3 has 56 hosts.
Each host on each subnet will need an IP address within the subnet, and we want to subnet the network into three subnets while conserving addresses.

To accomplish this goal, look at your network ID (216.83.11.0), and first work with the larger subnet. In this case, subnet 3.
Subnet 3 requires 56 hosts, so to calculate the subnet information, you need to determine how many *hosts bits* you need to create a subnet that supports 56 hosts.

```
2^host_bits - 2 = number of hosts supported

2^5 = 30
2^6 = 62
```

Keep in mind that using 6 bits for host bits gives you a few more host addresses than what you require, but you cannot go any lower, because five host bits would support only 30 hosts.
You subtract 2 because each subnet has two reserved addresses (network ID, broadcast address).
Also note that although you are supporting 62 hosts with this subnet, the number of addresses is 64. this is known as the *block size (or subnet size)*.

You can now document the subnet mask for subnet 3 as follows:
```
11111111.11111111.11111111.11000000 = 255.255.255.192
                           subnet bits
```

Now to show what address range this is, you can plot the network on a grid showing the different IP addresses used in the fourth octet.

Note that subnet 3 will be using a block of 64 addresses, but you can use only 62 of them.
This measn numbers 0-63 are the addresses for subnet 3.

![[Pasted image 20251007151813.png]]

Notice that this is documented as 216.83.11.0/26.
The **/26** indicates that 26 bits in the subnet mask have been enabled, and it controls how many addresses are used in this subnet (64).

Now look at the next highest number of hosts on a network, and you'll see that subnet 1 requires 21 hosts (or 21 IP addresses).

```
2^host_bits - 2 = number of host supported

2^4 - 2 = 14
2^5 - 2 = 30
```

You can now document the subnet mask for subnet 1 as follows:

```
11111111.11111111.11111111.11100000 = 255.255.255.224
```

Now plot subnet 1 on the grid showing the different IPs in the fourth octet.

![[Pasted image 20251007152212.png]]

This means numbers 64-95 are the addresses for subnet 1.
Note that this is documented as 216.83.11.64/27.
The /27 indicates that 27 bits in the subnet mask have been enabled, and it controls how many addresses are used in this subnet (32).

The last subnet to add to our planning grid is subnet 2.

```
2^host_bits - 2 = number of host supported

2^2 - 2 = 2
```

This means we need to have only two hosts bits to support a subnet requiring only two IP addresses.

```
11111111.11111111.11111111.11111100 = 255.255.255.252
```

![[Pasted image 20251007152517.png]]

Note that this is documented as 216.83.11.96/30

The great news is that we have planned our IP address scheme for three subnets, and there is planty of remaining addresses.

### Exercise 5-3: Using VLSM on a Network

* Network Address: 200.45.6.0

![[Pasted image 20251007152657.png]]

**Subnet #1**

108 hosts required.
```
2^host_bits - 2 = number of host supported

2^6 - 2 = 62
2^7 - 2 = 126
```

Subnet #1 subnet mask:
```
11111111.11111111.11111111.10000000 = 255.255.255.128
```

Subnet #1: 200.45.6.0/25
end of Subnet #1 (broadcast address): 200.45.6.127 (0-127, total 128 addresses)

**Subnet #3**

38 hosts required
```
2^host_bits - 2 = number of host supported

2^5 - 2 = 30
2^6 - 2 = 62
```

Subnet #3 subnet mask:
```
11111111.11111111.11111111.11000000 = 255.255.255.192
```

Subnet #3: 200.45.6.128/26
End of Subnet #3 (brodcast address): 200.45.6.191 (128-191, total 64 addresses)

**Subnet #2**

2 hosts required
```
2^host_bits - 2 = number of host supported

2^2 - 2 = 2
```

Subnet #2 subnet mask:
```
11111111.11111111.11111111.11111100 = 255.255.255.252
```

Subnet #2: 200.45.6.192/30

---

## Route Summarization

*Route summarization* is ability to take a bunch of contiguous network numbers in your routing table and advertise these contiguous routes as a single summarized or aggregated route.

Route summarization enables you to summarize subnetted routes back to the class boundary.
For instance, if you are using the network ID 192.168.1.0/24 and have subnetted it to 192.168.1.0/26 (four subnets), you could summarize these subnets in your routing table and advertise them as the single class C network number 192.168.1.0/24

![[Pasted image 20251007154509.png]]

In this example, the routing entries are reduced from four to one in your routing updates.
Notice in this example that the same class network, 192.168.1.0, has two masks associated with it: 255.255.255.192 (identified with /26) and 255.255.255.0 (identified with /24)

### Advantages of Summarization

Summarization enables you to create a more efficient routing environment by providing the following advantages:

* It reduces the size of routing tables, requiring less memory and processing.
* It reduces the size of routing updates, requiring less bandwidth.
* It prevents routing table instability.

There are few disadvantages to route summarization as well:

* The summary route may contain subnets that are not in use, and the router may recive packets for routes that are not in use, although they do mathematically fall under the summary route. In this case the router will drop those packets.
* The router may choose a different pathway for the route because the pathway is more specific than that of the summary route.

To calculate the summary route, you first list out each of the network IDs and then convert them to their binary forms.

```
192.168.1.0/26    11000000.10101000.00000001.00000000
192.168.1.64/26   11000000.10101000.00000001.01000000
192.168.1.128/26  11000000.10101000.00000001.10000000
192.168.1.192/26  11000000.10101000.00000001.11000000
```

Next, you identify, from left to right, how many of the bits are the same with those four network IDs. Taht is yoru summary route:
```
11000000.10101000.0000001.xxxxxxxx
```

Notice that in the first two bits of the fourth octet, the bits start to change for each subnet.
All of the bits before that point are the common bits to create our summary route.

When you convert the common bits back to decimal, you get a summary route of 192.168.1.0/24.

---

## Classless Interdomain Routing (CIDR)

*Classless Interdomain Routing (CIDR)*, specified in RFC 2050, is an extension to VLSM and route summarization.

With VLSM, you can summarize subnets back to the class A, B, or C network boundary.
Looking back at our example, if you have a class C network 192.168.1.0/24 and subnet it with a 26-bit mask, you have created four subnets.
Using route summarization, you can summarize these four subnets back to 192.168.1.0/24.

CIDR takes this one step further and enables you to summarize a block of contigous class A, B, and/or C network numbers.
This practice is commonly referred to as *supernetting*.
Today's classless protocols support subnetting.

However, it is most commonly configured by Internet service providers (ISPs) that use the Border Gateway Protocol (BGP) for routing.

![[Pasted image 20251007155724.png]]

A router is connected to four class C networks: 192.168.0.0/24, 192.168.1.0/24, 192.168.2.0/24, 192.168.3.0/24.
It is summarizing those routes as 192.168.0.0/22.

```
192.168.1.0/24  11000000.10101000.00000001.00000000
192.168.2.0/24  11000000.10101000.00000010.00000000
192.168.3.0/24  11000000.10101000.00000011.00000000
192.168.4.0/24  11000000.10101000.00000100.00000000

common bits :   11000000.10101000.00000
```

Totaling 22 bits that are common to all networks (so that is our summary route).
Notice the subnet mask for this summarization: 255.255.252.0. This mask, along with the begining network of 192.168.0.0, includes addresses from 192.168.0.0 to 192.168.3.255, which are behind this router.

> CIDR is similar to VLSM, in that CIDR enables you to summarize multiple contiguous class networks together, like multiple class C networks. (supernetting).

Because there needed to be a standard method of indicating how many bits in the IP address were network bits, *CIDR notation* was created.
With CIDR notation, you specify the IP address and a forward slash(/), followed by the number of bits that make up the network ID.

For example, 10.0.0.0/8 specifies that the network ID is the first eight bits (which would mean the subnet mask is 255.0.0.0) Likewise, 131.107.64.0/18 indicates that this network ID is a result of subnetting a class B address.

It is important to note that the CIDR notation has become commonplace in many of the configuration dialog boxes and commands where you must input a network ID and a subnet mask.

### Exercise 5-4: Additional Subnetting Practices

#### Task 1: Subnetting a Class B Network

* Network ID: 150.87.0.0
* Subnetting into 16 subnets
* original subnet mask: 255.255.0.0
* Subnet Mask: 255.255.240.0
* Subnet Mask(bin): N.N.11110000.H

| Subnet | Network ID   | First Valid  | Last Valid     | Broadcast      |
| ------ | ------------ | ------------ | -------------- | -------------- |
| 1      | 150.87.0.0   | 150.87.0.1   | 150.87.15.254  | 150.87.15.255  |
| 2      | 150.87.16.0  | 150.87.16.1  | 150.87.31.254  | 150.87.31.255  |
| 3      | 150.87.32.0  | 150.87.32.1  | 150.87.47.254  | 150.87.47.255  |
| 4      | 150.87.48.0  | 150.87.48.1  | 150.87.63.254  | 150.87.63.255  |
| 5      | 150.87.64.0  | 150.87.64.1  | 150.87.79.254  | 150.87.79.255  |
| 6      | 150.87.80.0  | 150.87.80.1  | 150.87.95.254  | 150.87.95.255  |
| 7      | 150.87.96.0  | 150.87.96.1  | 150.87.111.254 | 150.87.111.255 |
| 8      | 150.87.112.0 | 150.87.112.1 | 150.87.127.254 | 150.87.127.255 |
| 9      | 150.87.128.0 | 150.87.128.1 | 150.87.143.254 | 150.87.143.255 |
| 10     | 150.87.144.0 | 150.87.144.1 | 150.87.159.254 | 150.87.159.255 |
| 11     | 150.87.160.0 | 150.87.160.1 | 150.87.175.254 | 150.87.175.255 |
| 12     | 150.87.176.0 | 150.87.176.1 | 150.87.191.254 | 150.87.191.255 |
| 13     | 150.87.192.0 | 150.87.192.1 | 150.87.207.254 | 150.87.207.255 |
| 14     | 150.87.208.0 | 150.87.208.1 | 150.87.223.254 | 150.87.223.255 |
| 15     | 150.87.224.0 | 150.87.224.1 | 150.87.239.254 | 150.87.239.255 |
| 16     | 150.87.240.0 | 150.87.240.1 | 150.87.255.254 | 150.87.255.255 |

#### Task 2: Subnetting a Class A Network

* Network ID: 14.0.0.0
* Subnetting into 8 subnets
* original subnet mask: 255.0.0.0
* Subnet Mask: 255.224.0.0
* Subnet Mask(bin): N.11100000.H.H

| Subnet | Network ID | First Valid | Last Valid     | Broadcast      |
| ------ | ---------- | ----------- | -------------- | -------------- |
| 1      | 14.0.0.0   | 14.0.0.1    | 14.31.255.254  | 14.31.255.255  |
| 2      | 14.32.0.0  | 14.32.0.1   | 14.63.255.254  | 14.63.255.255  |
| 3      | 14.64.0.0  | 14.64.0.1   | 14.95.255.254  | 14.95.255.255  |
| 4      | 14.96.0.0  | 14.96.0.1   | 14.127.255.254 | 14.127.255.255 |
| 5      | 14.128.0.0 | 14.128.0.1  | 14.159.255.254 | 14.159.255.255 |
| 6      | 14.160.0.0 | 14.160.0.1  | 14.191.255.254 | 14.191.255.255 |
| 7      | 14.192.0.0 | 14.192.0.1  | 14.223.255.254 | 14.223.255.255 |
| 8      | 14.224.0.0 | 14.224.0.1  | 14.255.255.254 | 14.255.255.255 |

#### Task 3: Subnetting a Class C Network

* Network ID: 202.15.67.0
* Subnetting info 4 subnets
* original subnet mask: 255.255.255.0
* Subnet Mask: 255.255.255.192
* Subnet Mask(bin): N.N.N.11000000

| Subnet | Network ID    | First Valid   | Last Valid    | Broadcast     |
| ------ | ------------- | ------------- | ------------- | ------------- |
| 1      | 202.15.67.0   | 202.15.67.1   | 202.15.67.62  | 202.15.67.63  |
| 2      | 202.15.67.64  | 202.15.67.65  | 202.15.67.126 | 202.15.67.127 |
| 3      | 202.15.67.128 | 202.15.67.129 | 202.15.67.190 | 202.15.67.191 |
| 4      | 202.15.67.192 | 202.15.67.193 | 202.15.67.254 | 202.15.67.255 |

---

## Chapter Review 

To subnet a network, you will need to know how many networks or hosts per networks are required.
You can then convert host bits in the subnet mask to become subnet bits, essentially altering your subnet mask and creating more networks while supporting less hosts per network.

The Variable Length Subnet Mask (VLSM) feature enables you to have a different subnet mask for each subent on the network; this leat you make better use of addresses.

---

## Quick Review

### Understanding Subnetting

The purpose of subnetting is to break one network ID into multiple subnetworks (subnets) so that you can follow the physical structure of the network.

With subnetting, you take host bits from the subnet mask and turn them into network bits thus creating more network but fewer machine per network.

To determine how many bits to take the host ID portion of the subnet mask, use the formula `2^masked_bits - 2 = number of networks`.

For each subnet created, you must calculate network ID, first valid address, last valid address, broadcast address, and new subnet mask.

#### Subnetting Shortcuts

Network ID + 1 = First valid address
Broadcast address - 1 = Last valid address

#### Classful vs. Classless Addressing

In classful addressing, the network ID falls into one of the default network IDs of a class A, class B, or class C address.

In classless addressing, the network ID is altered from a normal classful address.

### VLSM (Variable Length Subnet Masks)

Creating subnets of the same size for each of your subnets is going to waste addresses when designing your network.

VLSM enables you to use a different subnet mask for each subnet, so that you can make better use of your available addresses.

---

**CLASS**
* **Class A**
	* 00000001 to 01111111
	* 1 to 127
	* you cannot have an address of 00000000, so this range starts at 1
* **Class B**
	* 10000000 to 10111111
	* 128 to 191
* **Class C**
	* 11000000 to 11011111
	* 192 to 223
* **Class D**
	* 11100000 to 11101111
	* 224 to 239
	* multicast
* **Class E**
	* 11110000 to 11110111
	* 240 to 247
	* reserved for future use not typically available for general use on the internet

## Questions

1.  You have a network ID of 131.107.0.0 and you would like to subnet your network into six networks. What is your new subnet mask?

A. 255.224.0.0
**B. 255.255.224.0**
C. 255.192.0.0
D. 255.255.192.0

default: 255.255.0.0 -> N.N.11100000.H, 255.255.224.0

2.  You want to divide your network into eight networks. How many bits will you need to take from the host ID portion of the subnet mask?

A. 2: makes four
**B. 3**
C. 4: makes 16
D. 6: makes 64

3.  In binary, how do you calculate the broadcast address of a network range?

A. All host bits set to 0
B. All host bits set to 0, except for the low-order bit
C. All host bits set to 1, except for the low-order bit
**D. All host bits set to 1**

4.  In binary, how do you calculate the network ID of a network range?

**A. All host bits set to 0**
B. All host bits set to 0, except for the low-order bit
C. All host bits set to 1, except for the low-order bit
D. All host bits set to 1

5.  The last valid address of a subnet is always

A. One more than the broadcast address
**B. One less than the broadcast address**
C. One more than the network ID
D. One less than the network ID

---

6.  You need to assign an IP address to the router that uses the fourth valid address of 200.56.88.96/27. Which address would you use?

A. 200.56.88.68: 4th valid of subnet 3
B. 200.56.88.104: 13th valid of subnet 4
C. 200.56.88.97: first valid of subnet 4
**D. 200.56.88.100**: 4th valid of subnet 4

Class C network, 255.255.255.0 (/24) -> N.N.N.11100000, subnetted by 8 subnets

| Subnet | Network ID    | First Valid   | Last Valid    | Broadcast     |
| ------ | ------------- | ------------- | ------------- | ------------- |
| 1      | 200.56.88.0   | 200.56.88.1   | 200.56.88.30  | 200.56.88.31  |
| 2      | 200.56.88.32  | 200.56.88.33  | 200.56.88.62  | 200.56.88.63  |
| 3      | 200.56.88.64  | 200.56.88.65  | 200.56.88.94  | 200.56.88.95  |
| 4      | 200.56.88.96  | 200.56.88.97  | 200.56.88.126 | 200.56.88.127 |
| 5      | 200.56.88.128 | 200.56.88.129 | 200.56.88.158 | 200.56.88.159 |
| 6      | 200.56.88.160 | 200.56.88.161 | 200.56.88.190 | 200.56.88.191 |
| 7      | 200.56.88.192 | 200.56.88.193 | 200.56.88.222 | 200.56.88.223 |
| 8      | 200.56.88.224 | 200.56.88.225 | 200.56.88.254 | 200.56.88.255 |

---

7.  Your system has an IP address of 138.97.25.10/20. Which of the following is a system on your network?

A. 138.97.56.8: fourth subnet
**B. 138.97.17.10**: second subnet
C. 138.97.15.77: first subnet
D. 138.97.33.76: thrid subnet

138.97.25.10 => class b network, original subnet mask is 255.255.0.0, /16
138.97.25.10/20 is subnetted by 16 subnets.

138.97.25.10/20 is second subnet of 138.97.0.0/20

| Subnet | Network ID   | First Valid  | Last Valid     | Broadcast      |
| ------ | ------------ | ------------ | -------------- | -------------- |
| 1      | 138.97.0.0   | 138.97.0.1   | 138.97.15.254  | 138.97.15.255  |
| 2      | 138.97.16.0  | 138.97.16.1  | 138.97.31.254  | 138.97.31.255  |
| 3      | 138.97.32.0  | 138.97.32.1  | 138.97.47.254  | 138.97.47.255  |
| 4      | 138.97.48.0  | 138.97.48.1  | 138.97.63.254  | 138.97.63.255  |
| 5      | 138.97.64.0  | 138.97.64.1  | 138.97.79.254  | 138.97.79.255  |
| 6      | 138.97.80.0  | 138.97.80.1  | 138.97.95.254  | 138.97.95.255  |
| 7      | 138.97.96.0  | 138.97.96.1  | 138.97.111.254 | 138.97.111.255 |
| 8      | 138.97.112.0 | 138.97.112.1 | 138.97.127.254 | 138.97.127.255 |
| 9      | 138.97.128.0 | 138.97.128.1 | 138.97.143.254 | 138.97.143.255 |
| 10     | 138.97.144.0 | 138.97.144.1 | 138.97.159.254 | 138.97.159.255 |
| 11     | 138.97.160.0 | 138.97.160.1 | 138.97.175.254 | 138.97.175.255 |
| 12     | 138.97.176.0 | 138.97.176.1 | 138.97.191.254 | 138.97.191.255 |
| 13     | 138.97.192.0 | 138.97.192.1 | 138.97.207.254 | 138.97.207.255 |
| 14     | 138.97.208.0 | 138.97.208.1 | 138.97.223.254 | 138.97.223.255 |
| 15     | 138.97.224.0 | 138.97.224.1 | 138.97.239.254 | 138.97.239.255 |
| 16     | 138.97.240.0 | 138.97.240.1 | 138.97.255.254 | 138.97.255.255 |

8.  Which of the following is an example of CIDR notation?

A. 16/10.34.56.78
B. 10.34.56.78
C. 10.34.56.0
**D. 10.34.56.78/16**

9.  Your router has an IP address of 216.83.11.65/27. You want to connect a new system on the network. Which of the following addresses would you assign to that new system?

A. 216.83.11.45: second subnet
**B. 216.83.11.87**: thrid subnet
C. 216.83.11.95: third subnet, broadcast address
D. 216.83.11.96: fourth subnet, network id

216.83.11.65/27 is class C
Class C's default subnet mask is N.N.N.H (/24)
So, 27 is subnetted 8 subnets.

| Subnet | Network ID    | First Valid   | Last Valid    | Broadcast     |
| ------ | ------------- | ------------- | ------------- | ------------- |
| 1      | 216.83.11.0   | 216.83.11.1   | 216.83.11.30  | 216.83.11.31  |
| 2      | 216.83.11.32  | 216.83.11.33  | 216.83.11.62  | 216.83.11.63  |
| 3      | 216.83.11.64  | 216.83.11.65  | 216.83.11.94  | 216.83.11.95  |
| 4      | 216.83.11.96  | 216.83.11.98  | 216.83.11.126 | 216.83.11.127 |
| 5      | 216.83.11.128 | 216.83.11.129 | 216.83.11.158 | 216.83.11.159 |
| 6      | 216.83.11.160 | 216.83.11.161 | 216.83.11.190 | 216.83.11.191 |
| 7      | 216.83.11.192 | 216.83.11.193 | 216.83.11.222 | 216.83.11.223 |
| 8      | 216.83.11.224 | 216.83.11.225 | 216.83.11.254 | 216.83.11.255 |

`216.83.11.65/27` is third subnet, first valid ip address.

10.  You are configuring the gigabit interface on the Cisco router with the last valid IP address of the 131.107.48.0/20 network. What address would you use?

A. 131.107.48.254: 4th subnet, and this is not last valid address
B. 131.107.255.254: 16th subnet, last valid address
C. 131.107.64.254: 5th subnet, and this is not last valid address
**D. 131.107.63.254**: 4th subnet, last valid address.

131.107.48.0 is class B address, so it's default subnet mask is N.N.H.H (/16).
so 131.107.48.0/20 is subnetted by 16 subnets.

Third octet start with:
```
0, 16, 32, 48, 64, 80, 96, 112, 128, 144, 160, 176, 192, 208, 224, 240
```

131.107.48.0 is 4th subnet's network ID.

## Performance-based Questions

1.  You are helping a junior administrator to understand the IP addressing scheme used on your network. You have subnetted your network to support 16 subnets with the address scheme of 200.15.36.0/28. Looking at the different addresses listed on the left side of the following exhibit, identify if the address is a broadcast address, network ID, or host address.

![[Pasted image 20251007163654.png]]

200.15.36.0 is class C network, so default subnet mask is N.N.N.H (/24)
200.15.36.0/28 is subnetted by 16 subnets

last octet start with:
```
0, 16, 32, 48, 64, 80, 96, 112, 128, 144, 160, 176, 192, 208, 224, 240
```

**Broadcast Address**
200.15.36.79
200.15.36.31

**Network ID**
200.15.36.16
200.15.36.48

**Host Address**
200.15.36.22
200.15.36.60
