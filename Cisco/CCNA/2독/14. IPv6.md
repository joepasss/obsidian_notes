
## Necessity of IPv6

An IPv4 address is 32 bits in length; that means there are 2^32 actual IP addresses, which equals 4.3 billion addresses. Not all of these are usable, however: only 3.7 billion of these are actually usable. Many addresses are reserved, such as research (239-254), broadcast (255), multicast (224-239), private (10, 172.16, and 192.168), and loopback addresses (127). And of course, many of the useable addresses are already assigned, leaving very, very few addresses for new growth.

Unlike 32-bit IPv4 addresses, IPv6 uses a 128-bit address. This allows for 3.4 x 10^38 addresses, which is enough for many IP addresses for each person on Earth, and probably on multiple planets.

### Growth Issues

During the early-to-mid-1990s, concern began to grow about the diminishing number of IPv4 addresses.
The temporary solution to this problem was to set aside an address space, called *private addresses*, which anyone coule use a public network. That these addresses are defined in IETF RFC 1918: 10.0.0.0/8, 172.16.0.0-172.31.255.255, and 192.168.0.0-192.168.255.255.
To access a public network, address translation is used to translate the private addressing information to a public address, commonly wwith static Network Address Translation (NAT) translations for internal services and dynamic overloading (in particular, Port Address Translation, or PAT) for user connections.

Many changes in the marketplace, however, are quickly reaching the point where address translation won't be enough: there won't be any public addresses left to translate to.
Here some valid reasons why companies are beginning to migrate to an IPv6 environment:

* Currently more than 3 billion people are connected to the Internet, and this is exponentially increasing based on fast-emerging technical markets.
* More than 2 billion smart phones, tablets, and similar devices offer common data services such as e-mail and web-browsing, and this number is expected to grow as more and more businesses implement mobile applications.
* More data services are being offered on consumer products, such as automobiles, household appliances, and industrial devices, and this number is expected to grow into the bilions.

It's not matter of *if* public addresses are going to be depleted, and not even *when* it's going to happen, but *how soon* in the near future this is going to happen.
Because IPv4 is only a 32-bit address, and because the designers did not foresee the growth of the Internet, we have run out of IPv4 address. The goal of IPv6 is to increase the address space (it is a 128-bit address space), which gives us more than enough IPv6 address for everyone in the world to use and handles future growth.

### IPv6 Features

* **Very large address space**
	* IPv6's large address space deals with global growth, where route prefixes can be easily aggregated in routing updates.
	* Support for multihoming to Internet service providers (ISPs) with a single address space is easily accomplished.
	* Autoconfiguration of addressing information, including the capability of including Media Access Control (MAC) addresses in the IP address, as well as plug-and-play options, simplifies address management.
	* Renumbering and modification of addresses is easily accommodated, as is public-to-private readdressing, without involving address translation.
* **Security**
	* IP security (IPsec) is built into IPv6, whereas it is an awkward to add-on in IPv4. With IPv6, two devices can dynamically negotiate security parameters and build a secure tunnel between them with no user intervention.
* **Mobility**
	* With the growth of movile devices, such as smart phones and tablets, devices can roam between wireless networks without breaking their connections.
* **Streamlined encapsulation**
	* The IPv6 encapsulation is simpler than that of IPv4, providing faster forwarding rates by routers and better routing efficiency. No checksums are included, reducing processing on endpoints. No broadcasts are used, reducing utilization of devices within the same subnet.
	* Quality of service (QoS) information is built into the IPv6 header, where a flow label identifies the traffic; this alleviates intermediate network devices from having to examine contents inside the packet, the TDP/UDP header, and payload information to classify the traffic for QoS correctly.
* **Addressing capabilities**
	* As with IPv4, addresses can be assigned statically or obtained via Dynamic Host Control Protocol (DHCPv6).
	* However, unlike IPv4, IPv6 supports stateless autoconfiguration, which enables a device to acquire addressing automatically without implementing a DHCP server solution.
* **Transition capabilities**
	* Various solutions exist to enable IPv4 and IPv6 to coexist successfully when migrating between the two.
	* One method, dual stack, enables you to run both protocols simultaneously on an interface of a device.
	* A second method, tunneling, enables you to tunnel IPv6 over IPv4, and vice versa, to transmit an IP version of one type across a network using another type.
	* Cisco supports a third method, Network Address Translation-Protocol Translation (NAT-PT), to translate between IPv4 and IPv6 (sometimes the term *proxy* is used instead of Protocol)

---

## IPv6 Addressing

### IPv6 Address Format

Whereas IPv4 addresses use a dotted-decimal format, in which each byte ranges from 0 to 255, IPv6 addresses use eight sets of four hexadecimal addresses (16 bits in each set), separated by a colon (:)

```
xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx

# x would be hex value.
```

This notation is commonly called *string* notation. Each hexadecimal value ranges from 0 to 9 and A to F (0-F).

* Hexadecimal values can be displayed in either lower- or uppercase for the characters A-F.
* A leading zero in a set of numbers can be omitted; for example, you could enter either 0012 or 12 in one of the eight fields, both are correct.
* If you ahve successive fields of zeros in an IPv6 address, you can represent them as two collons (::).
	* For example, 0:0:0:0:0:0:0:5 could be represented as ::5; and 2000:C67:0:0:8888:9999:1111:0 could be represented as 2000:C67::8888:9999:1111:0.
	* However, you can do this only *once* in the address 2000::C67::891::00 could be invalid. Since *::* appears more than once in the address. The reason for this limitation is that if you had two or more repetitions, you wouldn't know how many sets of zeros were being omitted from each part.
* An snspecified address is represented as *::*, since it contains all zeros.

### Calculating Hex Addresses

**Converting hex to binary**
![[Pasted image 20251105142952.png]]

At the top left of the figure you can see an IPv6 address that starts with **fe80**. Each character in the IPv6 address is made up of 4 bits. This means that each block in the address separated by a colon (:) is 16 bits in length. There are eight blocks, so 8 x 16 bits = 128 bits.

The pattern of 4 bits that each character makes can be easily figured out using a quick conversion table.
You can see that the values of each of the 4 bits are 8, 4, 2 and finally 1 on the far right side. Just like figuring out the value of an octet with IPv4, you can calculate the 4 bits used by taking the decimal number and turning on the 4-, 2-, and 1-bit placeholders. This will create a decimal value of 4 + 2 + 1 = 7.

Looking at the chart in the figure, you'll see that the decimal value of 7 is also the hex value of 7, which has a binary value of 0111. Knowing that each character is based off 4-bit value, you could use a conversion table to help you figure out what each hex value is in binary.

### Types of IPv6 Addresses

* **Anycast**
	* This is very different from an IPv4 broadcast.
	* An anycast address is used for one device to talk to the nearest device that has that address assigned to its interface (one-to-the-nearest address), where many interface can share the same address. These addresses are taken from the unicast address space but can represent multiple devices, such as multiple default gateways.
	* For example, using an anycast address as a default gateway address on your routers, user devices have to know of only one address, and you don't need to configure a protocol such as Hot Standby Router Protocol (HSRP) or Virtual Router Redundancy Protocol (VRRP).
* **Multicast**
	* This is similar to a multicast in IPv4
* **Unicast**
	* This represents a single unique address used for direct communication.

#### Anycast

One of the problems with addressing in IPv4 is the use of broadcasts, which every device has to process on a segment (even when the broadcast isn't ultimately destined to a device).
IPv4 relies heavily on broadcasts to discover devices on a segment, such as Address Resolution Protocol (ARP), and to acquire addressing, such as Dynamic Host Control Protocol (DHCP).
In IPv6, broadcasts no longer exist: they've been replaced with anycast and multicast addresses.

An anycast address identifies one or more *interfaces*. Sometimes people use the term *node* to designate an interface on a device.
Basically, an anycast is a hybrid of a unicast and multicast address. With a unicast, one packet is sent to one destination; with a multicast, one packet is sent to all members of the multicast group; and with an anycast, a packet is sent to any one member of a group of devices that are configured with the anycast address.
By default, packets sent to an anycast address are forwarded to the closet interface (node), which is based on the routing process employed to get the packet to the destination.
Given  this process, anycast addresses are commonly referred to as *one-to-the-nearest* addresses.
And, interestinlgly enough, anycast addresses are allocated from the global pool of unicast addresses in IPv6, making a unicast address and an anycast address indistinguishable from each other when you look at them in a packet.
And since multiple devices can be configured with the same anycast address, anycast addresses are commonly used when there is a need to load-balance traffic such as web content to two different destinations.

#### Multicast

Multicasts in IPv6 serve a function similar to their counterpart in IPv4: they represent a group of interfaces interested in seeing the same traffic.

**IPv6 multicast address**
![[Pasted image 20251105145231.png]]

The first 8 bits are set to FF. The next 4 bits indicate the scope of the multicast address (how far the packet can travel): 1 is for a node, 2 is for a link, 5 is for the site, 8 is for the organization, and E is global (the Internet).
For example, a multicast address of FF15::/16 is a temporary address for a site. FF02::1 represents all IPv6 devices (similar to a braodcast in IPv4). FF02::2 represents all routers on an IPv6 segment or VLAN.

#### Unicast

IPv6 unicast addresses are assigned to each node (interface), and thier uses are discussed in RFC 4291.

**The five types of unicast addresses**

| Address     | Value     | Desc                                                                                                                                                                                                                                        |
| ----------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Global      | 2000::/3  | Global unicast addresses are IPv6 public IP addresses that are routable on the Internet, and which are assigned by the Internet Assigned Numbers Authority (IANA). They are equivalent to IPv4 public IP addresses.                         |
| Reserved    | (range)   | Reserved addresses are used for specific types of anycast as well as for future use.                                                                                                                                                        |
| Private     | FE80::/10 | Like IPv4, IPv6 originally supported private addressing, which is used by devices that don't need to access a public network. The first two digits are FE, and the third digit can range from 8 to F.                                       |
| Loopback    | ::1       | Like the 127.0.0.1 address in IPv4, 0:0:0:0:0:0:0:1, or ::1, is used for local testing functions; unlike IPv4, which dedicates a complete Class A block of addresses for local testing, only one address is used for local testing in IPv6. |
| Unspecified | ::        | 0.0.0.0 in IPv4 means "unknown" address. In IPv6, this is represented by :: and is typically used in the source address field of the packet when an interface doesn't have an address and is trying to acquire one dynamically.             |

#### Private Addresses

Private addresses are used for devices that don't need to access a public network such as the Internet. There are two kinds of private addresses:

* **Site-local/unique-local**
	* A site-local address (aka unique-local address) is considered a private IP address, similar to the 10.0.0.0/8 private IP with IPv4. This address is used for local communication within a site.
	* A site-local address always starts with FEC:: through FFF::.
* **Link-local**
	* A link-local address is similar to an APIPA address in IPv4 and is used for communication on the network link.
	* A link-local address starts with FE80::/10 (FE8:: through FEB::).

Site-local addresses are similar to the RFC 1918 addresses and represent a particular site or company. These addresses can be used within a company without having to waste any public IP addresses, not that this is a concern, given the large number of addresses available in IPv6.
However, by using private addresses, you can set up address translation policies for IPv6 to easily control who is allowed to leave your network and receive returning traffic.

Link-local addresses are a new concept in IPv6. These kinds of addresses have a smaller scope as to how far they can travel, that is, no farther than the local link (the data link layer).
Routers will process packets destined to a link-local address, but they will not forward them to other links. Their most common use is for a device to acquire unicast site-local or global unicast addressing information, discover the default gateway, and discover other layer 2 neighbors on the segment.
When a device is using link-local addresses, it must specify an outbound interface, since every interface is connected to a "link".

#### Global Unicast Addresses

With the exception of the multicast address space of FF00::/8, unicast and anycast addresses make up the rest of the address types.
Global unicast addresses have the first three bits of the first hex value always set to 001, so this means a global unicast address always starts with a 2 or a 3, such as 2000 or 2001.
However, IANA has currently assigned only 2000::/3 adddresses to the global pool, which is about 1/6th of the available IPv6 addresses.
Of these addresses, only 2001::/16 are assigned to various Internet address registries.

Global unicast addresses are made up of two components: a subnet ID (64bits) and an interface ID (64bits).

**IPv6 unicast address**
![[Pasted image 20251105164726.png]]

The subnet ID contains the registery of the address (which is responsible for assigning it, such as IANA), the ISP prefix (which ISP is associated with the address), the site prefix (which company is assigned the address space), and a subnet prefix (subnets within the site).
ISPs are assigned an ISP prefix range that enables them easily to aggregate their prefixes, advertising just a single route to the Internet backbone; this alleviates one main problem today with how the Internet grew and how ISPs, initlly, were assigned IPv4 address spaces that could not be summarized easily.
Another advantage of this address allocation is that the subnet prefix is 16 bits in length, therefore, with a single global site address, a company can address up to 65,536 subnets.

The last half of the IPv6 address, the interface ID, represents a particular interface within the site.
One requirement with addresses from 2000::/3 through E000::/3 is that the interface ID must have a 64-bit value in it to be considered valid. Therefore, addresses that have 0s for the last 64 bits are considered invalid IPv6 unicast addresses. For example, 2004:1234:5678:90AB:: is invalid, since the interface ID (the last 64-bits, that is the last four sets of numbers) is binary zeros.

#### Modified EUI 64

The interface ID is typically composed of a part of the MAC address of the interface.
When this is done, the interface ID is commonly called an *extended unique identifier 64 (EUI-64)*.

**EUI-64 interface ID**
![[Pasted image 20251105165436.png]]

The *oranizationally unique identifier (OUI)*, which is the first 24 bits of the MAC address on a network card, is mapped into the first 24 bits of the interface ID.
The seventh bit in the highest order byte is set to 1, indicating that the interface ID is unique across the site, or 0, indicating that it is unique within the local scope only.
The OUI mapping is followed by the 16-bit value of FFFE. the last 24 bits of the MAC address are then mapped into the last part of the interface ID.

---

## IPv6 Enhancements

### IPv6 Header

**IPv4 header**
![[Pasted image 20251105165843.png]]

This header contains 12 fields, follwed by the Options field, which, if present, is of variable length.
Without any options, the IPv4 header is 20 bytes, and with options, it is at most 40 bytes.

In IPv6, six of these header fields are no longer part of the new IPv6 header.

* **Header length**
	* This is no longer necessary in IPv6 because all IPv6 headers are fixed-length.
* **Identification**
	* This function hasn't been used for a long time in IPv4 and has been deprecated in IPv6.
* **Flags**
	* This function hasn't been used for a long time in IPv4 and has been deprecated in IPv6.
* **Fragment Offset**
	* Fragmentation is processed differently in IPv6 and doesn't need field in the IPv6 header for this process (this has been moved to the Extension Header Information field in IPv6).
* **Header Checksum**
	* Today's data link layer technologies are reliable, so this field is no longer necessary in IPv6.
* **Padding**
	* This field is no longer necessary in IPv6.

**IPv6 header**
![[Pasted image 20251105170505.png]]

* **version**
	* This 4-bit field contains the number 6 instead of 4.
* **traffic Class**
	* Thie 8-bit field is similar to the ToS field in the IPv4 header.
* **Flow Label**
	* This 20-bit field is new to IPv6 and has no IPv4 equivalent.
	* It is used to mark individual traffic flows for additional policy functions performed by the routing device.
* **Payload Length**
	* This 16-bit field indicates the size of the payload.
	* In IPv4, the Total Packet Length field is the size of the entire packet, but in IPv6, the Paylod Length field doesn't include the size of the IPv6 header.
* **Next Header**
	* This 8-bit field performs the same function as the protocol field in the IPv4 header.
* **Hop Limit**
	* This 8-bit field performs the same function as the TTL field in the IPv4 header.
* **Source IP Address**
	* This 128-bit (16-byte) field indicates the source IPv6 address.
* **Destination IP Address**
	* This 128-bit (16-byte) field indicates the destination IPv6 address.

Following these eight fields are the extension header, if any exist.
These replace the IPv4 Options field. The number of extensions is not fixed, so the total length of the Extension Header Information field (list of extensions) is variable.

### ICMPv6

ICMPv6 has a protocol number of 58. Like ICMP in IPv4, ICMPv6 is used to help perform diagnostic tests and identify problems (echo, echo reply, destination unreachable, hop count exceeded, and so forth).
However, a lot more functionality has been added to ICMPv6.

ICMPv6 takes over the responsibility that other, separate, protocols in IPv4 perform:

* **Adresss Resolution Protocol (ARP)**
	* IPv4 uses ARP to resolve IP addresses to MAC addresses.
	* ARP no longer exists as a separte protocol in IPv6; ICMPv6 now performs its functions.
* **Internet Group Management Protocol (IGMP)**
	* IPv4 uses this protocol so that routing devices can learn if there are multicast devices in a VLAN that want to receive a multicast stream and to forward the necessary stream or streams to the VLAN.
	* IGMP no longer exists as a separate protocol in IPv6; ICMPv6 now performs its functions.

ICMPv6 has taken over the role of other protocols as well and also has new funtionality.

* **Router solicitation and advertisement**
	* Enables devices to query routing devices on a segment using a multicast message or routing devices on a segment using a multicast message or routing devices to advertise themselves via multicast messages; also allows for the redirection of end stations to the best gateway for a destination network.
* **DNS solicitation and advertisement**
	* Enables device to query for DNS servers on a segment using a multicast message or DNS server to advertise themselves via mutlicast messages
* **Neighbor solicitation and advertisement**
	* Commonly referred to as *neighbor discovery*, determines the data link layer address for neighbors on the same link (the replacement of IPv4's ARP), finds neighboring routers, and keeps track of the reachability of neighbors via multicast messages

---

## Address Assignment

You can use four methods to assign an IPv6 address to an interface: two are done statically and two dynamically.

### Static Address Assignment

One option you have is to statically assign a unicast address to a device's interface using either of these two approaches:

* Specify all 128 bits manually.
* Specify the first 64 bits manually and use EUI-64 to acquire the last 64 bits.

You can maually specify the entire 128-bit address, or you can specify the subnet ID and have the device use the EUI-64 method to create the interface ID part of the address.
If you're manually entering the entire address, remeber that sets of fields that have 0s in them can be abbreviated with a double colon (::).
The EUI-64 method is the approach more commonly used by most network administrators.

### DHCPv6

DHCPv6 is an update of DHCP in IPv4 and works similarly to the previous version, with a few differences.
In IPv6, DHCPv6 is referred to as *stateful autoconfiguration*. Before the client can begin, it must first detect a router on the link via a neighbor discovery process. If the client detects a router, the client examines the router advertisement messages to determine whether DHCPv6 has been set up. If the router specifies that DHCPv6 is supported, or no router advertisement messages are seen, the client will begin to find a DHCPv6 server by generating a DHCP solicit message. This message is sent to the ALL-DHCP-Agents multicast address, using the link-local scope to ensure that the message isn't forwarded, by default, beyond the local link. An agent either a DHCPv6 server or a relay, such as a router.

In DHCPv4 (IPv4 addressing), you configured the IP Helper feature on Cisco routers when the DHCP server was not on the same segment as the requesting clients. IP Helper has the router redirect a DHCP request either to a particular server or directed broadcast address of the segment that had one or more DHCP servers.
This is no longer necessary in DHCPv6: if no server is on the link, a relay can forward the request to the ALL-DHCP-Agents multicast address with the site-local scope. You still have the option of oding this  statically, and this is necessary if you want to control which DHCPv6 server or servers should process the request.

### Stateless Autoconfiguration

*Stateless* autoconfiguration is an extension of DHCPv6.

As with DHCPv6, clients can acquire their addressing dynamically; however, with stateless autoconfiguration, no DHCP server is necessary to assign IPv6 addressing information to the clients. Instead, the client uses information in router advertisement messages to configure an IPv6 address for the interface.
This is accomplished by taking the first 64 bits in the router advertisement source address (the prefix of the router's address) adn using the EUI-64 process to create the 64-bit interface ID.

Stateless autoconfiguration was designed primarly for cell phones and home network and appliance equipment to assign addresses automatically without having to manage a DHCP server infrastructure.
Devices will verify that their address is unique before using it via neighbor query messages using ICMPv6.

Normally, routers generate periodic router advertisement (RA) messages the client can listen to and then use to generate its link address automatically; however, when the client is booting up, waiting for the RA may take awhile. In this situation, the client will generate a router solicitation message, asking the router to reply with an RA so the client can generate its interface address.
Information that can be obtained via stateless autoconfiguration include:
* The network numbers (prefixes)
* The lifetime of the prefixes
* A flag that indicates the kind of autoconfiguration the end stations can perfom (stateless or stateful)
* The default router for the prefix(es) and the lifetime for this value
* The default maximum transmission unit (MTU) size for the segment
* The maximum hop count allowed

Other information can also be obtained, but this list comprises the most common parameters

---

## Routing and IPv6

As in IPv4, routers in IPv6 find best paths to destinations based on metrics and administrative distances; and like IPv4, IPv6 routers look for the longest matching prefix in the IPv6 routing table to forward a packet to its destination.
The main difference is that the IPv6 router is looking at 128 bits when making routing decision instead of 32 bits.

### Supported Routing Protocols

IPv6 supports both static and dynamic routing protocols. (static, Routing Information next generation (RIPng), Open Shortest Path First (OSPFv3), Intermediate System-Intermediate System (IS-IS) for IPv6, Multiprotocol Border Gateway Protocol (MP-BGP4), and Enhanced Interior Gateway Routing Protocol (EIGRP) for IPv6)

#### RIPng

RIPng is defined in RFC 2080. It is actually similar to RIP for IPv4, with these characteristics:

* It's distance vector protocol
* The hop-count limit is 15.
* Split horizon and poison reverse are used to prevent routing loops.
* It is based on RIPv2

These are enhancements in RIPng:

* An IPv6 packet is used to transport the routing update
* The all RIP routers multicast address (FF02::9) is used as the destination address in routing advertisements and is delivered to UDP port 521.
* Routing updates contain the IPv6 prefix of the router and the next-hop IPv6 address.

#### OSPFv3

OSPFv3 is the version of OSPF to support IPv6 and has been enhanced with many features, making it just as scaleable as other interior gateway protocols.
The protocol number for OSPF is 89.

* The OSPFv3 process requires a router ID, just as in OSPFv2 (IPv4).
	* This is a 32-bit number that must statically be configured: it cannot be acquired by and IPv4 address on the routing device, since you may not even be using IPv4 on the routing device.
* When forming adjacencies, the routers use their link-local addresses as their source.
	* The link-local addresses appear in the link state database and routing table for next-hop addresses.
* Because link-local addresses are used, conflicting global addresses on the interfaces will not prevent adjacencies from being formed: in other words, the global addressing structure has been abstracted from the interface.
	* In OSPFv2, this would cause routers to fail building an adjacency, but it doesn't cause a problem in OSPFv3.
* Any router within an area can perform summarization or filtering.
	* This was one of the biggest weakness of OSPFv2 compared to EIGRP.
	* In OSPFv2, only area boundary routers (ABRs) and autonomous system boundary routers (ASBRs) could do summarization or filtering, whereas an EIGRP router could do this. This greatly limited the scalability of OSPFv2. OSPFv3 no longer has this issue.

#### EIGRP for IPv6

EIGRP has been updated to support IPv6 routing and is now referred to as EIGRP for IPv6.

EIGRP for IPv6 is a stand-alone process and not part of the EIGRP for IPv4 configueration. It supports the same features as its older EIGRP implemenation for IPv4: diffusing update algorithm (DUAL), rich metric structure, load balancing, and many others.

#### Implementation Strategies

| Transition Method                                                  | Desc                                                                                                                                                                                                                                                                        |
| ------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Dual stacking                                                      | Devices such as PCs and routers run both IPv4 and IPv6, and thus have two sets of addresses.                                                                                                                                                                                |
| Manual IPv6-over-IPv4 (6to4) tunneling                             | IPv6 packets are tunneled across an IPv4 network by encapsulating them in IPv4 packets. This requires routers configured with dual stacks.                                                                                                                                  |
| Dynamic 6to4 tunneling                                             | Enables IPv6 localities to connect to other IPv6 localities across an IPv4 backbone, such as the Internet, automatically. This method applies a unique IPv6 prefix to each locallity without having to retrive IPv6 addressing information from address registries or ISPs. |
| Intra-Site Automatic Tunnel Addressing Protocol (ISATAP) tunneling | Uses virtual links to connect IPv6 localities together within a site that is primary using IPv4. Boundary routers between the two addressing types must be configured with dual stacks.                                                                                     |
| Teredo tunneling                                                   | Instead of using routers to tunnel packets, the hosts perform the tunneling. This requires the hosts to be configured with dual stacks. It is commonly used to move packets through an IPv4 address translation device.                                                     |
| NAT Proxying and Translation (NAT-PT)                              | Has an address translation device translate address between an IPv6 and IPv4 network, and vice versa                                                                                                                                                                        |

#### Dual Stacking

In dual stacking, a device runs both protocol stacks: IPv4 and IPv6. Of all the transition methods, this is the most common one.

Dual stacking can be accomplished on the same interface or different interfaces of the device.

![[Pasted image 20251107021215.png]]

Older IPv4-only applications can still work while they are migrated to IPv6 by supporting newer APIs to handle IPv6 addresses and DNS lookups with IPv6 addresses.

> The main disadvantage of dual stacking on a segment is that devices configured using only one stack must forward their traffkc to a dual stacked device, such as a router, which must then forward the traffic back to the same segment using the other stack. This is an inefficient use of bandwidth, but it does enable devices using both protocol stacks to coexist on the same network segment.


#### IPv6 Tunneling

IPv6 tunneling enables you to tunnel IPv6 packets by carring them as payloads in an IPv4 packet.

![[Pasted image 20251107021522.png]]

Using tunneling, you can connect IPv6 networks together across an intermediate IPv4 network.
When tunneling IPv6 packets in an IPv4 payload, the IPv4 Protocol field contains a value of 41, indicating that IPv6 tunneling is occuring.
The two routers performing the tunneling must be configured using dual stacking, since they need to communicate with both IPv6 and IPv4 devices on different segments.

If you are configuring the tunnel manually, you'll need to configure both the IPv4 and IPv6 addresses statically. You'll also need to ensure that routing is performing normally to tunnel the IPv6 packets across the IPv4 network, as well as allowing the two IPv6 networks, to see each other's routes.

---

## IPv6 Configuration

### Enabling IPv6 and Assigning Addresses

To use IPv6 on your router, you must, at a minimum, enable the protocol and assign IPv6 addresses to your interfaces

```
IOS(config)# ipv6 unicast-routing
IOS(config)# interface TYPE
IOS(config-if)# ipv6 address IPv6_ADDR_PREFIX/PREFIX_LENGTH
					[eui-64]
```

The `ipv6 unicast-routing` command globally enables IPv6 and must be the first IPv6 command executed on the router.
The `ipv6 address` command assigns the prefix, the length, and the use of EUI-64 to assign the interface ID. Optionally, you can omit the `eui-64` parameter and configure the entire IPv6 address.

To use stateless autoconfiguration

```
IOS(config-if))# ipv6 address autoconfig [default]
```

In a default router is selected on this interface, the `default` parameter causes a default route to be installed using that default router.
The `default` parameter can be specified only on one interface.

You can use the `show ipv6 interface` command to verify an interface's confguration.
You can use the `ping` and `traceroute` commands to test connectivity with IPv6.
Remember that you can test connectivity to link-local addresses only in the same VLAN; however, you can test access to global addresses in the same or different VLANs.

To set up a static DNS resolution table on the router, use the `ipv6 host` command; you can also specify a DNS server with the `ip name-server` command:

```
IOS(config)# ipv6 host HOSTNAME [port_#] IPv6_ADDR1 [IPv6_ADDR2...]
IOS(config)# ip name-server DNS_server_IPv6_ADDR
```

The `ip name-server` command can be used to assign both IPv4 and IPv6 DNS servers.

### IPv6 Static Routing

Configuring an IPv6 sstatic route is similar to configuring an IPv4 static route.

```
IOS(config)# ipv6 route PREFIX/BITS IPv6_NEXT_HOP_ADDR
							ADMINISTRATIVE_DISTANCE
```

The *prefix* is the network number, with the corresponding number of bits of the network number, you want to reach. For a default route, use ::/0 as the prefix.

To view the IPv6 routes in the routing device's routing table, use the `show ipv6 route` command.

### RIPng

You enable RIPng a little differently than RIP for IPv4. First, you use the `ipv6 router rip TAG` command to enable RIPng globally

```
IOS(config)# ipv6 unicast-routing
IOS(config)# ipv6 router rip TAG
```

If you haven't enabled IPv6 unicast routing, you must do this first. When executing the `ipv6 router rip` command, this takes you into subcommand mode, where you can change some of the global vlaues for RIPng, such as disabling split horizon, changing the administrative distance, and adjusting timers.
The *tag* is a locally significant identifier used to differentiate between multiple RIP processes running on the router.

Unlike RIP for IPv6, RIPng has no `network` command to include interfaces. Instead, you must enable RIPng on per-interface basis with the `ipv6 rip tag enable` command.

The `tag` parameter associates the interface with the correct RIPng routing process.

To view the routing protocol configuration, use the `show ipv6 rip` command.

### OSPFv3

#### OSPFv3 Global Configuration

As in OSPFv2, in OSPFv3 you enable a process globally and can perform certain functions within the process, such as assigning the router ID and defining the areas:

```
IOS(config)# ipv6 router PROCESS_ID
IOS(config-router)# router-id ROUTER_ID
IOS(config-router)# area AREA_NUMBER
```

The process ID, as in OSPFv2, uniquly identifies the OSPF process locally running on the routing device (it is locally significant and is not shared with other OSPFv3 routing devices).
The router ID is a 32-bit number typically represented using a dotted-decimal format.
The area number is also a 32-bit number, which can be represented by a decimal (12) or a dotted-decimal (0.0.0.12) format.

#### OSPFv3 Interface Configuration

Once you set up the global properties for OSPFv3, you must place interfaces into the local process.
Unlike OSPFv2, where you used the `network` command within the OSPFv2 routing process configuration, IPv6's configuration is like RIPng, where you perform the configuration under an interface.

```
IOS(config-if)# ipv6 ospf PROCESS_ID area AREA_#
```

#### Simple OSPFv3 Configuration Example

```
### enable ipv6
IOS(config)# ipv6 unicast-routing

### enable ospfv3 with process id 1
IOS(config)# ipv6 router ospf 1

### router configuration
IOS(config-router)# router-id 0.0.0.1

### interface configuration
IOS(config)# interface g1/0/1
IOS(config-if)# ipv6 ospf 1 area 0
IOS(config-if)# interface g1/0/2
IOS(config-if)# ipv6 ospf 1 area 0
```

#### OSPFv3 Verification

Once you've configured OSPFv3, you can verify the operation of OSPFv3 by using `show` commands.

```
IOS# show ipv6 ospf
IOS# show ipv6 ospf neighbors

...

```

### EIGRP for IPv6

The scaleability features in EIGRP for IPv4, neighbor discovery, the DUAL algorithm, metrics, load balancing, multicast, and incremental updates, are also abailable in EIGRP for IPv6.

Like EIGRP for IPv4, EIGRP for IPv6 uses hello packets to discover and become neighbors with other local EIGRP for IPv6 routers. Also uses multicasts, but the FF02::A IPv6 multicast link-local address is used.

#### EIGRP for IPv6 Global Configuration

```
### Enable IPv6
IOS(config)# ipv6 unicast-routing

### Specifies the autonomous system
IOS(config)# ipv6 router eigrp AUTONOMOUS_SYSTEM

### Defines router's 32-bit ID
IOS(config-rtr)# eigrp router-id ROUTER_ID

### Disable or enables EIGRP process
IOS(config-rtr)# [no] shutdown
```

#### EIGRP for IPv6 Interface Configuration

Once you set up the global properties for EIGRP for IPv6, you must place interfaces into the local process.
Unlike EIGRP for IPv4, where you use the `network` command within the EIGRP routing process configuration, IPv6's configuration is similar to that of RIPng and OSPFv3, where you perform the configuration under an interface.

```
IOS(config-if)# ipv6 eigrp AUTONOMOUS_SYSTEM
```

#### EIGRP for IPv6 Simple Configuration

```
# placing two interfaces in autonomous system 100
### Enable IPv6
IOS(config)# ipv6 unicast-routing

### Specifies the autonomous system
IOS(config)# ipv6 router eigrp 100

### Define router's ID
IOS(config-router)# eigrp router-id 100.1.1.1

### enable EIGRP
IOS(config-rotuer)# no shutdown

### place interfaces
IOS(conig)# interface g1/0/1
IOS(config-if)# ipv6 eigrp 100
IOS(config-if)# interface g1/0/2
IOS(config-if)# ipv6 eigrp 100
```

#### EIGRP for IPv6 Verfification

To verify the neighbor relationsips for EIGRP for IPv6: `show ipv6 eigrp neighbors`.
To display entries in the EIGRP: `show ipv6 eigrp topology`
To view the EIGRP routes in the routing table: `show ipv6 route eigrp`

### Exercise 14-1: Configuring IPv6 Static Routing

![[Pasted image 20251108122619.png]]

**VAN-R1**

```
VAN-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### enable ipv6
VAN-R1(config)#ipv6 unicast-routing

### assign ip address
VAN-R1(config)#interface F0/0
VAN-R1(config-if)#ipv6 address 2001:aaaa:bbbb:1::1/64
VAN-R1(config-if)#no shutdown
VAN-R1(config-if)#interface S1/0
VAN-R1(config-if)#ipv6 address 2001:aaaa:bbbb:2::1/64
VAN-R1(config-if)#no shutdown

### verify
VAN-R1(config-if)#do show ipv6 interface brief
FastEthernet0/0        [up/up]
    FE80::C801:1FF:FE18:0
    2001:AAAA:BBBB:1::1
Serial1/0              [up/up]
    FE80::C801:1FF:FE18:0
    2001:AAAA:BBBB:2::1
Serial1/1              [administratively down/down]
    unassigned
Serial1/2              [administratively down/down]
    unassigned
Serial1/3              [administratively down/down]
    unassigned
FastEthernet2/0        [administratively down/down]
    unassigned
FastEthernet2/1        [administratively down/down]
    unassigned
GigabitEthernet3/0     [administratively down/down]
    unassigned
VAN-R1(config-if)#
```

**LA-R1**

```

LA-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### enable ipv6
LA-R1(config)#ipv6 unicast-routing

### assign ip address
LA-R1(config)#interface F0/0
LA-R1(config-if)#ipv6 address 2001:aaaa:bbbb:3::1/64
LA-R1(config-if)#no shutdown
LA-R1(config-if)#interface S1/0
LA-R1(config-if)#ipv6 address 2001:aaaa:bbbb:2::2/64
LA-R1(config-if)#no shutdown

### verify
LA-R1(config-if)#do show ipv6 interface brief
FastEthernet0/0        [up/up]
    FE80::C802:1FF:FE33:0
    2001:AAAA:BBBB:3::1
Serial1/0              [up/up]
    FE80::C802:1FF:FE33:0
    2001:AAAA:BBBB:2::2
Serial1/1              [administratively down/down]
    unassigned
Serial1/2              [administratively down/down]
    unassigned
Serial1/3              [administratively down/down]
    unassigned
FastEthernet2/0        [administratively down/down]
    unassigned
FastEthernet2/1        [administratively down/down]
    unassigned
GigabitEthernet3/0     [administratively down/down]
    unassigned
```

**test**

```
LA-R1#ping 2001:aaaa:bbbb:2::1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 2001:AAAA:BBBB:2::1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 4/12/24 ms
LA-R1#
```

**add static route**

```
# VAN-R1
VAN-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### Add static route
VAN-R1(config)#ipv6 route 2001:aaaa:bbbb:3::/64 2001:aaaa:bbbb:2::2
VAN-R1(config)#exit

### route verify
VAN-R1#show ipv6 route
IPv6 Routing Table - default - 6 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
       B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP
       H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea
       IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO
       ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect
       O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2
       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, la - LISP alt
       lr - LISP site-registrations, ld - LISP dyn-eid, a - Application
C   2001:AAAA:BBBB:1::/64 [0/0]
     via FastEthernet0/0, directly connected
L   2001:AAAA:BBBB:1::1/128 [0/0]
     via FastEthernet0/0, receive
C   2001:AAAA:BBBB:2::/64 [0/0]
     via Serial1/0, directly connected
L   2001:AAAA:BBBB:2::1/128 [0/0]
     via Serial1/0, receive
S   2001:AAAA:BBBB:3::/64 [1/0]
     via 2001:AAAA:BBBB:2::2
L   FF00::/8 [0/0]
     via Null0, receive
       
# LA-R1
LA-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### Add static route
LA-R1(config)#ipv6 route 2001:aaaa:bbbb:1::/64 2001:aaaa:bbbb:2::1
LA-R1(config)#exit

### verify
LA-R1#show ipv6 route
IPv6 Routing Table - default - 6 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
       B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP
       H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea
       IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO
       ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect
       O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2
       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, la - LISP alt
       lr - LISP site-registrations, ld - LISP dyn-eid, a - Application
S   2001:AAAA:BBBB:1::/64 [1/0]
     via 2001:AAAA:BBBB:2::1
C   2001:AAAA:BBBB:2::/64 [0/0]
     via Serial1/0, directly connected
L   2001:AAAA:BBBB:2::2/128 [0/0]
     via Serial1/0, receive
C   2001:AAAA:BBBB:3::/64 [0/0]
     via FastEthernet0/0, directly connected
L   2001:AAAA:BBBB:3::1/128 [0/0]
     via FastEthernet0/0, receive
L   FF00::/8 [0/0]
     via Null0, receive
```

**Routing test**

```
LA-R1#ping 2001:aaaa:bbbb:1::1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 2001:AAAA:BBBB:1::1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 4/12/28 ms
```

**Save configurations**

```
VAN-R1#copy running-config startup-config
Destination filename [startup-config]?
Warning: Attempting to overwrite an NVRAM configuration previously written
by a different version of the system image.
Overwrite the previous NVRAM configuration?[confirm]
Building configuration...
[OK]

LA-R1#copy running-config startup-config
Destination filename [startup-config]?
Warning: Attempting to overwrite an NVRAM configuration previously written
by a different version of the system image.
Overwrite the previous NVRAM configuration?[confirm]
Building configuration...
[OK]
```

### Exercise 14-2: Configuring OSPFv3 Routing

* Remove static routing
* Configure OSPFv3 routing protocol

**Remove static routing**

```
# VAN-R1
VAN-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### remove static route
VAN-R1(config)#no ipv6 route 2001:aaaa:bbbb:3::/64

### verify
VAN-R1(config)#do show ipv6 route
IPv6 Routing Table - default - 5 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
       B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP
       H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea
       IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO
       ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect
       O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2
       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, la - LISP alt
       lr - LISP site-registrations, ld - LISP dyn-eid, a - Application
C   2001:AAAA:BBBB:1::/64 [0/0]
     via FastEthernet0/0, directly connected
L   2001:AAAA:BBBB:1::1/128 [0/0]
     via FastEthernet0/0, receive
C   2001:AAAA:BBBB:2::/64 [0/0]
     via Serial1/0, directly connected
L   2001:AAAA:BBBB:2::1/128 [0/0]
     via Serial1/0, receive
L   FF00::/8 [0/0]
     via Null0, receive
     
### test route
VAN-R1(config)#do ping 2001:aaaa:bbbb:3::1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 2001:AAAA:BBBB:3::1, timeout is 2 seconds:

% No valid route for destination
Success rate is 0 percent (0/1)

# LA-R1
LA-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### remove static route
LA-R1(config)#no ipv6 route 2001:aaaa:bbbb:1::/64

### verify
LA-R1(config)#do show ipv6 route
IPv6 Routing Table - default - 5 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
       B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP
       H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea
       IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO
       ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect
       O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2
       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, la - LISP alt
       lr - LISP site-registrations, ld - LISP dyn-eid, a - Application
C   2001:AAAA:BBBB:2::/64 [0/0]
     via Serial1/0, directly connected
L   2001:AAAA:BBBB:2::2/128 [0/0]
     via Serial1/0, receive
C   2001:AAAA:BBBB:3::/64 [0/0]
     via FastEthernet0/0, directly connected
L   2001:AAAA:BBBB:3::1/128 [0/0]
     via FastEthernet0/0, receive
L   FF00::/8 [0/0]
     via Null0, receive
     
### test route
LA-R1(config)#do ping 2001:aaaa:bbbb:1::1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 2001:AAAA:BBBB:1::1, timeout is 2 seconds:

% No valid route for destination
Success rate is 0 percent (0/1)

```

**Configure OSPFv3**

```
# VAN-R1
VAN-R1#config t
Enter configuration commands, one per line.  End with CNTL/Z.

### OSPFv3 configuration
VAN-R1(config)#ipv6 unicast-routing
VAN-R1(config)#ipv6 router ospf 1
VAN-R1(config-rtr)#router-id 0.0.0.1
VAN-R1(config-rtr)#exit

### interface configuration
VAN-R1(config)#interface F0/0
VAN-R1(config-if)#ipv6 ospf 1 area 0
VAN-R1(config-if)#interface S1/0
VAN-R1(config-if)#ipv6 ospf 1 area 0

# LA-R1
LA-R1#config t

### OSPFv3 configuration
LA-R1(config)#ipv6 unicast-routing
LA-R1(config)#ipv6 router ospf 1
LA-R1(config-rtr)#router-id 0.0.0.2
LA-R1(config-rtr)#exit

### Interface configuration
LA-R1(config)#interface F0/0
LA-R1(config-if)#ipv6 ospf 1 area 0
LA-R1(config-if)#interface S1/0
LA-R1(config-if)#ipv6 ospf 1 area 0
LA-R1(config-if)#exit
```

**Verify OSPFv3**

```
### PING
VAN-R1#ping 2001:aaaa:bbbb:3::1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 2001:AAAA:BBBB:3::1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 8/10/12 ms

LA-R1#ping 2001:aaaa:bbbb:1::1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 2001:AAAA:BBBB:1::1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 8/13/28 ms

LA-R1#show ipv6 interface brief
FastEthernet0/0        [up/up]
    FE80::C802:1FF:FE33:0
    2001:AAAA:BBBB:3::1
Serial1/0              [up/up]
    FE80::C802:1FF:FE33:0
    2001:AAAA:BBBB:2::2
Serial1/1              [administratively down/down]
    unassigned
Serial1/2              [administratively down/down]
    unassigned
Serial1/3              [administratively down/down]
    unassigned
FastEthernet2/0        [administratively down/down]
    unassigned
FastEthernet2/1        [administratively down/down]
    unassigned
GigabitEthernet3/0     [administratively down/down]
    unassigned

LA-R1#show ipv6 route
IPv6 Routing Table - default - 6 entries
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
       B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP
       H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea
       IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO
       ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect
       O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2
       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, la - LISP alt
       lr - LISP site-registrations, ld - LISP dyn-eid, a - Application
O   2001:AAAA:BBBB:1::/64 [110/65]
     via FE80::C801:1FF:FE18:0, Serial1/0
C   2001:AAAA:BBBB:2::/64 [0/0]
     via Serial1/0, directly connected
L   2001:AAAA:BBBB:2::2/128 [0/0]
     via Serial1/0, receive
C   2001:AAAA:BBBB:3::/64 [0/0]
     via FastEthernet0/0, directly connected
L   2001:AAAA:BBBB:3::1/128 [0/0]
     via FastEthernet0/0, receive
L   FF00::/8 [0/0]
     via Null0, receive

LA-R1#show ipv6 ospf
 Routing Process "ospfv3 1" with ID 0.0.0.2
 Supports NSSA (compatible with RFC 3101)
 Event-log enabled, Maximum number of events: 1000, Mode: cyclic
 Router is not originating router-LSAs with maximum metric
 Initial SPF schedule delay 5000 msecs
 Minimum hold time between two consecutive SPFs 10000 msecs
 Maximum wait time between two consecutive SPFs 10000 msecs
 Minimum LSA interval 5 secs
 Minimum LSA arrival 1000 msecs
 LSA group pacing timer 240 secs
 Interface flood pacing timer 33 msecs
 Retransmission pacing timer 66 msecs
 Retransmission limit dc 24 non-dc 24
 Number of external LSA 0. Checksum Sum 0x000000
 Number of areas in this router is 1. 1 normal 0 stub 0 nssa
 Graceful restart helper support enabled
 Reference bandwidth unit is 100 mbps
 RFC1583 compatibility enabled
    Area BACKBONE(0)
        Number of interfaces in this area is 2
        SPF algorithm executed 2 times
        Number of LSA 7. Checksum Sum 0x01D855
        Number of DCbitless LSA 0
        Number of indication LSA 0
        Number of DoNotAge LSA 0
        Flood list length 0
```

---

## Chapter Review

Because of the limited number of remaining addresses in IPv4, IPv6 was designed to bring the Internet into its next generation.
IPv6 addresses use eight sets of four hexadecimal addresses (16 bits in each set), separated by a colon (:), like this: `xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx`.
If you have successive fields of zeros in an IPv6 address, you can represent by using two colons (::), However, you can use only *once* in the address.

IPv6 addresses come in three basic types: anycast, multicast, and unicast.
An anycast address is very different from an IPv4 broadcast: it represents a one-to-the-nearest interface, where many interfaces can share the same address.
A multicast address is similar to a multicast in IPv4: one-to-many.
A unicast address represents a single interface. Global unicast addresses are 2000:/3.
A loopback is ::1.
Site local private addresses range from FEC:: through FFF::, and link-local addresses range from EF8:: through FEB::.

Many of the IPv4 fields in the IP header have been deprecated and are no longer used today.
The IPv6 header has been simplified and streamlined to make it more efficient for today's networks. Some protocols, such as ARP and IGMP, have also been deprecated. Their functions are now performed by ICMPv6, which also has some new functions, including router, DNS server, and neighbor discovery.

The most common way of assigning static addresses to an interface is to use the EUI-64 method. DHCP and stateless autoconfiguration enable a device to acquire an address dynamically.
Stateless autoconfiguration accomplishes this by requesting that a router give the subnet ID and the device using EUI-64 to acquire an interface ID dynamically.

Routing protocols supported in IPv6 include static, RIPng, OSPFv3, IS-IS for IPv6, MP-BGP4, and EIGRP for IPv6.
RIPng uses UDP port 521 for its connections. Its destination multicast address is FF02::9.

The most common translation methods to move from IPv4 to IPv6 include dual stacking and 6to4 tunneling.
In dual stacking, a device runs both protocol stacks.
In 6to4 tunneling, IPv6 packets are encapsulated in an IPv4 packet to move across an IPv4 backbone to another IPv6 network.

You must first execute the `ipv6 unicast-routing` command to enable IPv6.
An address must be assigned to each interface, typically using the EUI-64 method, for it to process IPv6 packets.
RIPng must be configured globally and then enabled on a per-interface basis.
A tag is used to specify the RIPng routing process to which an interface belongs. 
Like RIPng, OSPFv3 and EIGRP must be configured globally and then enabled on a per interface basis.
In the OSPFv3 Global Configuration, you define the router ID and the area numbers; you then associate the interfaces to the areas for an OSPF process.
For EIGRP, the Global Configuration requires you to configure an autonomous system number and, possibly, bring up the routing process with the `no shutdown` command.

---

## Quick Review

## Neccessity of IPv6

IPv6 addresses are 128bits in length
IPsec is built into the IPv6 protocol and allows for device roaming without losing connectivity.

## IPv6 Addressing

* IPv6 addresses use eight sets of for hexadecimal addresses (16 bits in each set), sepearted by a colon (:).
* If you have successive fields of zeros in an IPv6 address, you can represent them using two colons (::), but this can used only once in an address
* An anycast address represents the nearest interface to a device, where many devices can share an anycast address. Multicast addresses begin with FF.
* Global unicast addresses are public addresses, similar in purpose to IPv4 public addresses. Global unicast addresses begin with 2 or 3.
* Site-local/unique local addresses are similar in purpose to IPv4 private addresses and always start with FEC:: through FFF::. It is common to see reference to FEC0 for site-local/unique local addresses.
* Link-local addresses are similar in purpose to APIPA addresses in IPv4 and start with FE80.
* The subnet ID is the first 64 bits and the interface ID is the last 64 bits. EUI-64 enables dynamic creation of the interface ID portion by using the MAC address on the interface.

## IPv6 Enhancements

* The IPv6 header has been updated and simplified because some of the fields in the IPv4 header have no relevance today.
* ICMPv6 has been enhanced. ICMPv6 takes over the responsibilities of the IPv4 ARP and IGMP protocols, and it also performs neighbor, router, and DNS server discovery services.

## Address Assignments

* DHCPv6 and stateless autoconfiguration enable interfaces to acqurie their addressing dynamically.
* Stateless autoconfiguration enables an interface to learn the subnet ID from a rotuer and dynamically create the interface ID using the EUI-64 method.

## Routing and IPv6

* Supported routing protocols for IPv6 include static, RIPng, OSPFv3, IS-IS for IPv6, MP-BGP4, and EIGRP for IPv6.
* RIPng is based on RIPv2. The all RIP routers multicast address is FF02::9 and is sent via UDP to port 521.
* In dual stack, a device runs both the IPv4 and IPv6 protocol stacks. And 6to4 tunneling tunnels IPv6 packets in an IPv4 payload to connect two IPv6 networks via an intermediate IPv4 network.

## IPv6 Configuraiton

* The `ipv6 unicast-routing` command globally enables IPv6 and must be the first IPv6 command executed on the router. The `ipv6 address` command assigns the prefix, the length, and the use of EUI-64 to assign the interface ID.
* The `ipv6 router rip tag` command enables an RIPng routing process on the router. The `ipv6 rip tag enable` command associates an interface to a particular RIPng routing process. The `show ipv6 rip` command displays the configuration of the RIPng routing process. The `show ipv6 route rip` command displays the RIPng routes in the IPv6 routing table.
* The `ipv6 router ospf process_id` command takes you into the OSPFv3 routing process, and the `router-id` and `area` commands define the router's ID and the areas the router is connected to. The `ipv6 ospf process_id area area_#` command associates an interface to a particular OSPF routing process and area.
* The `ipv6 router eigrp autonomous` command takes you into the EIGRP for IPv6 routing process, and the `no shutdown` comamnd enables the EIGRP for IPv6 process (this is required in certain versions of IOS). The `ipv6 eigrp autonomous_system` command associates an interface to a particular EIGRP for IPv6 autonomous system.

---

### Questions

1.  You are configuring OSPF for IPv6 on your router that has the
following interfaces configured:

```
G0/0: 192.168.2.1/24
S0/3/0: 192.168.3.1/24
```

You would like to configure OSPF to route traffic for the G0/0 interface only. What commands would you use to enable routing of IPv6 with OSPF on the G0/0 interface?

A. R1(config)#ipv6 unicast-routing
	R1(config)#ipv6 ospf 10
	R1(config-rtr)#router-id 0.0.0.1
B. R1(config)#ipv6 ospf 10
	R1(config)#router-id 0.0.0.1
C. R1(config)#ipv6 ospf 10
	R1(config)#network 192.168.2.0
**D. R1(config)#ipv6 unicast-routing
	R1(config)#ipv6 router ospf 10
	R1(config-rtr)#router-id 0.0.0.1
	R1(config)#interface G0/0
	R1(config-if)#ipv6 ospf 10 area 0**

2.  Which of the following are valid IPv6 unicast addresses? (Choose two.)

A. 2001::567::891:: ## Three double colon
**B. 2000::57**
**C. 2000:FFEE:7878:1111:1:2:7:E**
D. 2001:: ## Global unicast

3.  Which of the following best describes an anycast address?

A. One-to-all # broadcast
B. One-to-many
C. Single interface # unicast
**D. One-to-nearest**

4.  Which of the following represents a global unicast address?

**A. 2001:FFEE:7880::**
B. FF80::9868:1122:ABCD:1234
C. ::1
D. None of the above

5.  Which of the following IPv4 protocols have been replaced by
functions performed by ICMPv6? (Choose two.)

**A. ARP**
B. RIP
C. DHCP
**D. IGMP**

6.  Which of the following enables a router to forward a DHCP request to a remote DHCP server?

A. DHCP solicit
B. Stateless autoconfiguration
C. Stateful autoconfiguration
**D. IP Helper**

7.  Which of the following is true concerning RIPng?

A. Uses 6to4 to share routing information with neighboring routers
**B. Uses a multicast address of FF02::9**
C. Uses TCP as a transport # uses UDP port 521
D. Uses port 520 # uses UDP port 521

8.  Match the transition method with its description:

| Translation method | Desc                                             |
| ------------------ | ------------------------------------------------ |
| dual stack         | both protocol stacks are operational on a device |
| 6to4 tunneling     | IPv6 packets are encapsulated in IPv4 payloads   |
| ISATAP             | virtual links connect IPv6 localities            |
| Teredo tunneling   | host-to-host tunneling                           |

9.  Which IPv6 command must be the first one entered on a Cisco router?

A. router ipv6-unicast
B. ipv6 address
**C. ipv6 unicast-routing**
D. ipv6 support enable

10.  What command would you use to configure your router to use a global IPv6 address based on the modified EUI-64 format?

A. Ipv6 address 2001:aaaa:bbbb:1::1/64
B. ipv6 enable
**C. ipv6 address autoconfig**
D. Ipv6 address FE80::/EUI-64

11.  Which router command enables RIPng on an interface?

**A. ipv6 rip tag enable**
B. network
C. ipv6 router rip tag
D. ripng enable tag

12.  Which of the following address types represents an IPv6 private address that is not routable on the Internet?

A. Global
B. Multicast
C. Loopback
**D. Unique-local**

### Performance-based Questions

1.  Looking at the following IPv6 network, what commands would you use to configure a primary route from router R3 to the Loopback interface on R1, and use the pathway of R2 as an alternate route? From the available commands on the left, draw a line from the appropriate commands on the left, into the two configuration spots of router R3

![[Pasted image 20251108144204.png]]

```
### Primary route (from R3 to the loopback interface on R1)
ipv6 route 2000::1/128 2015::1

### use the pathways of R2 as an alternative route
ipv6 route 2000::1/128 2024::5 10
```
