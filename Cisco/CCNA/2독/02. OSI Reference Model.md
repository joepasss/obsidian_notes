The Open Systems Interconnection (OSI) Reference model

## Layers of the OSI Reference Model

In the early 1980s, the International Organization for Standardizaition (ISO) defined a standard for manufacturers of networking components that would enable these networking components to communicate in dissimilar environments.

The product of standard is demonstrated in the seven layers of the OSI Reference Model: application, presentation, session, transport, network, data link, and physical.

Each layer is responsible for performing a specific process or role.

![[Pasted image 20251003043221.png]]

The functions of the first three layers (application, presentation, and session) are known as the *upper layers* of the OSI model, and they are typically controlled by the application software.
These layers are normally not controlled or modified by a network administrator.

Network administrators can use knowledge of the transport, network, data link, and physical layers to help troubleshoot network communication.
These four layers, known as the *lower layers* of the OSI model.

Each layer of the OSI model is responsible for communicating with the layers directly above and below it, receiving data from or passing data to its neighboring layers.
For example, the presentation layer will receive information from the application layer, format it appropriately, and then pass it to the session layer.
THe presentation layer will never deal directly with the transport, network, data link, or physical layers.

Network communication starts at the application layer of the OSI model (on the sending system) and works its way down through the layers to the physical layer.
The information passes along the communication medium to the receving system, which works its way back up the layers, starting at the physical layer.

![[Pasted image 20251003043829.png]]

When you're thinking of two devices communicating, such as two computers, it is important to understand that whatever action is done at one layer of a sending computer is undone at the same layer on the receiving computer.
For example, if the presentation layer compresses the information on the sending computer, then the data is uncompressed on the reciving computer.

![[Pasted image 20251003044052.png]]

### Layer 7: The Application Layer

The application layer running on the sending system is responsible for initiating the actual request.
This could be any type of networking request (HTTP, SMTP, FTP...).

On the receving system, the application layer would be responsible for passing the request to the appropriate application or service on that system.

### Layer 6: The Presentation Layer

After the request is maid, the application layer passes the data down to the presentation layer, where it is formatted so that the data (or request) can be interpreted by the receiving system.

When the presentation layer receives data from the application layer, it makes sure the data is in the proper format if it is not, the presentation layer converts the data accordingly.
On the receiving system, when the presentation layer receives network data from the session layer, it makes sure the data is in the proper format and once again converts it if is not.

Formatting functions that could occur at the sending system's presentation layer include compression, encryption, and ensuring that the character code set can be interpreted on the other side.
For example, if we choose to compress our data from the application that we are using, the application layer will pass that request to the presentation layer, but the presentation layer does the compression.
At the receiving end, this data must be decompressed so that it can be read.

### Layer 5: The Session Layer

The session layer manages the dialog between computers by establishing managing, and terminating communications between them.

When a session is esablished, three distinct phases are involved.
In the establishment phase, the requestor initiates the service and the rules for communication between two systems. These rules include such things as who transmits and when, as well as how much data can be sent at a time.

The data transfer phase, Both sides know how to talk to each other, what are the most efficient methods to use, and how to detect errors, all because of the rules defined in the first phase.

Finally, termination occurs when the session is complete, and communication ends in an orderly fashion.

### Layer 4: The Transport Layer

The transport layer handles functions such as reliable and unreliable delivery of the data.

For reliable transport protocols, the transport layer works hard to ensure reliable delivery of data to its destinations.

On the sending system, the transport layer is responsible for breaking the data into smaller parts, called *segments*, so that if retransmission is required, only the mission segments will be sent.

Mission segments are detected when the transport layer receives ACKs from the remote system upon receiving the packets.

At the receiving system, the transport layer is responsible for opening all of the packets and reconstructing the original message.

Another function of the transport layer is segment sequencing.
Sequencing is a connection-oriented service that takes segments that are received out of order and resequences them in the right order.

The transport layer also enables the option of specifiying a "service address", known as *port address*.
The port address enables the services or applications that are running on the systems to specify what application the request came from and what application the request is headed for by having each application use a unique port address on the system.

At this point, the request is broken into segements in prepartion for being delivered across the network, and transport-layer information (such as the transport protocol being used and any additional transport information) is appended to the request.
In this example, because we are dealing with a TCP/IP application, the source port and destination port are added.

#### Connection-Oriented Communication and Connectionless Communication

*Connection-Oriented communication* ensures reliable delivery of data from the sender to the receiver.
When establishing connection services, this form of communication requires that some sort of handshaking function be performed at the beginning of a communication session.
During this process, the two computers determine the rules for communication.
Handshaking also determines the proper way to terminate the session when finished.
This ensures that communication ends in an orderly manner.

A session is a reliable dialog between two computers.
Connection-oriented services can provide reliable communication, they are used when two comptuers need to communicate in a session.
Sessions are maintained until the two computers decide that they are finished communicating.

*Connectionless communication* is a form of communication in which the sending system does not "introduce" itself it just fires off the data.
Also, the destination computer does not notify the source when the information is received.
This type of communication is considered unreliable because there is no notification to guarantee delivery.

Connectionless communication can be faster than connection-oriented communication because the overhead of managing the session is not there, and after the information is sent, there is no second step to ensure that it was received properly.

Using a connectionless protocol at the transport layer means that the transport layer protocol is not guaranteeing delivery.
Higher layer protocols, however, such as application layer protocols, may incorporate functionality to guarantee delivery.

**Main functions of the transport layer**
* It sets up, maintains, and tears down a connection between two devices or systems.
* It can provide for the reliable for unreliable delivery of data across this connection.
* It breaks up data into smaller, more manageable segments
* It multiplexes connections, enabling multiple applications to send and receive data simultaneously on the same networking device.
* It can implement flow control through ready/not ready signals or windowing to ensure that one component doesn't overflow another with too much data on a connection. Both of these are used to avoid congestion and typically use buffering.

#### Segmentation

The information transferred between networking devices at the transport layer is divided into segments.
Segmentation is necessary to break up large amounts of data into more manageable sizes that the network can accomodate.

#### Communication Multiplexing

Because multiple connections may be established from one component to another component or to multiple components, some type of multiplexing function is needed to differentiate between data traversing the various connections.

This ensures that the transport layer can send data from a particular application to the correct destination and application, and, when receiving data from a destination, the transport layer can get the data to the right local application.

To accomplish connection multiplexing, a unique port number is assigned to each application.

#### Flow Control

Flow control is used to ensure that networking components don't send too much information to the destination, overflowing its receiving buffer space and causing it to drop some of the transmitted information.

Overflow is not good because the source will have to resend all the information that was dropped.

The transport layer can use two basic flow control methods:
* Ready/not ready signals
* Windowing

#### Ready/Not Ready Signals

When the destination receives more traffic than it can handle, it can send a *not ready* signal to the source, indicating that the source should stop transmitting data.
When the destination has a chance to catch up and process the source's data, the destination responds back to the source with a *ready* signal. Upon receiving the ready signal, the source can resume sending data.

Two problems are associated with the use of ready/not ready signals to implement flow control.
First, the destination may respond to the source with a not ready signal when its buffer fills up. While this message is on its way to the source, the source is *still sending* information to the destination, which the destination will probably have to drop because its buffer space is full.
The second problem with the use of these signals is that once the destination is ready to receive more information, it must first send a ready signal to the source, which must receive it before more information can be sent.
This causes a delay in the transfer of information.

Because of these two inefficencies with ready/not ready signals, they are not commonly used to implement flow control.
Sometimes this process is referred to as *stop/start*, where you stop transmitting for a period and then start retransmitting.

#### Windowing

*Windowing* is much more sophisticated method of flow control than using ready/not ready signals.

With windowing, a window size is defined that specifies how much data (segments) can be sent before the source has to wait for an acknowledgement (ACK) from the destination.
Once the ACK is received, the source can send the next batch of data (up to maximum defined in the window size).

Windowing accomplishes two things: First, flow control is enforced, based on the window size.
In many protocol implementations, the window size is dynamically negotiated up front and can be renegotiated during the lifetime of the connection.
This ensures that the most optimal window size is used to send data without having the destination drop anything.
Second, through the windowing process, the destination tells the source what was received.
This indicates to the soruce whether any data was lost along the way to the destination and enables the source to resend any missing information.
This provides reliability for a connection as well as better efficiency than ready/not ready protocols, such as TCP/IP's TCP, use windowing to implement flow control.

The window size chosen for a connection impacts its efficiency and throughput in defining how many segements (or bytes) can be sent before the source has to wait for an ACK.

**Importance of the size used for the window**
![[Pasted image 20251003223306.png]]

*Window size 1*
In this instance, the source sends one segment with a sequence number (in this case 1) and then waits for an ACK from the destination.
Depending on the transport protocol, the destination can send the ACK in different ways: it can send back a list of the sequence numbers of the segments it received, or it can send back the sequence number of the next segment it expects.
When the destination receives this segment, since the window size is 1, the destination will immediately reply with an ACK, indicating the receipt of this segment.

With a window size 1, the flow control process is not very quick or efficient.

*Window size 3*
With a window size of 3, the source can send three segments at once before waiting for an ACK.
Once segments are sent (each with its own unique sequence number: 1, 2, and 3), the source must wait for an ACK.
In this instance, the destination sends an ACK back with the number 4 in it, indicating that the fourth segment is expected next.
The source can then proceed to send segments 4, 5, and 6, and then wait for the destination's ACK.

In this case, having a larger window size is more efficient: only one ACK is required for every three segments that are sent. Therefore the larger the window size, the more efficient the transfer of information becomes.

This is not always the case, however. For example, let's assume that one segment get lost on its way to the destination.
![[Pasted image 20251003224005.png]]

In this example, the window size negotiated is 3. PC-A sends its first three segments, which are successfullly received by PC-B.
PC-B acknowledges the next segments it expects, which is 4.
When PC-A receives this ACK, it sends segments 4, 5, and 6. For some reason, segment 4 becomes lost and never reaches the destination, but segments 5 and 6 do arrive. The destination sends back an ACK of 4, indicating that segment 4 is expected next.

At this point, how PC-A reacts depends on the transport layer protocol that is used.

* PC-A understands that only segment 4 was lost therefore resends segment 4. It then sends segment 7 and 8, filling up the window size.
* PC-A dosen't understand what was or wasn't received, so it sends three segments starting at segment 4, indicated by PC-B.

if two segments are lost, the first option listed won't work unless the destination can send a list of lost segments.
Therfore, most protocol stacks that use windowing will implement the second option.

Given this behaviour, the size of the window can affect your performance. You would normally think that a window size of 100 would be very efficient; however, if the very first segment is lost, some protocols will have all 100 segments resent.

As mentioned earlier, most protocol stacks use a window size that is negotiated up front and can be renegotiated at any time.
Therfore, if a connection is experiencing a high number of errors, the window size can be dropped to a smaller value to increase efficiency.
And once these errors disappear of drop down to a lower rate, the window size can be increased to maximize the connection's throughput.

What makes this situation even more complicated is that the window sizes on the source and destination devices can be *different*.
For instance, PC-A might have a window size of 3, while PC-B has a window size of 10.
In this example, PC-A is allowed to send ten segments to PC-B before waiting for an acknowlegement, while PC-B is allowed to send only three segments to PC-A.

### Layer 3: The Network Layer

The network layer is responsible for managing logical addressing information in the packets and the delivery, or routing, of those packets by using information stored in a routing table.

The routing table is a list of available destinations that are stored in memory on the routers.

The network layer is responsible for working with logical addresses.
Logical addresses uniquely identify a system on the network and, at the same time, identify the network that the system resides on.
This is unlike a Media Access Control (MAC) address (the physical address burned into the network card), because a MAC address just gives the system a unique address and does not specify or imply what network the system lives on.
The logicaladdress is used by network-layer protocols to deliver the packets to the correct network.

For example, the request is comming from a web browser and is destined for a web serer, both of which are applications that run on TCP/IP.
At this point, the network layer will add the source address (the IP address of the sending system) and the destination address (the IP address of the destination system) to the packet so that the receiving system will know where the packet came from.

The network layer is responsible for four main functions:
* Defines logical address used at layer 3
* Finds paths, based on the network numbers of logical addresses, to reach destination components
* Connects different data link layer types together, such as Ethernet, Fiber Distributed Data Interface (FDDI), serial, and Token Ring
* Defines segmentation via the use of packets to transport information

To move information between devices that have different network numbers, a router is used.
Routers use information in the logical address to make intelligent decisions about how to reach a destination.
When a router receives a packet, it compares the destination address in the packet to its routing table to determine whether the router knows how to send data to that destination network.

### Layer 2: The Data Link Layer

At the data link layer, the data is converted from a packet to a pattern of electrical bit signals that will be used to send the data across the communication medium.

On the receiving system, the electrical signals will be converted to packets by the data link layer and then passed up to the network layer for further processing.

The data link layer is divided into two sublayers:
* **Logical link control (LLC)**
	* This is responsible for error correction and control functions
* **Media Access Control (MAC)**
	* This determines the physical addressing of the hosts.
	* Determines how the host places traffic on the medium (CSMA/CD vs. token passing)

The MAC sublayer maintains physical device addresses (commonly referred to as MAC address) for communicating with other devices on the network.
These physical addresses are burned into the network cards and constitute the low-level addresses used to determine the source and destiatnion of network traffic.

Note that the MAC address is used for communication on the local network segment, while the IP address is used for communication on different networks.

In our example, once the sending system's network layer appends the IP address information, the data link layer will append the MAC address information for the sending and receiving systems.
This layer will also prepare the data for the wrie by converting the packets to binary signals.
On the receiving system, the data link layer will convert the signals passed to it by the physical layer to data and then pass the packets to the network layer for further processing.

#### Layer 2 Frames

The data link layer defines how a networking component accesses the media to which it is connected, and it also defines the media's frame type and transmission method.
The frame includes the fields and components the data link layer uses to communicate with devices on the same wire or layer 2 topology.
This communication occurs only for components on the same data link layer media type (or same piece of wire), within the same network segment.
To traverse layer 2 protocols, Ethernet to Token Ring, for instance, a router is typically used.

Examples of layer 2 protocols and standards for local area network (LAN) connections include Institude of Electrical and Electronic Engineers (IEEE) 802.2, 802.3 and 802.5; Ethernet II; and FDDI.
Examples of layer 2 WAN protocols and techniques include Asynchronous Transfer Mode (ATM), Frame Relay, High-Level Data Link Control (HDLC), Point-To-Point Protocol (PPP), Synchronus Data Link Control (SDLC), Serial Line Internet Protocol (SLIP), and X.25.

The data link layer is also responsible for defining the format of layer 2 frames as well as the mechanics of how devices communicate with each other over the physical layer.

The data link layer is responsible for the following:
* Defining the MAC or hardware addresses
* Defining the physical or hardware topology for connections
* Defining how the network layer protocol is encapsulated in the data link layer frame
* Providing both connectionless and connection-oriented services
* Verifying the checksum of the received frame to ensure it is valid (if it is invalid, it is discarded)

#### Data Link Layer Addressing

The data link layer uses MAC, or hardware, addresses for communication.
For LAN communications, each machine on the same network segment or topology needs a unique MAC address.
A MAC address is 48 bits in length and is represented as a hexadecimal number, 12 characters in length.
To make it easier to read, the MAC address is represented in a dotted hexadeciaml format (FFFF.FFFF.FFFF). It is also common to see MAC addresses formatted in this way: FF:FF:FF:FF:FF:FF.

Since the MAC address uses hexadecimal numbers, the values used range from 0 to 9 and A to F, for a total of 16 values for a single digit.

Each manufacturer of network cards is assigned a unique 24-bit vendor ID, which is then used as the first 24 bits of a MAC address for any network cards created by that vendor.
Each vendor has one or more unique vendor IDs, with each making up the first half of a MAC address.

These first six digits are commonly called the *organizationally unique identifier (OUI)*. For example, one of Cisco's OUI value is `0000.0C`.
The last six digits are used to represent the network interface card (NIC) uniquely within the OUI value.

Theoretically, each NIC has a unique MAC address. In reality, however, this is probably not true. What is important for your purposes is that each of your device has a unique MAC address on its network card within the same *network segment*.
Some devices enable you to change this hardware address.

#### Communication Types

Different types of communication can occur on the network, and each of these uses a specific method of addressing to identify who a message is for.

Each data link layer frame contains two MAC addresses: a source MAC address of the machine creating the frame, and a destination MAC address for the device or devices intended to receive the frame.

**General types of communication**

| Type      | DESC                                             |
| --------- | ------------------------------------------------ |
| Unicast   | communication to single device on a segment      |
| Broadcast | communication to every devices on a segment      |
| Multicast | communication to a group of devices on a segment |

##### Unicast

A frame with a destination *unicast* MAC address is intended for only one network component on a segment.
For example, PC-A creates an Ethernet frame with a destination MAC address that contains PC-C's address.
When PC-A places this data link layer frame on the wire, all the devices on the segment receive it, but all systems except PC-C discard the frame because it is not destined for them.
This gives us one-on-one communication with unicast

#### Multicast

Unlike a unicast address, *multicast* communication represents communication to a group of devices on a segment.

The multicast group can contain no devices up to every device on a segment.
One of the interesting things about multicasting is that the membership of a group is *dynamic*.

##### Broadcast

A *broadcast* message is sent to all systems on the network.

PC-A puts a broadcast address in the destination field of the data link layer frame.
The layer 2 representation of a broad cast address is FF:FF:FF:FF:FF:FF.
This frame is then placed on the wire.

### Layer 1: The Physical Layer

The bottom layer of the OSI hierarchy is concerned only with moving bits of data on and off the network medium.
This includes the physical topology (or structure) of the network, the electrical and physical aspects of the medium used, and the encoding and timing of bit transmission and reception.

Once the network layer has appended the logical addresses and passed the data to the data link layer, where the MAC addresses were appended and the data was converted to electrical signals, the data is then passed to the physical layer so that it can be released on the communication medium.
On the receiving system, the physical layer will pick up the data off the wire and pass it to the data link layer, where it will ensure that the signal is destined for that system by reading the destination MAC address.

The physical layer is responsible for the physical mechanics of a network connection, which include the following:

* The type of interface used on the networking device
* The type of cable used for connecting devices
* The connectors used on each end of the cable
* The pin patterns used for each of the connections on the cable
* The encoding of a message on a singal by converting binary digits to a physical representation based on the media type, such as electrial for copper, light for fiber, or a radio wave for wireless

The type of interface, or NIC, can be a physical card that you put into a computer, such as a Gigabit Ethernet card, or a fixed interface on a router, such as a Gigabit Ethernet port on a Cisco router.

The physical layer is also responsible for how binary information is converted to a physical layer signal and vice versa.
For example, if the cable uses copper as a transport medium, the physical layer defines how binary 1s and 0s are converted into electrial signals by using different voltage levels.
If the cable uses fiber, the physical layer defines how 1s and 0s are represented using a light-emitting diode (LED) or laser with different light frequencies.

### Devices

When troubleshooting networking components, a network technician will find it useful to understand the layer of the OSI model at which the technology is running.

| Layer | Name      | Device                  |
| ----- | --------- | ----------------------- |
| 3     | Network   | Router                  |
| 2     | Data link | Switches, bridges, NICs |
| 1     | Physical  | Hubs and repeaters      |

### Exercise 2-1: Mixing and Mathcing OSI Model Definitions Encapsulation and De-encapsulation

![[Pasted image 20251004034222.png]]

Network (Layer 3) is responsible for the logical addressing and delivery of the packets

Presentation (Layer 6) is responsible for formatting the message

Data Link (Layer 2) is responsible for physical addressing and converting the data packets to electrical signals

Application (Layer 7) is responsible for creating, managing, and ending a dialog

Transport (Layer 4) is responsible for reliable delivery, sequencing, and breaking the message into packets.

Physical (Layer 1) is responsible for placing or removing the signal on and off the wire

Session (Layer 5) is responsible for initiating or receiving the network request

---

## Encapsulation and De-encapsulation

The term *data encapsulation* refers to the fact that as data is passed down the seven layers of the OSI model, header information is added to the message.
For example, when the information reaches layer 4 of the OSI model, a layer 4 header is added, which contains protocol information for that layer, such as the port number.
On the sending system, the layer 4 header is added and then the data is passed down to layer 3, where the layer 3 header is added to the left side of the data and layer 4 header.
On the receiving system, the message is passed up the OSI model.
The receiving system strips off the layer 2 header and reads the destination MAC address to ensure that this isystem is the desination of the message.

![[Pasted image 20251004035058.png]]

Generically speaking, *protocol data unit (PDU)* describes data as it passes through each layer of the OSI model.
At each layer, a new header is added to the data.

**PDU Terms**

| TERM    | LAYER                                         |
| ------- | --------------------------------------------- |
| Data    | Application, presentation, and session layers |
| Segment | Transport                                     |
| Packet  | Network                                       |
| Frame   | Data link                                     |
| Bits    | Physical                                      |

### Going Down the Protocol Stack

PC-A sends data to PC-B. In this example, assume that the data link layer is Ethernet and the physical layer is copper.

The first thing that occurs on PC-A is that the user, sitting in front of the computer, creates some type of information, or data, and then sends it to another location (PC-B). This includes the actual user input (application layer), as well as any formatting information (presentation layer).
The application (or operating system) at the session layer then determines whether or not the data's intended destination is local to this computer (possibly a disk drive) or a remote location.
In this instance, the user is sending the information to PC-B. (We'll aussme that the user is executing a telnet session).

The session layer determines that this location is remote and has the transport layer deliver the information.
A telnet connection uses TCP/IP and reliable connctions (TCP) at the transport layer, which encapsulates the data from the higher layers into a segment.
With TCP, only a header is added.
The segment contains such information as the source and destination port numbers.

The transport layer passes the segment down to the network layer, which encapsulates the segment into a packet.
The packets adds only a header, which contains layer 3 logical addressing information (source and destination address) as well as other information, such as the upper-layer protocol that created this information.
In this example, TCP created this inforation, so this fact is noted in the packet header, and PC-A places its IP addresses as the source address in the packet and PC-B's IP address as the destination.
This helps the destination, at the network layer, to determine whether the packet is for itself and which upper-layer process should handle the encapsulated segment.
In the TCP/IP protocol stack, the terms *packet* and *datagram* are used interchangeably to describe this PDU.

The network layer then passes the packet down to the data link layer.
The data link layer encapsulates the packet into a frame by adding both a header and a trailer.
This example uses Ethernet as the data link layer medium. The important components placed in the Ethernet frame header are the source and destination MAC addresses, as well as a field checksum sequence (FCS) value so that the destiation can determine whether the frame is valid or corrupted when it is received.
In thisexample, PC-A places its MAC address in the frame in the source field and PC-B's MAC addres in the destination field.

The data link layer frame is then passed down to the physical layer. At this point, remember that the concept of "PDUs" is a human concept that we have placed on the data to make it more readable to us, as well as to help deliver the information to the destination.
However, from a computer's perspective, the data is just a bunch of binary values, 1s and 0s, or bits.
The physical layer converts these bits into a physical property based on the calbe or connection type. In this example, the calbe is a copper cable, so the physical layer will convert the bits into voltages: one voltage level for a bit value of 1 and different voltage level for 0.

### Going Up the Protocol Stack

Assume PC-A and PC-B are on the same piece of copper.

Once the destination PC receives the physical layer signals, the physical layer translates the voltage levels back to their binary representation and passes these bit values up to the date link layer.

The data link layer reassembles the bit values into the original data link frame (Ethernet).
The network adpter examines the FCS to make sure the frame is valid and examines the destination MAC address to ensure that the Ethernet frame is meant for itself.
If the destination MAC address doesn't match its ow MAC address, or it is not a multicast or broadcast address, the NIC drops the frame.
Otherwise, the NIC processes the frame. In this case, the NIC sees that the encapsulated packet is a TCP/IP packet, so it strips off (de-encapsulates) the Ethernet frame information and passes the packet up to the TCP/IP protocol stack at the network layer.

The network layer then examines the logical destination address in the packet header.
If the destination logical address dosen't match its own address or is not a multicast or broadcast address, the network layer drops the packet.
If the logical address matches, then the destination's network layer examines the protocol information in the packet header to determine which protocol should handle the packet.
In this example, the logical address matches and the protocol is defined as TCP. Therefore, the network layer strips off the packet information and passes the encapsulated segment up to the TCP protocol at the transport layer.

Upon receiving the segment, the transport layer can perform many functions, depending on whether this is a reliable or unrealiable connection.
In this instance, the transport layer examines the destination port number in the segment header. In our example, the user from PC-A was using telnet to transmit information to PC-B, so the destination port number is 23.
The transport layer examines this port number and realized that the encapsulated data needs to be forwarded to the telnet application.
If PC-B dosen't support telnet, the transport layer drops the segment.
If it dose, the transport layer strips off the segment information and passes the encapsulated data to the telnet application.
If this is a new connection, a new telent process is started up by the operating system.

### Layers and Communication

As you can see from the encapsulation and de-encapsulation process, *many* processes are occurring on both the source and destination computers to transmit and receive information.

This can become even more complicated if the source and destination are on different segments, separated by other networking devices, such as hubs, switches, and routers.

![[Pasted image 20251004050446.png]]

In this example, PC-A wants to send data to PC-B.
Notice that each device needs to process information at specific layers.
For instance, once PC-A places its information on the wire, the switch connected to PC-A needs to process this information.
Routers make path desitions based on layer 2 destination MAC address found in frames. Therefore, the switch's physical layer will have to convert the physical layer signal into bits and pass these bits up to the data link layer, where they are reassembled into a frame.
the switch examines the destination MAC address of the frame and makes a switching decisioin, finding the port the frames needs to exit.
The switch needs to forward the data to the router so it then sends the frame down to the physical layer, where the bits of the frame are converted into physical layer signals.

The next device encountered is a router, one of the functions of the router is to route packets to destinations.
To accomplish this, the router examines the destination logical address in the packet and extracts a network number from this address.
The router then compares the network number to entries in its routing table.
If the router doesn't find a match, it drops the packet; if it does find a match, it forwards the packet out the destination interface (the local interface designated by the router's routing table).
To accomphlish the packet forwarding, the router passes the packet down to the data link layer, which encapsulates the packet into the correct data link layer frame format.
If this were an Ethernet frame, for example, the source MAC address would be that of the router and the destination would be PC-B.
At the data link layer, the frame is then passed down to the physical layer, where the bits are converted into an electrical signal at the physical layer once again.

> When sending traffic between two devices on different segments, the source device has a layer 2 frame with its own MAC address as the source and the default gateway's (router) MAC address as the destination; however, in the layer 3 packet, the source layer 3 address is the source device and the destination layer 3 address is not the default gateway, but the actual destination the source is trying to reach.
> Remeber that layer 2 addresses are used to communicate with devices on the same physical or logical layer 2 segment/network, and layer 3 addresses are used to communicate with devices across the network (multiple segments).
> MAC addresses can change from link to link, but layer 3 logical addresses, by deafult cannot.

Note that routers separate physical or logical segments, while bridges and switches don't. Therefore, if PC-A wants to send traffic to PC-B, PC-A uses the router's MAC (or layer 2) address to get traffic to the exit point of that this traffic is not for the router but for a machine on a different segment.

Hubs and repeaters operate at the physical layer. Basically, a hub is a multiport repeater: it repeats any physical layer signal it receives.
Therefore, a signal received on one interface of a hub is represented on all of its other interfaces.


---

## Chapter Review

The OSI Reference Model defines the process of connecting two layers of networking functions.

* The application layer provides the user interface.
* The presentation layer determines how data is represented to the user.
* The session layer is responsible for setting up and tearing down connections, including guaranteed services.
* The network layer provides a logical topology and layer 3 addresses: routers operate here.
* The data link layer defines MAC addresses and how communication is performed on a specific media type: switches, bridges, and NICs operate here.
* The physical layer defines physical properties for connections and communication: repeaters and hubs operate here. Wireless solutions are defined at the physical layer.

*Transport layer*
The transport layer sets up and maintains a session layer connection and provides for reliable or unreliable delivery of data, flow control, and multiplexing of connections.

Reliable connections typically go through a handshake process to establish a connection.
ACK are used to provide reliable delivery.

Port or soket numbers are used for connection multiplexing.

Ready/not ready signals and windowing are used implement flow control.
Windowing is more efficient than ready/not ready signals.

*Network layer*
The network layer defines logical addresses, finds paths to destinations based on the network component of the address, and connects different layer 2 media types together.
Routers are used to contain broadcasts.

Routers use their routing table, which has a list of destination network numbers, to assist them when finding a destination.
If a destination is not found in the routing table, the router drops traffic for this destination.

*Data link layer*
The data link layer defines hardware addressing. MAC addresses are 48 bits in length in hexadecimal.
The first 24 bits (six digits) are the *organizationally unique identifier (OUI)*.
MAC addreresses need to be unique only on a local segment.
In a unicast, one frame is sent to all devices on a segment, but only a single device will process it.
In a multicast, one frame is sent to a group of devices.
In a broadcast, one frame is sent to all devices.

*PDU*
A protocol data unit (PDU) describes data and its overhead.
A PDU at the application layer is referred to as data, the transport layer PDU is called a segment, the network layer PDU is called a packet or datagram, the data link layer PDU is called a frame, and the physical layer PDU is called bits.

As traffic goes down the protocol stack, each layer encapsulates the PDU fro the layer above it. At the destination, a de-encapsulation process occurs as the traffic moves back up the protocol stack

| TERM    | LAYER                                         |
| ------- | --------------------------------------------- |
| Data    | Application, presentation, and session layers |
| Segment | Transport                                     |
| Packet  | Network                                       |
| Frame   | Data link                                     |
| Bits    | Physical                                      |

---

## Quick Review

### Introduction to the OSI Reference Model

The OSI Reference Model provides the following advantages:

* It promotes interoperability
* Defines how to connect adjacent layers
* Compartmentalized components
* Allows a modular design
* Serves as a teaching tool
* Simplifies troubleshooting

### Layers of the OSI Reference Model

**Application layer**
The application layer (layer 7) is responsible for initiating a network request or servicing that network request.

**Presentation layer**
The presentation layer (layer 6) defines the format of the information.

**Session layer**
The session layer (layer 5) is responsible for the setup and teardown of the dialog

**Transport layer**
The transport layer (layer 4) handles the mechanics of reliable or unreliable services.

**Network layer**
The network layer (layer 3) is responsible for logical addressing and routing.
Routers function at layer 3.

**Data link layer**
The data link layer (layer 2) assigns physical (MAC) addresses and defines how devices on a specific media type communicate with each other.
Bridges, switches and NICs operate at layer 2.

**Physical layer**
The physical layer (layer 1) handles all physical properties for a connection.
Hubs and repeaters function here.

**more of data link layer**
The data link layer defines MAC addresses, the physical or hardware topology, and the framming used; it provides for connection-oriented and connectionless services.

MAC addresses are 48 bits in length and are represented in hexadecimal.
The first six digits are the OUI (vendor code), and the last six digits represent the NIC within the OUI.

A unicast is sent to one destination on a segment, a mulitcast is sent to a group of devices, and a broadcast (FF:FF:FF:FF:FF:FF) is sent to all devices.

**more of network layer**
The network layer defines logical addresses, find paths to destinations using the network number in the logical address, and connects different media types together.

Routers function at the network layer.

A routing table contains information about destination network numbers and how to reach them.
Routers contain broadcasts, allow for scalability through hierarchial designs, make better decisions for reaching a destination than bridges, cna switch packets on the same interface using VLANs, and can implement advanced features such as QoS and filtering.

**more of transport layer**
The transport layer sets up and maintains a session connection, segements data into smaller payloads, provides for reliable or unreliable transport of data, implements flow control, and multiplexes connections.

Reliable connections use sequence numbers and ACK. TCP is an example.
Reliable transport protocols use a handshake process to set up a connection.

Unreliable services don't use a connection setup process. UDP is an example.

Multiplexing of connections is done with port or socket numbers.

Flow control can be implemented with ready/not ready signals or windowing.
Windowing is more efficient. The size of the window affects your throughput. Depending on the size, a source can send X segments before having to wait for an ACK.

### Encapsulation and De-encapsulation

A PDU describes data and its overhead.
Each layer has a unique PDU: as data is sent down the protocol stack, it is encapsulated at each layer by adding a header and, possibly, a trailer.
The destination de-encapsulates the data as it goes back up the protocol stack

The transport layer PDU is a segment, the network layer PDU is a packet or datagram, the data link layer PDU is a frame and the physical layer PDU is bits.

---

## Questions

1.  The OSI Reference Model provides for all of the following except which one?

A. Defines the process for connecting two layers together, promoting interoperability between vendors
B. Allows vendors to compartmentalize their design efforts to fit a modular design, which eases implementations and simplifies troubleshooting
C. Separates a complex function into simpler components
**D. Defines eight layers common to all networking protocols**
E. Provides a teaching tool to help network administrators understand the communication process used between networking components

D: Defines *Seven* layers

2.  Put the following OSI Reference Model layers in the correct order, from high to low: (a) session, (b) presentation, (c) physical, (d) data link, (e) network, (f) application, (g) transport.

A. c, d, e, g, a, b, f
B. f, a, b, g, d, e, c
C. f, b, g, a, e, d, c
**D. f, b, a, g, e, d, c**

Application (layer 7)
presentation (layer 6)
Session (layer 5)
transport (layer 4)
network (layer 3)
data link (layer 2)
physical (layer 1)

=> f, b, a, g, e, d, c

3.  The `__________` layer of the OSI model provides physical addressing.

A. Transport
B. Network => logical address
**C. Data link**
D. Physical

4.  Sue has noticed that the first half of the MAC address (24 bits) is the same for all the network cards on your computers. What does the first 24 bits of a MAC address represent?

A. AUI
B. NIA
C. RTP
**D. OUI**

5.  The network layer handles all of the following problems except `__________`.

A. Broadcast problems
B. Conversion between media types
**C. Hierarchy through the use of physical addresses**
D. Splitting collision domains into smaller ones

C. The network layer creates a hierarchy through the use of local not physical, addresses.

6.  `__________` are used to provide a reliable connection.

A. Ready/not ready signals => flow control
**B. Sequence numbers and acknowledgments**
C. Windows => flow control
D. Ready/not ready signals and windowing => flow control

7.  Connection multiplexing is done through the use of a `___` number.

**A. Socket**
B. Hardware
C. Network
D. Session

socket or port number

## Performance-based Questions

1.  Match the device with the layer of the OSI Reference Model that the device functions at.

![[Pasted image 20251004062910.png]]

Layer 3: Router
Layer 2: Switch
Layer 1: Hub, Repeater

2.  Match the PDU name with the OSI Reference Model layer at which it is used.

![[Pasted image 20251004062931.png]]

Layer 4: Segment
Layer 3: Packet
Layer 2: Frame
Layer 1: bits

| TERM    | LAYER                                         |
| ------- | --------------------------------------------- |
| Data    | Application, presentation, and session layers |
| Segment | Transport                                     |
| Packet  | Network                                       |
| Frame   | Data link                                     |
| Bits    | Physical                                      |
